<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>STLCRef.Examples</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Keyword">module</a> <a id="8" href="STLCRef.Examples.html" class="Module">STLCRef.Examples</a> <a id="25" class="Keyword">where</a>

<a id="32" class="Comment">-- This file contains a few example programs for the definitional</a>
<a id="98" class="Comment">-- interpreter for STLC+Ref using monadic strength, defined in Section</a>
<a id="169" class="Comment">-- 3.</a>

<a id="176" class="Keyword">open</a> <a id="181" class="Keyword">import</a> <a id="188" href="STLCRef.Semantics.html" class="Module">STLCRef.Semantics</a>
<a id="206" class="Keyword">open</a> <a id="211" class="Keyword">import</a> <a id="218" href="Data.List.Most.html" class="Module">Data.List.Most</a>
<a id="233" class="Keyword">open</a> <a id="238" class="Keyword">import</a> <a id="245" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
<a id="283" class="Keyword">open</a> <a id="288" class="Keyword">import</a> <a id="295" href="Data.Integer.html" class="Module">Data.Integer</a> <a id="308" class="Keyword">hiding</a> <a id="315" class="Symbol">(</a><a id="316" href="Data.Integer.Base.html#suc" class="Function">suc</a><a id="319" class="Symbol">)</a>
<a id="321" class="Keyword">open</a> <a id="326" class="Keyword">import</a> <a id="333" href="Agda.Builtin.Nat.html" class="Module">Agda.Builtin.Nat</a> <a id="350" class="Keyword">hiding</a> <a id="357" class="Symbol">(</a><a id="358" href="Agda.Builtin.Nat.html#_%2B_" class="Primitive Operator">_+_</a><a id="361" class="Symbol">)</a>
<a id="363" class="Keyword">open</a> <a id="368" class="Keyword">import</a> <a id="375" href="Data.Maybe.html" class="Module">Data.Maybe</a>
<a id="386" class="Keyword">open</a> <a id="391" class="Keyword">import</a> <a id="398" href="Data.Product.html" class="Module">Data.Product</a>

<a id="412" class="Comment">-------------------</a>
<a id="432" class="Comment">-- STLC FRAGMENT --</a>
<a id="452" class="Comment">-------------------</a>

<a id="473" class="Comment">-- The identity function: λ x . x</a>
<a id="idexpr" href="STLCRef.Examples.html#idexpr" class="Function">idexpr</a> <a id="514" class="Symbol">:</a> <a id="516" href="STLCRef.Semantics.html#Expr" class="Datatype">Expr</a> <a id="521" href="Agda.Builtin.List.html#List.%5B%5D" class="InductiveConstructor">[]</a> <a id="524" class="Symbol">(</a><a id="525" href="STLCRef.Semantics.html#Ty.unit" class="InductiveConstructor">unit</a> <a id="530" href="STLCRef.Semantics.html#Ty._%E2%87%92_" class="InductiveConstructor Operator">⇒</a> <a id="532" href="STLCRef.Semantics.html#Ty.unit" class="InductiveConstructor">unit</a><a id="536" class="Symbol">)</a>
<a id="538" href="STLCRef.Examples.html#idexpr" class="Function">idexpr</a> <a id="545" class="Symbol">=</a> <a id="547" href="STLCRef.Semantics.html#Expr.%C6%9B" class="InductiveConstructor">ƛ</a> <a id="549" class="Symbol">(</a><a id="550" href="STLCRef.Semantics.html#Expr.var" class="InductiveConstructor">var</a> <a id="554" class="Symbol">(</a><a id="555" href="Data.List.Any.html#Any.here" class="InductiveConstructor">here</a> <a id="560" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a><a id="564" class="Symbol">))</a>

<a id="568" class="Comment">-- id () = ()</a>
<a id="test-idexpr" href="STLCRef.Examples.html#test-idexpr" class="Function">test-idexpr</a> <a id="594" class="Symbol">:</a> <a id="596" href="STLCRef.Semantics.html#eval" class="Function">eval</a> <a id="601" class="Number">2</a> <a id="603" class="Symbol">(</a><a id="604" href="STLCRef.Examples.html#idexpr" class="Function">idexpr</a> <a id="611" href="STLCRef.Semantics.html#Expr._%C2%B7_" class="InductiveConstructor Operator">·</a> <a id="613" href="STLCRef.Semantics.html#Expr.unit" class="InductiveConstructor">unit</a><a id="617" class="Symbol">)</a> <a id="619" href="Data.List.All.html#All.%5B%5D" class="InductiveConstructor">[]</a> <a id="622" href="Data.List.All.html#All.%5B%5D" class="InductiveConstructor">[]</a> <a id="625" href="Agda.Builtin.Equality.html#_%E2%89%A1_" class="Datatype Operator">≡</a> <a id="627" href="Data.Maybe.Base.html#Maybe.just" class="InductiveConstructor">just</a> <a id="632" class="Symbol">(_</a> <a id="635" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="637" href="Data.List.All.html#All.%5B%5D" class="InductiveConstructor">[]</a> <a id="640" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="642" href="STLCRef.Semantics.html#Val.unit" class="InductiveConstructor">unit</a> <a id="647" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="649" class="Symbol">_)</a>
<a id="652" href="STLCRef.Examples.html#test-idexpr" class="Function">test-idexpr</a> <a id="664" class="Symbol">=</a> <a id="666" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a>


<a id="673" class="Comment">-- curried addition: λ x . λ y . y + x</a>
<a id="curry+" href="STLCRef.Examples.html#curry%2B" class="Function">curry+</a> <a id="719" class="Symbol">:</a> <a id="721" href="STLCRef.Semantics.html#Expr" class="Datatype">Expr</a> <a id="726" href="Agda.Builtin.List.html#List.%5B%5D" class="InductiveConstructor">[]</a> <a id="729" class="Symbol">(</a><a id="730" href="STLCRef.Semantics.html#Ty.int" class="InductiveConstructor">int</a> <a id="734" href="STLCRef.Semantics.html#Ty._%E2%87%92_" class="InductiveConstructor Operator">⇒</a> <a id="736" class="Symbol">(</a><a id="737" href="STLCRef.Semantics.html#Ty.int" class="InductiveConstructor">int</a> <a id="741" href="STLCRef.Semantics.html#Ty._%E2%87%92_" class="InductiveConstructor Operator">⇒</a> <a id="743" href="STLCRef.Semantics.html#Ty.int" class="InductiveConstructor">int</a><a id="746" class="Symbol">))</a>
<a id="749" href="STLCRef.Examples.html#curry%2B" class="Function">curry+</a> <a id="756" class="Symbol">=</a> <a id="758" href="STLCRef.Semantics.html#Expr.%C6%9B" class="InductiveConstructor">ƛ</a> <a id="760" class="Symbol">(</a><a id="761" href="STLCRef.Semantics.html#Expr.%C6%9B" class="InductiveConstructor">ƛ</a> <a id="763" class="Symbol">(</a><a id="764" href="STLCRef.Semantics.html#Expr.iop" class="InductiveConstructor">iop</a> <a id="768" href="Data.Integer.Base.html#_%2B_" class="Function Operator">_+_</a> <a id="772" class="Symbol">(</a><a id="773" href="STLCRef.Semantics.html#Expr.var" class="InductiveConstructor">var</a> <a id="777" class="Symbol">(</a><a id="778" href="Data.List.Any.html#Any.here" class="InductiveConstructor">here</a> <a id="783" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a><a id="787" class="Symbol">))</a> <a id="790" class="Symbol">(</a><a id="791" href="STLCRef.Semantics.html#Expr.var" class="InductiveConstructor">var</a> <a id="795" class="Symbol">(</a><a id="796" href="Data.List.Any.html#Any.there" class="InductiveConstructor">there</a> <a id="802" class="Symbol">(</a><a id="803" href="Data.List.Any.html#Any.here" class="InductiveConstructor">here</a> <a id="808" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a><a id="812" class="Symbol">)))))</a>

<a id="819" class="Comment">-- 1 + 1 = 2</a>
<a id="test-curry+" href="STLCRef.Examples.html#test-curry%2B" class="Function">test-curry+</a> <a id="844" class="Symbol">:</a> <a id="846" href="STLCRef.Semantics.html#eval" class="Function">eval</a> <a id="851" class="Number">3</a> <a id="853" class="Symbol">((</a><a id="855" href="STLCRef.Examples.html#curry%2B" class="Function">curry+</a> <a id="862" href="STLCRef.Semantics.html#Expr._%C2%B7_" class="InductiveConstructor Operator">·</a> <a id="864" class="Symbol">(</a><a id="865" href="STLCRef.Semantics.html#Expr.num" class="InductiveConstructor">num</a> <a id="869" class="Symbol">(</a><a id="870" href="Agda.Builtin.Int.html#Int.%2B_" class="InductiveConstructor Operator">+</a> <a id="872" class="Symbol">(</a><a id="873" href="Agda.Builtin.Nat.html#Nat.suc" class="InductiveConstructor">suc</a> <a id="877" href="Agda.Builtin.Nat.html#Nat.zero" class="InductiveConstructor">zero</a><a id="881" class="Symbol">))))</a> <a id="886" href="STLCRef.Semantics.html#Expr._%C2%B7_" class="InductiveConstructor Operator">·</a> <a id="888" class="Symbol">(</a><a id="889" href="STLCRef.Semantics.html#Expr.num" class="InductiveConstructor">num</a> <a id="893" class="Symbol">(</a><a id="894" href="Agda.Builtin.Int.html#Int.%2B_" class="InductiveConstructor Operator">+</a> <a id="896" class="Symbol">(</a><a id="897" href="Agda.Builtin.Nat.html#Nat.suc" class="InductiveConstructor">suc</a> <a id="901" href="Agda.Builtin.Nat.html#Nat.zero" class="InductiveConstructor">zero</a><a id="905" class="Symbol">))))</a> <a id="910" href="Data.List.All.html#All.%5B%5D" class="InductiveConstructor">[]</a> <a id="913" href="Data.List.All.html#All.%5B%5D" class="InductiveConstructor">[]</a>
              <a id="930" href="Agda.Builtin.Equality.html#_%E2%89%A1_" class="Datatype Operator">≡</a> <a id="932" href="Data.Maybe.Base.html#Maybe.just" class="InductiveConstructor">just</a> <a id="937" class="Symbol">(_</a> <a id="940" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="942" href="Data.List.All.html#All.%5B%5D" class="InductiveConstructor">[]</a> <a id="945" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="947" href="STLCRef.Semantics.html#Val.num" class="InductiveConstructor">num</a> <a id="951" class="Symbol">(</a><a id="952" href="Agda.Builtin.Int.html#Int.%2B_" class="InductiveConstructor Operator">+</a> <a id="954" class="Symbol">(</a><a id="955" href="Agda.Builtin.Nat.html#Nat.suc" class="InductiveConstructor">suc</a> <a id="959" class="Symbol">(</a><a id="960" href="Agda.Builtin.Nat.html#Nat.suc" class="InductiveConstructor">suc</a> <a id="964" href="Agda.Builtin.Nat.html#Nat.zero" class="InductiveConstructor">zero</a><a id="968" class="Symbol">)))</a> <a id="972" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="974" class="Symbol">_)</a>
<a id="977" href="STLCRef.Examples.html#test-curry%2B" class="Function">test-curry+</a> <a id="989" class="Symbol">=</a> <a id="991" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a>


<a id="998" class="Comment">------------------</a>
<a id="1017" class="Comment">-- REF FRAGMENT --</a>
<a id="1036" class="Comment">------------------</a>

<a id="1056" class="Comment">-- Sugar for let: LET e1 e2 = (λ x . e2) e1</a>
<a id="LET" href="STLCRef.Examples.html#LET" class="Function">LET</a> <a id="1104" class="Symbol">:</a> <a id="1106" class="Symbol">∀</a> <a id="1108" class="Symbol">{</a><a id="1109" href="STLCRef.Examples.html#1109" class="Bound">Γ</a> <a id="1111" href="STLCRef.Examples.html#1111" class="Bound">a</a> <a id="1113" href="STLCRef.Examples.html#1113" class="Bound">b</a><a id="1114" class="Symbol">}</a> <a id="1116" class="Symbol">→</a> <a id="1118" href="STLCRef.Semantics.html#Expr" class="Datatype">Expr</a> <a id="1123" href="STLCRef.Examples.html#1109" class="Bound">Γ</a> <a id="1125" href="STLCRef.Examples.html#1111" class="Bound">a</a> <a id="1127" class="Symbol">→</a> <a id="1129" href="STLCRef.Semantics.html#Expr" class="Datatype">Expr</a> <a id="1134" class="Symbol">(</a><a id="1135" href="STLCRef.Examples.html#1111" class="Bound">a</a> <a id="1137" href="Agda.Builtin.List.html#List._%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="1139" href="STLCRef.Examples.html#1109" class="Bound">Γ</a><a id="1140" class="Symbol">)</a> <a id="1142" href="STLCRef.Examples.html#1113" class="Bound">b</a> <a id="1144" class="Symbol">→</a> <a id="1146" href="STLCRef.Semantics.html#Expr" class="Datatype">Expr</a> <a id="1151" href="STLCRef.Examples.html#1109" class="Bound">Γ</a> <a id="1153" href="STLCRef.Examples.html#1113" class="Bound">b</a>
<a id="1155" href="STLCRef.Examples.html#LET" class="Function">LET</a> <a id="1159" href="STLCRef.Examples.html#1159" class="Bound">bnd</a> <a id="1163" href="STLCRef.Examples.html#1163" class="Bound">bod</a> <a id="1167" class="Symbol">=</a> <a id="1169" class="Symbol">(</a><a id="1170" href="STLCRef.Semantics.html#Expr.%C6%9B" class="InductiveConstructor">ƛ</a> <a id="1172" href="STLCRef.Examples.html#1163" class="Bound">bod</a><a id="1175" class="Symbol">)</a> <a id="1177" href="STLCRef.Semantics.html#Expr._%C2%B7_" class="InductiveConstructor Operator">·</a> <a id="1179" href="STLCRef.Examples.html#1159" class="Bound">bnd</a>

<a id="1184" class="Comment">-- Factorial function, defined via Landin&#39;s knot:</a>
<a id="1234" class="Comment">--</a>
<a id="1237" class="Comment">-- let r = ref (λ x . x) in</a>
<a id="1265" class="Comment">-- let f = λ n . ifz n then 1 else n * (!r (n - 1)) in</a>
<a id="1320" class="Comment">-- let _ = r := f in</a>
<a id="1341" class="Comment">-- f 4</a>
<a id="landin-fac" href="STLCRef.Examples.html#landin-fac" class="Function">landin-fac</a> <a id="1359" class="Symbol">:</a> <a id="1361" href="STLCRef.Semantics.html#Expr" class="Datatype">Expr</a> <a id="1366" href="Agda.Builtin.List.html#List.%5B%5D" class="InductiveConstructor">[]</a> <a id="1369" href="STLCRef.Semantics.html#Ty.int" class="InductiveConstructor">int</a>
<a id="1373" href="STLCRef.Examples.html#landin-fac" class="Function">landin-fac</a> <a id="1384" class="Symbol">=</a>
  <a id="1388" href="STLCRef.Examples.html#LET" class="Function">LET</a> <a id="1392" class="Symbol">(</a><a id="1393" href="STLCRef.Semantics.html#Expr.ref" class="InductiveConstructor">ref</a> <a id="1397" class="Symbol">{</a><a id="1398" class="Argument">t</a> <a id="1400" class="Symbol">=</a> <a id="1402" href="STLCRef.Semantics.html#Ty.int" class="InductiveConstructor">int</a> <a id="1406" href="STLCRef.Semantics.html#Ty._%E2%87%92_" class="InductiveConstructor Operator">⇒</a> <a id="1408" href="STLCRef.Semantics.html#Ty.int" class="InductiveConstructor">int</a><a id="1411" class="Symbol">}</a> <a id="1413" class="Symbol">(</a><a id="1414" href="STLCRef.Semantics.html#Expr.%C6%9B" class="InductiveConstructor">ƛ</a> <a id="1416" class="Symbol">(</a><a id="1417" href="STLCRef.Semantics.html#Expr.var" class="InductiveConstructor">var</a> <a id="1421" class="Symbol">(</a><a id="1422" href="Data.List.Any.html#Any.here" class="InductiveConstructor">here</a> <a id="1427" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a><a id="1431" class="Symbol">))))</a>
  <a id="1438" class="Symbol">(</a><a id="1439" href="STLCRef.Examples.html#LET" class="Function">LET</a> <a id="1443" class="Symbol">(</a><a id="1444" href="STLCRef.Semantics.html#Expr.%C6%9B" class="InductiveConstructor">ƛ</a> <a id="1446" class="Symbol">{</a><a id="1447" class="Argument">a</a> <a id="1449" class="Symbol">=</a> <a id="1451" href="STLCRef.Semantics.html#Ty.int" class="InductiveConstructor">int</a><a id="1454" class="Symbol">}</a> <a id="1456" class="Symbol">(</a><a id="1457" href="STLCRef.Semantics.html#Expr.ifz" class="InductiveConstructor">ifz</a> <a id="1461" class="Symbol">(</a><a id="1462" href="STLCRef.Semantics.html#Expr.var" class="InductiveConstructor">var</a> <a id="1466" class="Symbol">(</a><a id="1467" href="Data.List.Any.html#Any.here" class="InductiveConstructor">here</a> <a id="1472" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a><a id="1476" class="Symbol">))</a>
                         <a id="1504" class="Symbol">(</a><a id="1505" href="STLCRef.Semantics.html#Expr.num" class="InductiveConstructor">num</a> <a id="1509" class="Symbol">(</a><a id="1510" href="Agda.Builtin.Int.html#Int.%2B_" class="InductiveConstructor Operator">+</a> <a id="1512" class="Number">1</a><a id="1513" class="Symbol">))</a>
                         <a id="1541" class="Symbol">(</a><a id="1542" href="STLCRef.Semantics.html#Expr.iop" class="InductiveConstructor">iop</a> <a id="1546" class="Symbol">(</a><a id="1547" href="Data.Integer.Base.html#_%2A_" class="Function Operator">Data.Integer._*_</a><a id="1563" class="Symbol">)</a> <a id="1565" class="Symbol">(</a><a id="1566" href="STLCRef.Semantics.html#Expr.var" class="InductiveConstructor">var</a> <a id="1570" class="Symbol">(</a><a id="1571" href="Data.List.Any.html#Any.here" class="InductiveConstructor">here</a> <a id="1576" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a><a id="1580" class="Symbol">))</a>
                              <a id="1613" class="Symbol">((</a><a id="1615" href="STLCRef.Semantics.html#Expr.%21_" class="InductiveConstructor Operator">!</a> <a id="1617" class="Symbol">(</a><a id="1618" href="STLCRef.Semantics.html#Expr.var" class="InductiveConstructor">var</a> <a id="1622" class="Symbol">(</a><a id="1623" href="Data.List.Any.html#Any.there" class="InductiveConstructor">there</a> <a id="1629" class="Symbol">(</a><a id="1630" href="Data.List.Any.html#Any.here" class="InductiveConstructor">here</a> <a id="1635" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a><a id="1639" class="Symbol">))))</a> <a id="1644" href="STLCRef.Semantics.html#Expr._%C2%B7_" class="InductiveConstructor Operator">·</a> <a id="1646" class="Symbol">(</a><a id="1647" href="STLCRef.Semantics.html#Expr.iop" class="InductiveConstructor">iop</a> <a id="1651" class="Symbol">(</a><a id="1652" href="Data.Integer.Base.html#_-_" class="Function Operator">Data.Integer._-_</a><a id="1668" class="Symbol">)</a> <a id="1670" class="Symbol">(</a><a id="1671" href="STLCRef.Semantics.html#Expr.var" class="InductiveConstructor">var</a> <a id="1675" class="Symbol">(</a><a id="1676" href="Data.List.Any.html#Any.here" class="InductiveConstructor">here</a> <a id="1681" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a><a id="1685" class="Symbol">))</a> <a id="1688" class="Symbol">(</a><a id="1689" href="STLCRef.Semantics.html#Expr.num" class="InductiveConstructor">num</a> <a id="1693" class="Symbol">(</a><a id="1694" href="Agda.Builtin.Int.html#Int.%2B_" class="InductiveConstructor Operator">+</a> <a id="1696" class="Number">1</a><a id="1697" class="Symbol">)))))))</a>
  <a id="1707" class="Symbol">(</a><a id="1708" href="STLCRef.Examples.html#LET" class="Function">LET</a> <a id="1712" class="Symbol">((</a><a id="1714" href="STLCRef.Semantics.html#Expr.var" class="InductiveConstructor">var</a> <a id="1718" class="Symbol">(</a><a id="1719" href="Data.List.Any.html#Any.there" class="InductiveConstructor">there</a> <a id="1725" class="Symbol">(</a><a id="1726" href="Data.List.Any.html#Any.here" class="InductiveConstructor">here</a> <a id="1731" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a><a id="1735" class="Symbol">)))</a> <a id="1739" href="STLCRef.Semantics.html#Expr._%E2%89%94_" class="InductiveConstructor Operator">≔</a> <a id="1741" href="STLCRef.Semantics.html#Expr.var" class="InductiveConstructor">var</a> <a id="1745" class="Symbol">(</a><a id="1746" href="Data.List.Any.html#Any.here" class="InductiveConstructor">here</a> <a id="1751" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a><a id="1755" class="Symbol">))</a>
  <a id="1760" class="Symbol">(</a><a id="1761" href="STLCRef.Semantics.html#Expr.var" class="InductiveConstructor">var</a> <a id="1765" class="Symbol">(</a><a id="1766" href="Data.List.Any.html#Any.there" class="InductiveConstructor">there</a> <a id="1772" class="Symbol">(</a><a id="1773" href="Data.List.Any.html#Any.here" class="InductiveConstructor">here</a> <a id="1778" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a><a id="1782" class="Symbol">)))</a> <a id="1786" href="STLCRef.Semantics.html#Expr._%C2%B7_" class="InductiveConstructor Operator">·</a> <a id="1788" class="Symbol">(</a><a id="1789" href="STLCRef.Semantics.html#Expr.num" class="InductiveConstructor">num</a> <a id="1793" class="Symbol">(</a><a id="1794" href="Agda.Builtin.Int.html#Int.%2B_" class="InductiveConstructor Operator">+</a> <a id="1796" class="Number">4</a><a id="1797" class="Symbol">))))</a>

<a id="test-landin-fac" href="STLCRef.Examples.html#test-landin-fac" class="Function">test-landin-fac</a> <a id="1819" class="Symbol">:</a> <a id="1821" href="STLCRef.Semantics.html#eval" class="Function">eval</a> <a id="1826" class="Number">20</a> <a id="1829" href="STLCRef.Examples.html#landin-fac" class="Function">landin-fac</a> <a id="1840" href="Data.List.All.html#All.%5B%5D" class="InductiveConstructor">[]</a> <a id="1843" href="Data.List.All.html#All.%5B%5D" class="InductiveConstructor">[]</a> <a id="1846" href="Agda.Builtin.Equality.html#_%E2%89%A1_" class="Datatype Operator">≡</a> <a id="1848" href="Data.Maybe.Base.html#Maybe.just" class="InductiveConstructor">just</a> <a id="1853" class="Symbol">(_</a> <a id="1856" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="1858" class="Symbol">_</a> <a id="1860" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="1862" href="STLCRef.Semantics.html#Val.num" class="InductiveConstructor">num</a> <a id="1866" class="Symbol">(</a><a id="1867" href="Agda.Builtin.Int.html#Int.%2B_" class="InductiveConstructor Operator">+</a> <a id="1869" class="Number">24</a><a id="1871" class="Symbol">)</a> <a id="1873" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="1875" class="Symbol">_)</a>
<a id="1878" href="STLCRef.Examples.html#test-landin-fac" class="Function">test-landin-fac</a> <a id="1894" class="Symbol">=</a> <a id="1896" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a>

<a id="1902" class="Comment">-- Divergence via Landin&#39;s knot:</a>
<a id="1935" class="Comment">--</a>
<a id="1938" class="Comment">-- let r = ref (λ x . x) in</a>
<a id="1966" class="Comment">-- let f = λ x . !r 0 in</a>
<a id="1991" class="Comment">-- let _ = r := f in</a>
<a id="2012" class="Comment">-- f 0</a>
<a id="landin-div" href="STLCRef.Examples.html#landin-div" class="Function">landin-div</a> <a id="2030" class="Symbol">:</a> <a id="2032" href="STLCRef.Semantics.html#Expr" class="Datatype">Expr</a> <a id="2037" href="Agda.Builtin.List.html#List.%5B%5D" class="InductiveConstructor">[]</a> <a id="2040" href="STLCRef.Semantics.html#Ty.int" class="InductiveConstructor">int</a>
<a id="2044" href="STLCRef.Examples.html#landin-div" class="Function">landin-div</a> <a id="2055" class="Symbol">=</a>
  <a id="2059" href="STLCRef.Examples.html#LET" class="Function">LET</a> <a id="2063" class="Symbol">(</a><a id="2064" href="STLCRef.Semantics.html#Expr.ref" class="InductiveConstructor">ref</a> <a id="2068" class="Symbol">{</a><a id="2069" class="Argument">t</a> <a id="2071" class="Symbol">=</a> <a id="2073" href="STLCRef.Semantics.html#Ty.int" class="InductiveConstructor">int</a> <a id="2077" href="STLCRef.Semantics.html#Ty._%E2%87%92_" class="InductiveConstructor Operator">⇒</a> <a id="2079" href="STLCRef.Semantics.html#Ty.int" class="InductiveConstructor">int</a><a id="2082" class="Symbol">}</a> <a id="2084" class="Symbol">(</a><a id="2085" href="STLCRef.Semantics.html#Expr.%C6%9B" class="InductiveConstructor">ƛ</a> <a id="2087" class="Symbol">(</a><a id="2088" href="STLCRef.Semantics.html#Expr.var" class="InductiveConstructor">var</a> <a id="2092" class="Symbol">(</a><a id="2093" href="Data.List.Any.html#Any.here" class="InductiveConstructor">here</a> <a id="2098" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a><a id="2102" class="Symbol">))))</a>
  <a id="2109" class="Symbol">(</a><a id="2110" href="STLCRef.Examples.html#LET" class="Function">LET</a> <a id="2114" class="Symbol">(</a><a id="2115" href="STLCRef.Semantics.html#Expr.%C6%9B" class="InductiveConstructor">ƛ</a> <a id="2117" class="Symbol">{</a><a id="2118" class="Argument">a</a> <a id="2120" class="Symbol">=</a> <a id="2122" href="STLCRef.Semantics.html#Ty.int" class="InductiveConstructor">int</a><a id="2125" class="Symbol">}</a> <a id="2127" class="Symbol">((</a><a id="2129" href="STLCRef.Semantics.html#Expr.%21_" class="InductiveConstructor Operator">!</a> <a id="2131" class="Symbol">(</a><a id="2132" href="STLCRef.Semantics.html#Expr.var" class="InductiveConstructor">var</a> <a id="2136" class="Symbol">(</a><a id="2137" href="Data.List.Any.html#Any.there" class="InductiveConstructor">there</a> <a id="2143" class="Symbol">(</a><a id="2144" href="Data.List.Any.html#Any.here" class="InductiveConstructor">here</a> <a id="2149" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a><a id="2153" class="Symbol">))))</a> <a id="2158" href="STLCRef.Semantics.html#Expr._%C2%B7_" class="InductiveConstructor Operator">·</a> <a id="2160" href="STLCRef.Semantics.html#Expr.num" class="InductiveConstructor">num</a> <a id="2164" class="Symbol">(</a><a id="2165" href="Agda.Builtin.Int.html#Int.%2B_" class="InductiveConstructor Operator">+</a> <a id="2167" href="Agda.Builtin.Nat.html#Nat.zero" class="InductiveConstructor">zero</a><a id="2171" class="Symbol">)))</a>
  <a id="2177" class="Symbol">(</a><a id="2178" href="STLCRef.Examples.html#LET" class="Function">LET</a> <a id="2182" class="Symbol">((</a><a id="2184" href="STLCRef.Semantics.html#Expr.var" class="InductiveConstructor">var</a> <a id="2188" class="Symbol">(</a><a id="2189" href="Data.List.Any.html#Any.there" class="InductiveConstructor">there</a> <a id="2195" class="Symbol">(</a><a id="2196" href="Data.List.Any.html#Any.here" class="InductiveConstructor">here</a> <a id="2201" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a><a id="2205" class="Symbol">)))</a> <a id="2209" href="STLCRef.Semantics.html#Expr._%E2%89%94_" class="InductiveConstructor Operator">≔</a> <a id="2211" href="STLCRef.Semantics.html#Expr.var" class="InductiveConstructor">var</a> <a id="2215" class="Symbol">(</a><a id="2216" href="Data.List.Any.html#Any.here" class="InductiveConstructor">here</a> <a id="2221" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a><a id="2225" class="Symbol">))</a>
  <a id="2230" class="Symbol">(</a><a id="2231" href="STLCRef.Semantics.html#Expr.var" class="InductiveConstructor">var</a> <a id="2235" class="Symbol">(</a><a id="2236" href="Data.List.Any.html#Any.there" class="InductiveConstructor">there</a> <a id="2242" class="Symbol">(</a><a id="2243" href="Data.List.Any.html#Any.here" class="InductiveConstructor">here</a> <a id="2248" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a><a id="2252" class="Symbol">)))</a> <a id="2256" href="STLCRef.Semantics.html#Expr._%C2%B7_" class="InductiveConstructor Operator">·</a> <a id="2258" class="Symbol">(</a><a id="2259" href="STLCRef.Semantics.html#Expr.num" class="InductiveConstructor">num</a> <a id="2263" class="Symbol">(</a><a id="2264" href="Agda.Builtin.Int.html#Int.%2B_" class="InductiveConstructor Operator">+</a> <a id="2266" href="Agda.Builtin.Nat.html#Nat.zero" class="InductiveConstructor">zero</a><a id="2270" class="Symbol">))))</a>


<a id="test-landin-div" href="STLCRef.Examples.html#test-landin-div" class="Function">test-landin-div</a> <a id="2293" class="Symbol">:</a> <a id="2295" href="STLCRef.Semantics.html#eval" class="Function">eval</a> <a id="2300" class="Number">1337</a> <a id="2305" href="STLCRef.Examples.html#landin-div" class="Function">landin-div</a> <a id="2316" href="Data.List.All.html#All.%5B%5D" class="InductiveConstructor">[]</a> <a id="2319" href="Data.List.All.html#All.%5B%5D" class="InductiveConstructor">[]</a> <a id="2322" href="Agda.Builtin.Equality.html#_%E2%89%A1_" class="Datatype Operator">≡</a> <a id="2324" href="Data.Maybe.Base.html#Maybe.nothing" class="InductiveConstructor">nothing</a>
<a id="2332" href="STLCRef.Examples.html#test-landin-div" class="Function">test-landin-div</a> <a id="2348" class="Symbol">=</a> <a id="2350" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a>

</pre></body></html>