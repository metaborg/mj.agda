<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>MJ.Semantics.Objects</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="MJ.Types.html" class="Module">MJ.Types</a> <a id="22" class="Symbol">as</a> <a id="25" class="Module">Types</a>
<a id="31" class="Keyword">import</a> <a id="38" href="MJ.Classtable.Core.html" class="Module">MJ.Classtable.Core</a> <a id="57" class="Symbol">as</a> <a id="60" class="Module">Core</a>

<a id="66" class="Keyword">module</a> <a id="73" href="MJ.Semantics.Objects.html" class="Module">MJ.Semantics.Objects</a> <a id="94" class="Symbol">{</a><a id="95" href="MJ.Semantics.Objects.html#95" class="Bound">c</a><a id="96" class="Symbol">}(</a><a id="98" href="MJ.Semantics.Objects.html#98" class="Bound">Ct</a> <a id="101" class="Symbol">:</a> <a id="103" href="MJ.Classtable.Core.html#Classtable" class="Record">Core.Classtable</a> <a id="119" href="MJ.Semantics.Objects.html#95" class="Bound">c</a><a id="120" class="Symbol">)</a> <a id="122" class="Keyword">where</a>

<a id="129" class="Keyword">open</a> <a id="134" class="Keyword">import</a> <a id="141" href="Prelude.html" class="Module">Prelude</a>

<a id="150" class="Keyword">open</a> <a id="155" class="Keyword">import</a> <a id="162" href="Level.html" class="Module">Level</a> <a id="168" class="Keyword">renaming</a> <a id="177" class="Symbol">(</a><a id="178" href="Agda.Primitive.html#lsuc" class="Primitive">suc</a> <a id="182" class="Symbol">to</a> <a id="185" href="Agda.Primitive.html#lsuc" class="Primitive">lsuc</a><a id="189" class="Symbol">;</a> <a id="191" href="Agda.Primitive.html#lzero" class="Primitive">zero</a> <a id="196" class="Symbol">to</a> <a id="199" href="Agda.Primitive.html#lzero" class="Primitive">lzero</a><a id="204" class="Symbol">)</a>
<a id="206" class="Keyword">open</a> <a id="211" class="Keyword">import</a> <a id="218" href="Data.List.Most.html" class="Module">Data.List.Most</a>
<a id="233" class="Keyword">open</a> <a id="238" class="Keyword">import</a> <a id="245" href="Data.List.Prefix.html" class="Module">Data.List.Prefix</a>

<a id="263" class="Keyword">open</a> <a id="268" href="MJ.Classtable.Core.html" class="Module">Core</a> <a id="273" href="MJ.Semantics.Objects.html#95" class="Bound">c</a>
<a id="275" class="Keyword">open</a> <a id="280" href="MJ.Classtable.Core.html#Classtable" class="Module">Classtable</a> <a id="291" href="MJ.Semantics.Objects.html#98" class="Bound">Ct</a>

<a id="295" class="Keyword">open</a> <a id="300" class="Keyword">import</a> <a id="307" href="MJ.Classtable.Membership.html" class="Module">MJ.Classtable.Membership</a> <a id="332" href="MJ.Semantics.Objects.html#98" class="Bound">Ct</a>
<a id="335" class="Keyword">open</a> <a id="340" class="Keyword">import</a> <a id="347" href="MJ.Semantics.Values.html" class="Module">MJ.Semantics.Values</a> <a id="367" href="MJ.Semantics.Objects.html#98" class="Bound">Ct</a>
<a id="370" class="Keyword">open</a> <a id="375" class="Keyword">import</a> <a id="382" href="MJ.LexicalScope.html" class="Module">MJ.LexicalScope</a> <a id="398" href="MJ.Semantics.Objects.html#95" class="Bound">c</a>

<a id="401" class="Comment">{-
Abstract interface for object encodings.
-}</a>
<a id="448" class="Keyword">record</a> <a id="ObjEncoding" href="MJ.Semantics.Objects.html#ObjEncoding" class="Record">ObjEncoding</a> <a id="467" class="Symbol">:</a> <a id="469" class="PrimitiveType">Set</a> <a id="473" class="Symbol">(</a><a id="474" href="Agda.Primitive.html#lsuc" class="Primitive">lsuc</a> <a id="479" href="Agda.Primitive.html#lzero" class="Primitive">lzero</a><a id="484" class="Symbol">)</a> <a id="486" class="Keyword">where</a>
  <a id="494" class="Keyword">field</a>
    <a id="ObjEncoding.Obj" href="MJ.Semantics.Objects.html#ObjEncoding.Obj" class="Field">Obj</a> <a id="508" class="Symbol">:</a> <a id="510" href="MJ.Types.html#World" class="Function">World</a> <a id="516" href="MJ.Semantics.Objects.html#95" class="Bound">c</a> <a id="518" class="Symbol">→</a> <a id="520" href="MJ.Types.html#Cid" class="Datatype">Cid</a> <a id="524" href="MJ.Semantics.Objects.html#95" class="Bound">c</a> <a id="526" class="Symbol">→</a> <a id="528" class="PrimitiveType">Set</a>
    <a id="ObjEncoding.weaken-obj" href="MJ.Semantics.Objects.html#ObjEncoding.weaken-obj" class="Field">weaken-obj</a> <a id="547" class="Symbol">:</a> <a id="549" class="Symbol">∀</a> <a id="551" class="Symbol">{</a><a id="552" href="MJ.Semantics.Objects.html#552" class="Bound">W</a> <a id="554" href="MJ.Semantics.Objects.html#554" class="Bound">W&#39;</a><a id="556" class="Symbol">}</a> <a id="558" href="MJ.Semantics.Objects.html#558" class="Bound">cid</a> <a id="562" class="Symbol">→</a> <a id="564" href="MJ.Semantics.Objects.html#554" class="Bound">W&#39;</a> <a id="567" href="Data.List.Prefix.html#_%E2%8A%92_" class="Function Operator">⊒</a> <a id="569" href="MJ.Semantics.Objects.html#552" class="Bound">W</a> <a id="571" class="Symbol">→</a> <a id="573" href="MJ.Semantics.Objects.html#ObjEncoding.Obj" class="Field">Obj</a> <a id="577" href="MJ.Semantics.Objects.html#552" class="Bound">W</a> <a id="579" href="MJ.Semantics.Objects.html#558" class="Bound">cid</a> <a id="583" class="Symbol">→</a> <a id="585" href="MJ.Semantics.Objects.html#ObjEncoding.Obj" class="Field">Obj</a> <a id="589" href="MJ.Semantics.Objects.html#554" class="Bound">W&#39;</a> <a id="592" href="MJ.Semantics.Objects.html#558" class="Bound">cid</a>
    <a id="ObjEncoding.getter" href="MJ.Semantics.Objects.html#ObjEncoding.getter" class="Field">getter</a> <a id="607" class="Symbol">:</a> <a id="609" class="Symbol">∀</a> <a id="611" class="Symbol">{</a><a id="612" href="MJ.Semantics.Objects.html#612" class="Bound">W</a> <a id="614" href="MJ.Semantics.Objects.html#614" class="Bound">m</a> <a id="616" href="MJ.Semantics.Objects.html#616" class="Bound">a</a><a id="617" class="Symbol">}</a> <a id="619" href="MJ.Semantics.Objects.html#619" class="Bound">c</a> <a id="621" class="Symbol">→</a> <a id="623" href="MJ.Semantics.Objects.html#ObjEncoding.Obj" class="Field">Obj</a> <a id="627" href="MJ.Semantics.Objects.html#612" class="Bound">W</a> <a id="629" href="MJ.Semantics.Objects.html#619" class="Bound">c</a> <a id="631" class="Symbol">→</a> <a id="633" href="MJ.Classtable.Membership.html#960" class="Function">IsMember</a> <a id="642" href="MJ.Semantics.Objects.html#619" class="Bound">c</a> <a id="644" href="MJ.Classtable.Core.html#657" class="InductiveConstructor">FIELD</a> <a id="650" href="MJ.Semantics.Objects.html#614" class="Bound">m</a> <a id="652" href="MJ.Semantics.Objects.html#616" class="Bound">a</a> <a id="654" class="Symbol">→</a> <a id="656" href="MJ.Semantics.Values.html#669" class="Datatype">Val</a> <a id="660" href="MJ.Semantics.Objects.html#612" class="Bound">W</a> <a id="662" href="MJ.Semantics.Objects.html#616" class="Bound">a</a>
    <a id="ObjEncoding.setter" href="MJ.Semantics.Objects.html#ObjEncoding.setter" class="Field">setter</a> <a id="675" class="Symbol">:</a> <a id="677" class="Symbol">∀</a> <a id="679" class="Symbol">{</a><a id="680" href="MJ.Semantics.Objects.html#680" class="Bound">W</a> <a id="682" href="MJ.Semantics.Objects.html#682" class="Bound">m</a> <a id="684" href="MJ.Semantics.Objects.html#684" class="Bound">a</a><a id="685" class="Symbol">}</a> <a id="687" href="MJ.Semantics.Objects.html#687" class="Bound">c</a> <a id="689" class="Symbol">→</a> <a id="691" href="MJ.Semantics.Objects.html#ObjEncoding.Obj" class="Field">Obj</a> <a id="695" href="MJ.Semantics.Objects.html#680" class="Bound">W</a> <a id="697" href="MJ.Semantics.Objects.html#687" class="Bound">c</a> <a id="699" class="Symbol">→</a> <a id="701" href="MJ.Classtable.Membership.html#960" class="Function">IsMember</a> <a id="710" href="MJ.Semantics.Objects.html#687" class="Bound">c</a> <a id="712" href="MJ.Classtable.Core.html#657" class="InductiveConstructor">FIELD</a> <a id="718" href="MJ.Semantics.Objects.html#682" class="Bound">m</a> <a id="720" href="MJ.Semantics.Objects.html#684" class="Bound">a</a> <a id="722" class="Symbol">→</a> <a id="724" href="MJ.Semantics.Values.html#669" class="Datatype">Val</a> <a id="728" href="MJ.Semantics.Objects.html#680" class="Bound">W</a> <a id="730" href="MJ.Semantics.Objects.html#684" class="Bound">a</a> <a id="732" class="Symbol">→</a> <a id="734" href="MJ.Semantics.Objects.html#ObjEncoding.Obj" class="Field">Obj</a> <a id="738" href="MJ.Semantics.Objects.html#680" class="Bound">W</a> <a id="740" href="MJ.Semantics.Objects.html#687" class="Bound">c</a>
    <a id="ObjEncoding.defaultObject" href="MJ.Semantics.Objects.html#ObjEncoding.defaultObject" class="Field">defaultObject</a> <a id="760" class="Symbol">:</a> <a id="762" class="Symbol">∀</a> <a id="764" class="Symbol">{</a><a id="765" href="MJ.Semantics.Objects.html#765" class="Bound">W</a><a id="766" class="Symbol">}</a> <a id="768" href="MJ.Semantics.Objects.html#768" class="Bound">c</a> <a id="770" class="Symbol">→</a> <a id="772" href="MJ.Semantics.Objects.html#ObjEncoding.Obj" class="Field">Obj</a> <a id="776" href="MJ.Semantics.Objects.html#765" class="Bound">W</a> <a id="778" href="MJ.Semantics.Objects.html#768" class="Bound">c</a>

  <a id="783" class="Keyword">data</a> <a id="ObjEncoding.StoreVal" href="MJ.Semantics.Objects.html#ObjEncoding.StoreVal" class="Datatype">StoreVal</a> <a id="797" class="Symbol">(</a><a id="798" href="MJ.Semantics.Objects.html#798" class="Bound">W</a> <a id="800" class="Symbol">:</a> <a id="802" href="MJ.Types.html#World" class="Function">World</a> <a id="808" href="MJ.Semantics.Objects.html#95" class="Bound">c</a><a id="809" class="Symbol">)</a> <a id="811" class="Symbol">:</a> <a id="813" href="MJ.Types.html#Ty%E2%81%BA" class="Datatype">Ty⁺</a> <a id="817" href="MJ.Semantics.Objects.html#95" class="Bound">c</a> <a id="819" class="Symbol">→</a> <a id="821" class="PrimitiveType">Set</a> <a id="825" class="Keyword">where</a>
    <a id="ObjEncoding.StoreVal.val" href="MJ.Semantics.Objects.html#ObjEncoding.StoreVal.val" class="InductiveConstructor">val</a> <a id="839" class="Symbol">:</a> <a id="841" class="Symbol">∀</a> <a id="843" class="Symbol">{</a><a id="844" href="MJ.Semantics.Objects.html#844" class="Bound">ty</a><a id="846" class="Symbol">}</a> <a id="848" class="Symbol">→</a> <a id="850" href="MJ.Semantics.Values.html#669" class="Datatype">Val</a> <a id="854" href="MJ.Semantics.Objects.html#798" class="Bound">W</a> <a id="856" href="MJ.Semantics.Objects.html#844" class="Bound">ty</a> <a id="859" class="Symbol">→</a> <a id="861" href="MJ.Semantics.Objects.html#ObjEncoding.StoreVal" class="Datatype">StoreVal</a> <a id="870" href="MJ.Semantics.Objects.html#798" class="Bound">W</a> <a id="872" class="Symbol">(</a><a id="873" href="MJ.Types.html#Ty%E2%81%BA.vty" class="InductiveConstructor">vty</a> <a id="877" href="MJ.Semantics.Objects.html#844" class="Bound">ty</a><a id="879" class="Symbol">)</a>
    <a id="ObjEncoding.StoreVal.obj" href="MJ.Semantics.Objects.html#ObjEncoding.StoreVal.obj" class="InductiveConstructor">obj</a> <a id="889" class="Symbol">:</a> <a id="891" class="Symbol">∀</a> <a id="893" href="MJ.Semantics.Objects.html#893" class="Bound">cid</a> <a id="897" class="Symbol">→</a> <a id="899" href="MJ.Semantics.Objects.html#ObjEncoding.Obj" class="Field">Obj</a> <a id="903" href="MJ.Semantics.Objects.html#798" class="Bound">W</a> <a id="905" href="MJ.Semantics.Objects.html#893" class="Bound">cid</a> <a id="909" class="Symbol">→</a> <a id="911" href="MJ.Semantics.Objects.html#ObjEncoding.StoreVal" class="Datatype">StoreVal</a> <a id="920" href="MJ.Semantics.Objects.html#798" class="Bound">W</a> <a id="922" class="Symbol">(</a><a id="923" href="MJ.Types.html#Ty%E2%81%BA.obj" class="InductiveConstructor">obj</a> <a id="927" href="MJ.Semantics.Objects.html#893" class="Bound">cid</a><a id="930" class="Symbol">)</a>

  <a id="ObjEncoding.Store" href="MJ.Semantics.Objects.html#ObjEncoding.Store" class="Function">Store</a> <a id="941" class="Symbol">:</a> <a id="943" href="MJ.Types.html#World" class="Function">World</a> <a id="949" href="MJ.Semantics.Objects.html#95" class="Bound">c</a> <a id="951" class="Symbol">→</a> <a id="953" class="PrimitiveType">Set</a>
  <a id="959" href="MJ.Semantics.Objects.html#ObjEncoding.Store" class="Function">Store</a> <a id="965" href="MJ.Semantics.Objects.html#965" class="Bound">W</a> <a id="967" class="Symbol">=</a> <a id="969" href="Data.List.All.html#All" class="Datatype">All</a> <a id="973" class="Symbol">(</a><a id="974" href="MJ.Semantics.Objects.html#ObjEncoding.StoreVal" class="Datatype">StoreVal</a> <a id="983" href="MJ.Semantics.Objects.html#965" class="Bound">W</a><a id="984" class="Symbol">)</a> <a id="986" href="MJ.Semantics.Objects.html#965" class="Bound">W</a>
</pre></body></html>