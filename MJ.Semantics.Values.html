<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>MJ.Semantics.Values</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="MJ.Types.html" class="Module">MJ.Types</a> <a id="22" class="Symbol">as</a> <a id="25" class="Module">Types</a>
<a id="31" class="Keyword">import</a> <a id="38" href="MJ.Classtable.Core.html" class="Module">MJ.Classtable.Core</a> <a id="57" class="Symbol">as</a> <a id="60" class="Module">Core</a>

<a id="66" class="Keyword">module</a> <a id="73" href="MJ.Semantics.Values.html" class="Module">MJ.Semantics.Values</a> <a id="93" class="Symbol">{</a><a id="94" href="MJ.Semantics.Values.html#94" class="Bound">c</a><a id="95" class="Symbol">}(</a><a id="97" href="MJ.Semantics.Values.html#97" class="Bound">Ct</a> <a id="100" class="Symbol">:</a> <a id="102" href="MJ.Classtable.Core.html#Classtable" class="Record">Core.Classtable</a> <a id="118" href="MJ.Semantics.Values.html#94" class="Bound">c</a><a id="119" class="Symbol">)</a> <a id="121" class="Keyword">where</a>

<a id="128" class="Keyword">open</a> <a id="133" class="Keyword">import</a> <a id="140" href="Prelude.html" class="Module">Prelude</a>

<a id="149" class="Keyword">open</a> <a id="154" class="Keyword">import</a> <a id="161" href="Level.html" class="Module">Level</a> <a id="167" class="Keyword">renaming</a> <a id="176" class="Symbol">(</a><a id="177" href="Agda.Primitive.html#lsuc" class="Primitive">suc</a> <a id="181" class="Symbol">to</a> <a id="184" href="Agda.Primitive.html#lsuc" class="Primitive">lsuc</a><a id="188" class="Symbol">;</a> <a id="190" href="Agda.Primitive.html#lzero" class="Primitive">zero</a> <a id="195" class="Symbol">to</a> <a id="198" href="Agda.Primitive.html#lzero" class="Primitive">lzero</a><a id="203" class="Symbol">)</a>
<a id="205" class="Keyword">open</a> <a id="210" class="Keyword">import</a> <a id="217" href="Data.List.html" class="Module">Data.List</a> <a id="227" class="Symbol">as</a> <a id="230" class="Module">List</a> <a id="235" class="Keyword">hiding</a> <a id="242" class="Symbol">(</a><a id="243" href="Data.List.Base.html#null" class="Function">null</a><a id="247" class="Symbol">)</a>
<a id="249" class="Keyword">open</a> <a id="254" class="Keyword">import</a> <a id="261" href="Data.Vec.html" class="Module">Data.Vec</a> <a id="270" class="Keyword">hiding</a> <a id="277" class="Symbol">(</a><a id="278" href="Data.Vec.html#_%E2%88%88_" class="Datatype Operator">_∈_</a><a id="281" class="Symbol">)</a>
<a id="283" class="Keyword">open</a> <a id="288" class="Keyword">import</a> <a id="295" href="Data.List.Any.Membership.Propositional.html" class="Module">Data.List.Any.Membership.Propositional</a>
<a id="334" class="Keyword">open</a> <a id="339" class="Keyword">import</a> <a id="346" href="Data.List.All.html" class="Module">Data.List.All</a> <a id="360" class="Symbol">as</a> <a id="363" class="Module">List∀</a>
<a id="369" class="Keyword">open</a> <a id="374" class="Keyword">import</a> <a id="381" href="Data.List.All.Properties.Extra.html" class="Module">Data.List.All.Properties.Extra</a> <a id="412" class="Symbol">as</a> <a id="415" class="Module">List∀++</a>
<a id="423" class="Keyword">open</a> <a id="428" class="Keyword">import</a> <a id="435" href="Data.List.Prefix.html" class="Module">Data.List.Prefix</a>
<a id="452" class="Keyword">open</a> <a id="457" class="Keyword">import</a> <a id="464" href="Data.Vec.All.html" class="Module">Data.Vec.All</a> <a id="477" class="Symbol">as</a> <a id="480" class="Module">Vec∀</a> <a id="485" class="Keyword">using</a> <a id="491" class="Symbol">()</a>


<a id="496" class="Keyword">open</a> <a id="501" href="MJ.Classtable.Core.html" class="Module">Core</a> <a id="506" href="MJ.Semantics.Values.html#94" class="Bound">c</a>
<a id="508" class="Keyword">open</a> <a id="513" href="MJ.Classtable.Core.html#Classtable" class="Module">Classtable</a> <a id="524" href="MJ.Semantics.Values.html#97" class="Bound">Ct</a>
<a id="527" class="Keyword">open</a> <a id="532" class="Keyword">import</a> <a id="539" href="MJ.Classtable.Membership.html" class="Module">MJ.Classtable.Membership</a> <a id="564" href="MJ.Semantics.Values.html#97" class="Bound">Ct</a>
<a id="567" class="Keyword">open</a> <a id="572" class="Keyword">import</a> <a id="579" href="MJ.LexicalScope.html" class="Module">MJ.LexicalScope</a> <a id="595" href="MJ.Semantics.Values.html#97" class="Bound">Ct</a>
<a id="598" class="Keyword">open</a> <a id="603" class="Keyword">import</a> <a id="610" href="Common.Weakening.html" class="Module">Common.Weakening</a>

<a id="628" class="Comment">{-
MJ inherits the values of STLC+Ref. In contrast to STCL+Ref, MJ also has
null-pointers; which we add as a constructor to our value type Val. The value
constructed by null is typed with an arbitrary reference type as it can be used
in place of any proper reference.
-}</a>
<a id="899" class="Keyword">data</a> <a id="Val" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="908" class="Symbol">(</a><a id="909" href="MJ.Semantics.Values.html#909" class="Bound">W</a> <a id="911" class="Symbol">:</a> <a id="913" href="MJ.Types.html#World" class="Function">World</a> <a id="919" href="MJ.Semantics.Values.html#94" class="Bound">c</a><a id="920" class="Symbol">)</a> <a id="922" class="Symbol">:</a> <a id="924" href="MJ.Types.html#Ty" class="Datatype">Ty</a> <a id="927" href="MJ.Semantics.Values.html#94" class="Bound">c</a> <a id="929" class="Symbol">→</a> <a id="931" class="PrimitiveType">Set</a> <a id="935" class="Keyword">where</a>
  <a id="Val.num" href="MJ.Semantics.Values.html#Val.num" class="InductiveConstructor">num</a>  <a id="948" class="Symbol">:</a> <a id="950" href="Agda.Builtin.Nat.html#%E2%84%95" class="Datatype">ℕ</a> <a id="952" class="Symbol">→</a> <a id="954" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="958" href="MJ.Semantics.Values.html#909" class="Bound">W</a> <a id="960" href="MJ.Types.html#Ty.int" class="InductiveConstructor">int</a>
  <a id="Val.unit" href="MJ.Semantics.Values.html#Val.unit" class="InductiveConstructor">unit</a> <a id="971" class="Symbol">:</a> <a id="973" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="977" href="MJ.Semantics.Values.html#909" class="Bound">W</a> <a id="979" href="MJ.Types.html#Ty.void" class="InductiveConstructor">void</a>
  <a id="Val.null" href="MJ.Semantics.Values.html#Val.null" class="InductiveConstructor">null</a> <a id="991" class="Symbol">:</a> <a id="993" class="Symbol">∀</a> <a id="995" class="Symbol">{</a><a id="996" href="MJ.Semantics.Values.html#996" class="Bound">C</a><a id="997" class="Symbol">}</a> <a id="999" class="Symbol">→</a> <a id="1001" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="1005" href="MJ.Semantics.Values.html#909" class="Bound">W</a> <a id="1007" class="Symbol">(</a><a id="1008" href="MJ.Types.html#Ty.ref" class="InductiveConstructor">ref</a> <a id="1012" href="MJ.Semantics.Values.html#996" class="Bound">C</a><a id="1013" class="Symbol">)</a>
  <a id="Val.ref" href="MJ.Semantics.Values.html#Val.ref" class="InductiveConstructor">ref</a>  <a id="1022" class="Symbol">:</a> <a id="1024" class="Symbol">∀</a> <a id="1026" class="Symbol">{</a><a id="1027" href="MJ.Semantics.Values.html#1027" class="Bound">C</a> <a id="1029" href="MJ.Semantics.Values.html#1029" class="Bound">P</a><a id="1030" class="Symbol">}</a> <a id="1032" class="Symbol">→</a> <a id="1034" class="Symbol">(</a><a id="1035" href="MJ.Types.html#Ty%E2%81%BA.obj" class="InductiveConstructor">obj</a> <a id="1039" href="MJ.Semantics.Values.html#1027" class="Bound">C</a><a id="1040" class="Symbol">)</a> <a id="1042" href="Data.List.Any.Membership.html#Propositional.M._%E2%88%88_" class="Function Operator">∈</a> <a id="1044" href="MJ.Semantics.Values.html#909" class="Bound">W</a> <a id="1046" class="Symbol">→</a> <a id="1048" href="MJ.Classtable.Core.html#2464" class="Field">Σ</a> <a id="1050" href="MJ.Classtable.Core.html#2074" class="Function Operator">⊢</a> <a id="1052" href="MJ.Semantics.Values.html#1027" class="Bound">C</a> <a id="1054" href="MJ.Classtable.Core.html#2074" class="Function Operator">&lt;:</a> <a id="1057" href="MJ.Semantics.Values.html#1029" class="Bound">P</a> <a id="1059" class="Symbol">→</a> <a id="1061" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="1065" href="MJ.Semantics.Values.html#909" class="Bound">W</a> <a id="1067" class="Symbol">(</a><a id="1068" href="MJ.Types.html#Ty.ref" class="InductiveConstructor">ref</a> <a id="1072" href="MJ.Semantics.Values.html#1029" class="Bound">P</a><a id="1073" class="Symbol">)</a>

<a id="1076" class="Comment">{-
We can construct default values out of thin air for every type
-}</a>
<a id="default" href="MJ.Semantics.Values.html#default" class="Function">default</a> <a id="1153" class="Symbol">:</a> <a id="1155" class="Symbol">∀</a> <a id="1157" class="Symbol">{</a><a id="1158" href="MJ.Semantics.Values.html#1158" class="Bound">W</a><a id="1159" class="Symbol">}</a> <a id="1161" class="Symbol">→</a> <a id="1163" class="Symbol">(</a><a id="1164" href="MJ.Semantics.Values.html#1164" class="Bound">a</a> <a id="1166" class="Symbol">:</a> <a id="1168" href="MJ.Types.html#Ty" class="Datatype">Ty</a> <a id="1171" href="MJ.Semantics.Values.html#94" class="Bound">c</a><a id="1172" class="Symbol">)</a> <a id="1174" class="Symbol">→</a> <a id="1176" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="1180" href="MJ.Semantics.Values.html#1158" class="Bound">W</a> <a id="1182" href="MJ.Semantics.Values.html#1164" class="Bound">a</a>
<a id="1184" href="MJ.Semantics.Values.html#default" class="Function">default</a> <a id="1192" href="MJ.Types.html#Ty.void" class="InductiveConstructor">void</a> <a id="1197" class="Symbol">=</a> <a id="1199" href="MJ.Semantics.Values.html#Val.unit" class="InductiveConstructor">unit</a>
<a id="1204" href="MJ.Semantics.Values.html#default" class="Function">default</a> <a id="1212" href="MJ.Types.html#Ty.int" class="InductiveConstructor">int</a> <a id="1216" class="Symbol">=</a> <a id="1218" href="MJ.Semantics.Values.html#Val.num" class="InductiveConstructor">num</a> <a id="1222" class="Number">0</a>
<a id="1224" href="MJ.Semantics.Values.html#default" class="Function">default</a> <a id="1232" class="Symbol">(</a><a id="1233" href="MJ.Types.html#Ty.ref" class="InductiveConstructor">ref</a> <a id="1237" href="MJ.Semantics.Values.html#1237" class="Bound">x</a><a id="1238" class="Symbol">)</a> <a id="1240" class="Symbol">=</a> <a id="1242" href="MJ.Semantics.Values.html#Val.null" class="InductiveConstructor">null</a>

<a id="1248" class="Comment">{-
We equip MJ with mutable lexical environments.
We could choose to model this directly, moving the environment from
the Reader part of the evaluation monad to the State part.

Instead we choose to keep our environments immutable and model
mutability of the values in it by an indirection via the mutable store.
This greatly simplifies the treatment of environments in the interpreter
and keeps the representation lightweight, even though we support block scopes.
-}</a>
<a id="Env" href="MJ.Semantics.Values.html#Env" class="Function">Env</a> <a id="1720" class="Symbol">:</a> <a id="1722" class="Symbol">∀</a> <a id="1724" class="Symbol">(</a><a id="1725" href="MJ.Semantics.Values.html#1725" class="Bound">Γ</a> <a id="1727" class="Symbol">:</a> <a id="1729" href="MJ.LexicalScope.html#226" class="Function">Ctx</a><a id="1732" class="Symbol">)(</a><a id="1734" href="MJ.Semantics.Values.html#1734" class="Bound">W</a> <a id="1736" class="Symbol">:</a> <a id="1738" href="MJ.Types.html#World" class="Function">World</a> <a id="1744" href="MJ.Semantics.Values.html#94" class="Bound">c</a><a id="1745" class="Symbol">)</a> <a id="1747" class="Symbol">→</a> <a id="1749" class="PrimitiveType">Set</a>
<a id="1753" href="MJ.Semantics.Values.html#Env" class="Function">Env</a> <a id="1757" href="MJ.Semantics.Values.html#1757" class="Bound">Γ</a> <a id="1759" href="MJ.Semantics.Values.html#1759" class="Bound">W</a> <a id="1761" class="Symbol">=</a> <a id="1763" href="Data.List.All.html#All" class="Datatype">All</a> <a id="1767" class="Symbol">(λ</a> <a id="1770" href="MJ.Semantics.Values.html#1770" class="Bound">a</a> <a id="1772" class="Symbol">→</a> <a id="1774" href="MJ.Types.html#Ty%E2%81%BA.vty" class="InductiveConstructor">vty</a> <a id="1778" href="MJ.Semantics.Values.html#1770" class="Bound">a</a> <a id="1780" href="Data.List.Any.Membership.html#Propositional.M._%E2%88%88_" class="Function Operator">∈</a> <a id="1782" href="MJ.Semantics.Values.html#1759" class="Bound">W</a><a id="1783" class="Symbol">)</a> <a id="1785" href="MJ.Semantics.Values.html#1757" class="Bound">Γ</a>

<a id="_⊕_" href="MJ.Semantics.Values.html#_%E2%8A%95_" class="Function Operator">_⊕_</a> <a id="1792" class="Symbol">:</a> <a id="1794" class="Symbol">∀</a> <a id="1796" class="Symbol">{</a><a id="1797" href="MJ.Semantics.Values.html#1797" class="Bound">Γ</a> <a id="1799" href="MJ.Semantics.Values.html#1799" class="Bound">W</a> <a id="1801" href="MJ.Semantics.Values.html#1801" class="Bound">a</a><a id="1802" class="Symbol">}</a> <a id="1804" class="Symbol">→</a> <a id="1806" href="MJ.Semantics.Values.html#Env" class="Function">Env</a> <a id="1810" href="MJ.Semantics.Values.html#1797" class="Bound">Γ</a> <a id="1812" href="MJ.Semantics.Values.html#1799" class="Bound">W</a> <a id="1814" class="Symbol">→</a> <a id="1816" class="Symbol">(</a><a id="1817" href="MJ.Types.html#Ty%E2%81%BA.vty" class="InductiveConstructor">vty</a> <a id="1821" href="MJ.Semantics.Values.html#1801" class="Bound">a</a><a id="1822" class="Symbol">)</a> <a id="1824" href="Data.List.Any.Membership.html#Propositional.M._%E2%88%88_" class="Function Operator">∈</a> <a id="1826" href="MJ.Semantics.Values.html#1799" class="Bound">W</a> <a id="1828" class="Symbol">→</a> <a id="1830" href="MJ.Semantics.Values.html#Env" class="Function">Env</a> <a id="1834" class="Symbol">(</a><a id="1835" href="MJ.Semantics.Values.html#1797" class="Bound">Γ</a> <a id="1837" href="MJ.LexicalScope.html#295" class="Function Operator">+local</a> <a id="1844" href="MJ.Semantics.Values.html#1801" class="Bound">a</a><a id="1845" class="Symbol">)</a> <a id="1847" href="MJ.Semantics.Values.html#1799" class="Bound">W</a>
<a id="1849" href="MJ.Semantics.Values.html#_%E2%8A%95_" class="Function Operator">_⊕_</a> <a id="1853" href="MJ.Semantics.Values.html#1853" class="Bound">E</a> <a id="1855" href="MJ.Semantics.Values.html#1855" class="Bound">v</a> <a id="1857" class="Symbol">=</a> <a id="1859" href="MJ.Semantics.Values.html#1855" class="Bound">v</a> <a id="1861" href="Data.List.All.html#All._%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="1863" href="MJ.Semantics.Values.html#1853" class="Bound">E</a>

<a id="1866" class="Keyword">open</a> <a id="1871" class="Keyword">import</a> <a id="1878" href="Data.List.Any.html" class="Module">Data.List.Any</a>
<a id="getvar" href="MJ.Semantics.Values.html#getvar" class="Function">getvar</a> <a id="1899" class="Symbol">:</a> <a id="1901" class="Symbol">∀</a> <a id="1903" class="Symbol">{</a><a id="1904" href="MJ.Semantics.Values.html#1904" class="Bound">Γ</a> <a id="1906" href="MJ.Semantics.Values.html#1906" class="Bound">W</a> <a id="1908" href="MJ.Semantics.Values.html#1908" class="Bound">a</a><a id="1909" class="Symbol">}</a> <a id="1911" class="Symbol">→</a> <a id="1913" href="MJ.LexicalScope.html#255" class="Function">Var</a> <a id="1917" href="MJ.Semantics.Values.html#1904" class="Bound">Γ</a> <a id="1919" href="MJ.Semantics.Values.html#1908" class="Bound">a</a> <a id="1921" class="Symbol">→</a> <a id="1923" href="MJ.Semantics.Values.html#Env" class="Function">Env</a> <a id="1927" href="MJ.Semantics.Values.html#1904" class="Bound">Γ</a> <a id="1929" href="MJ.Semantics.Values.html#1906" class="Bound">W</a> <a id="1931" class="Symbol">→</a> <a id="1933" href="MJ.Types.html#Ty%E2%81%BA.vty" class="InductiveConstructor">vty</a> <a id="1937" href="MJ.Semantics.Values.html#1908" class="Bound">a</a> <a id="1939" href="Data.List.Any.Membership.html#Propositional.M._%E2%88%88_" class="Function Operator">∈</a> <a id="1941" href="MJ.Semantics.Values.html#1906" class="Bound">W</a>
<a id="1943" href="MJ.Semantics.Values.html#getvar" class="Function">getvar</a> <a id="1950" href="MJ.Semantics.Values.html#1950" class="Bound">px</a> <a id="1953" href="MJ.Semantics.Values.html#1953" class="Bound">E</a> <a id="1955" class="Symbol">=</a> <a id="1957" href="Data.List.All.Properties.Extra.html#%E2%88%88-all" class="Function">∈-all</a> <a id="1963" href="MJ.Semantics.Values.html#1950" class="Bound">px</a> <a id="1966" href="MJ.Semantics.Values.html#1953" class="Bound">E</a>

<a id="1969" class="Comment">{-
Abstract interface for object encodings.
-}</a>
<a id="2016" class="Keyword">record</a> <a id="ObjEncoding" href="MJ.Semantics.Values.html#ObjEncoding" class="Record">ObjEncoding</a> <a id="2035" class="Symbol">:</a> <a id="2037" class="PrimitiveType">Set</a> <a id="2041" class="Symbol">(</a><a id="2042" href="Agda.Primitive.html#lsuc" class="Primitive">lsuc</a> <a id="2047" href="Agda.Primitive.html#lzero" class="Primitive">lzero</a><a id="2052" class="Symbol">)</a> <a id="2054" class="Keyword">where</a>
  <a id="2062" class="Keyword">field</a>
    <a id="ObjEncoding.Obj" href="MJ.Semantics.Values.html#ObjEncoding.Obj" class="Field">Obj</a> <a id="2076" class="Symbol">:</a> <a id="2078" href="MJ.Types.html#World" class="Function">World</a> <a id="2084" href="MJ.Semantics.Values.html#94" class="Bound">c</a> <a id="2086" class="Symbol">→</a> <a id="2088" href="MJ.Types.html#Cid" class="Datatype">Cid</a> <a id="2092" href="MJ.Semantics.Values.html#94" class="Bound">c</a> <a id="2094" class="Symbol">→</a> <a id="2096" class="PrimitiveType">Set</a>
    <a id="ObjEncoding.weaken-obj" href="MJ.Semantics.Values.html#ObjEncoding.weaken-obj" class="Field">weaken-obj</a> <a id="2115" class="Symbol">:</a> <a id="2117" class="Symbol">∀</a> <a id="2119" class="Symbol">{</a><a id="2120" href="MJ.Semantics.Values.html#2120" class="Bound">W</a> <a id="2122" href="MJ.Semantics.Values.html#2122" class="Bound">W&#39;</a><a id="2124" class="Symbol">}</a> <a id="2126" href="MJ.Semantics.Values.html#2126" class="Bound">cid</a> <a id="2130" class="Symbol">→</a> <a id="2132" href="MJ.Semantics.Values.html#2122" class="Bound">W&#39;</a> <a id="2135" href="Data.List.Prefix.html#_%E2%8A%92_" class="Function Operator">⊒</a> <a id="2137" href="MJ.Semantics.Values.html#2120" class="Bound">W</a> <a id="2139" class="Symbol">→</a> <a id="2141" href="MJ.Semantics.Values.html#ObjEncoding.Obj" class="Field">Obj</a> <a id="2145" href="MJ.Semantics.Values.html#2120" class="Bound">W</a> <a id="2147" href="MJ.Semantics.Values.html#2126" class="Bound">cid</a> <a id="2151" class="Symbol">→</a> <a id="2153" href="MJ.Semantics.Values.html#ObjEncoding.Obj" class="Field">Obj</a> <a id="2157" href="MJ.Semantics.Values.html#2122" class="Bound">W&#39;</a> <a id="2160" href="MJ.Semantics.Values.html#2126" class="Bound">cid</a>
    <a id="ObjEncoding.getter" href="MJ.Semantics.Values.html#ObjEncoding.getter" class="Field">getter</a> <a id="2175" class="Symbol">:</a> <a id="2177" class="Symbol">∀</a> <a id="2179" class="Symbol">{</a><a id="2180" href="MJ.Semantics.Values.html#2180" class="Bound">W</a> <a id="2182" href="MJ.Semantics.Values.html#2182" class="Bound">m</a> <a id="2184" href="MJ.Semantics.Values.html#2184" class="Bound">a</a><a id="2185" class="Symbol">}</a> <a id="2187" href="MJ.Semantics.Values.html#2187" class="Bound">c</a> <a id="2189" class="Symbol">→</a> <a id="2191" href="MJ.Semantics.Values.html#ObjEncoding.Obj" class="Field">Obj</a> <a id="2195" href="MJ.Semantics.Values.html#2180" class="Bound">W</a> <a id="2197" href="MJ.Semantics.Values.html#2187" class="Bound">c</a> <a id="2199" class="Symbol">→</a> <a id="2201" href="MJ.Classtable.Membership.html#960" class="Function">IsMember</a> <a id="2210" href="MJ.Semantics.Values.html#2187" class="Bound">c</a> <a id="2212" href="MJ.Classtable.Core.html#657" class="InductiveConstructor">FIELD</a> <a id="2218" href="MJ.Semantics.Values.html#2182" class="Bound">m</a> <a id="2220" href="MJ.Semantics.Values.html#2184" class="Bound">a</a> <a id="2222" class="Symbol">→</a> <a id="2224" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="2228" href="MJ.Semantics.Values.html#2180" class="Bound">W</a> <a id="2230" href="MJ.Semantics.Values.html#2184" class="Bound">a</a>
    <a id="ObjEncoding.setter" href="MJ.Semantics.Values.html#ObjEncoding.setter" class="Field">setter</a> <a id="2243" class="Symbol">:</a> <a id="2245" class="Symbol">∀</a> <a id="2247" class="Symbol">{</a><a id="2248" href="MJ.Semantics.Values.html#2248" class="Bound">W</a> <a id="2250" href="MJ.Semantics.Values.html#2250" class="Bound">m</a> <a id="2252" href="MJ.Semantics.Values.html#2252" class="Bound">a</a><a id="2253" class="Symbol">}</a> <a id="2255" href="MJ.Semantics.Values.html#2255" class="Bound">c</a> <a id="2257" class="Symbol">→</a> <a id="2259" href="MJ.Semantics.Values.html#ObjEncoding.Obj" class="Field">Obj</a> <a id="2263" href="MJ.Semantics.Values.html#2248" class="Bound">W</a> <a id="2265" href="MJ.Semantics.Values.html#2255" class="Bound">c</a> <a id="2267" class="Symbol">→</a> <a id="2269" href="MJ.Classtable.Membership.html#960" class="Function">IsMember</a> <a id="2278" href="MJ.Semantics.Values.html#2255" class="Bound">c</a> <a id="2280" href="MJ.Classtable.Core.html#657" class="InductiveConstructor">FIELD</a> <a id="2286" href="MJ.Semantics.Values.html#2250" class="Bound">m</a> <a id="2288" href="MJ.Semantics.Values.html#2252" class="Bound">a</a> <a id="2290" class="Symbol">→</a> <a id="2292" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="2296" href="MJ.Semantics.Values.html#2248" class="Bound">W</a> <a id="2298" href="MJ.Semantics.Values.html#2252" class="Bound">a</a> <a id="2300" class="Symbol">→</a> <a id="2302" href="MJ.Semantics.Values.html#ObjEncoding.Obj" class="Field">Obj</a> <a id="2306" href="MJ.Semantics.Values.html#2248" class="Bound">W</a> <a id="2308" href="MJ.Semantics.Values.html#2255" class="Bound">c</a>
    <a id="ObjEncoding.defaultObject" href="MJ.Semantics.Values.html#ObjEncoding.defaultObject" class="Field">defaultObject</a> <a id="2328" class="Symbol">:</a> <a id="2330" class="Symbol">∀</a> <a id="2332" class="Symbol">{</a><a id="2333" href="MJ.Semantics.Values.html#2333" class="Bound">W</a><a id="2334" class="Symbol">}</a> <a id="2336" href="MJ.Semantics.Values.html#2336" class="Bound">c</a> <a id="2338" class="Symbol">→</a> <a id="2340" href="MJ.Semantics.Values.html#ObjEncoding.Obj" class="Field">Obj</a> <a id="2344" href="MJ.Semantics.Values.html#2333" class="Bound">W</a> <a id="2346" href="MJ.Semantics.Values.html#2336" class="Bound">c</a>

  <a id="2351" class="Keyword">data</a> <a id="ObjEncoding.StoreVal" href="MJ.Semantics.Values.html#ObjEncoding.StoreVal" class="Datatype">StoreVal</a> <a id="2365" class="Symbol">(</a><a id="2366" href="MJ.Semantics.Values.html#2366" class="Bound">W</a> <a id="2368" class="Symbol">:</a> <a id="2370" href="MJ.Types.html#World" class="Function">World</a> <a id="2376" href="MJ.Semantics.Values.html#94" class="Bound">c</a><a id="2377" class="Symbol">)</a> <a id="2379" class="Symbol">:</a> <a id="2381" href="MJ.Types.html#Ty%E2%81%BA" class="Datatype">Ty⁺</a> <a id="2385" href="MJ.Semantics.Values.html#94" class="Bound">c</a> <a id="2387" class="Symbol">→</a> <a id="2389" class="PrimitiveType">Set</a> <a id="2393" class="Keyword">where</a>
    <a id="ObjEncoding.StoreVal.val" href="MJ.Semantics.Values.html#ObjEncoding.StoreVal.val" class="InductiveConstructor">val</a> <a id="2407" class="Symbol">:</a> <a id="2409" class="Symbol">∀</a> <a id="2411" class="Symbol">{</a><a id="2412" href="MJ.Semantics.Values.html#2412" class="Bound">ty</a><a id="2414" class="Symbol">}</a> <a id="2416" class="Symbol">→</a> <a id="2418" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="2422" href="MJ.Semantics.Values.html#2366" class="Bound">W</a> <a id="2424" href="MJ.Semantics.Values.html#2412" class="Bound">ty</a> <a id="2427" class="Symbol">→</a> <a id="2429" href="MJ.Semantics.Values.html#ObjEncoding.StoreVal" class="Datatype">StoreVal</a> <a id="2438" href="MJ.Semantics.Values.html#2366" class="Bound">W</a> <a id="2440" class="Symbol">(</a><a id="2441" href="MJ.Types.html#Ty%E2%81%BA.vty" class="InductiveConstructor">vty</a> <a id="2445" href="MJ.Semantics.Values.html#2412" class="Bound">ty</a><a id="2447" class="Symbol">)</a>
    <a id="ObjEncoding.StoreVal.obj" href="MJ.Semantics.Values.html#ObjEncoding.StoreVal.obj" class="InductiveConstructor">obj</a> <a id="2457" class="Symbol">:</a> <a id="2459" class="Symbol">∀</a> <a id="2461" href="MJ.Semantics.Values.html#2461" class="Bound">cid</a> <a id="2465" class="Symbol">→</a> <a id="2467" href="MJ.Semantics.Values.html#ObjEncoding.Obj" class="Field">Obj</a> <a id="2471" href="MJ.Semantics.Values.html#2366" class="Bound">W</a> <a id="2473" href="MJ.Semantics.Values.html#2461" class="Bound">cid</a> <a id="2477" class="Symbol">→</a> <a id="2479" href="MJ.Semantics.Values.html#ObjEncoding.StoreVal" class="Datatype">StoreVal</a> <a id="2488" href="MJ.Semantics.Values.html#2366" class="Bound">W</a> <a id="2490" class="Symbol">(</a><a id="2491" href="MJ.Types.html#Ty%E2%81%BA.obj" class="InductiveConstructor">obj</a> <a id="2495" href="MJ.Semantics.Values.html#2461" class="Bound">cid</a><a id="2498" class="Symbol">)</a>

  <a id="ObjEncoding.Store" href="MJ.Semantics.Values.html#ObjEncoding.Store" class="Function">Store</a> <a id="2509" class="Symbol">:</a> <a id="2511" href="MJ.Types.html#World" class="Function">World</a> <a id="2517" href="MJ.Semantics.Values.html#94" class="Bound">c</a> <a id="2519" class="Symbol">→</a> <a id="2521" class="PrimitiveType">Set</a>
  <a id="2527" href="MJ.Semantics.Values.html#ObjEncoding.Store" class="Function">Store</a> <a id="2533" href="MJ.Semantics.Values.html#2533" class="Bound">W</a> <a id="2535" class="Symbol">=</a> <a id="2537" href="Data.List.All.html#All" class="Datatype">All</a> <a id="2541" class="Symbol">(</a><a id="2542" href="MJ.Semantics.Values.html#ObjEncoding.StoreVal" class="Datatype">StoreVal</a> <a id="2551" href="MJ.Semantics.Values.html#2533" class="Bound">W</a><a id="2552" class="Symbol">)</a> <a id="2554" href="MJ.Semantics.Values.html#2533" class="Bound">W</a>

<a id="2557" class="Comment">{-
Value weakening
-}</a>
<a id="weaken-val" href="MJ.Semantics.Values.html#weaken-val" class="Function">weaken-val</a> <a id="2590" class="Symbol">:</a> <a id="2592" class="Symbol">∀</a> <a id="2594" class="Symbol">{</a><a id="2595" href="MJ.Semantics.Values.html#2595" class="Bound">a</a><a id="2596" class="Symbol">}{</a><a id="2598" href="MJ.Semantics.Values.html#2598" class="Bound">W</a> <a id="2600" href="MJ.Semantics.Values.html#2600" class="Bound">W&#39;</a> <a id="2603" class="Symbol">:</a> <a id="2605" href="MJ.Types.html#World" class="Function">World</a> <a id="2611" href="MJ.Semantics.Values.html#94" class="Bound">c</a><a id="2612" class="Symbol">}</a> <a id="2614" class="Symbol">→</a> <a id="2616" href="MJ.Semantics.Values.html#2598" class="Bound">W</a> <a id="2618" href="Data.List.Prefix.html#_%E2%8A%92_" class="Function Operator">⊒</a> <a id="2620" href="MJ.Semantics.Values.html#2600" class="Bound">W&#39;</a> <a id="2623" class="Symbol">→</a> <a id="2625" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="2629" href="MJ.Semantics.Values.html#2600" class="Bound">W&#39;</a> <a id="2632" href="MJ.Semantics.Values.html#2595" class="Bound">a</a> <a id="2634" class="Symbol">→</a> <a id="2636" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="2640" href="MJ.Semantics.Values.html#2598" class="Bound">W</a> <a id="2642" href="MJ.Semantics.Values.html#2595" class="Bound">a</a>
<a id="2644" href="MJ.Semantics.Values.html#weaken-val" class="Function">weaken-val</a> <a id="2655" href="MJ.Semantics.Values.html#2655" class="Bound">ext</a> <a id="2659" class="Symbol">(</a><a id="2660" href="MJ.Semantics.Values.html#Val.num" class="InductiveConstructor">num</a> <a id="2664" href="MJ.Semantics.Values.html#2664" class="Bound">n</a><a id="2665" class="Symbol">)</a> <a id="2667" class="Symbol">=</a> <a id="2669" href="MJ.Semantics.Values.html#Val.num" class="InductiveConstructor">num</a> <a id="2673" href="MJ.Semantics.Values.html#2664" class="Bound">n</a>
<a id="2675" href="MJ.Semantics.Values.html#weaken-val" class="Function">weaken-val</a> <a id="2686" href="MJ.Semantics.Values.html#2686" class="Bound">ext</a> <a id="2690" href="MJ.Semantics.Values.html#Val.unit" class="InductiveConstructor">unit</a> <a id="2695" class="Symbol">=</a> <a id="2697" href="MJ.Semantics.Values.html#Val.unit" class="InductiveConstructor">unit</a>
<a id="2702" href="MJ.Semantics.Values.html#weaken-val" class="Function">weaken-val</a> <a id="2713" href="MJ.Semantics.Values.html#2713" class="Bound">ext</a> <a id="2717" href="MJ.Semantics.Values.html#Val.null" class="InductiveConstructor">null</a> <a id="2722" class="Symbol">=</a> <a id="2724" href="MJ.Semantics.Values.html#Val.null" class="InductiveConstructor">null</a>
<a id="2729" href="MJ.Semantics.Values.html#weaken-val" class="Function">weaken-val</a> <a id="2740" href="MJ.Semantics.Values.html#2740" class="Bound">ext</a> <a id="2744" class="Symbol">(</a><a id="2745" href="MJ.Semantics.Values.html#Val.ref" class="InductiveConstructor">ref</a> <a id="2749" href="MJ.Semantics.Values.html#2749" class="Bound">x</a> <a id="2751" href="MJ.Semantics.Values.html#2751" class="Bound">sub</a><a id="2754" class="Symbol">)</a> <a id="2756" class="Symbol">=</a> <a id="2758" href="MJ.Semantics.Values.html#Val.ref" class="InductiveConstructor">ref</a> <a id="2762" class="Symbol">(</a><a id="2763" href="Data.List.Prefix.html#%E2%88%88-%E2%8A%92" class="Function">∈-⊒</a> <a id="2767" href="MJ.Semantics.Values.html#2749" class="Bound">x</a> <a id="2769" href="MJ.Semantics.Values.html#2740" class="Bound">ext</a><a id="2772" class="Symbol">)</a> <a id="2774" href="MJ.Semantics.Values.html#2751" class="Bound">sub</a>

<a id="2779" class="Keyword">instance</a>
  <a id="val-weakenable" href="MJ.Semantics.Values.html#val-weakenable" class="Function">val-weakenable</a> <a id="2805" class="Symbol">:</a> <a id="2807" class="Symbol">∀</a> <a id="2809" class="Symbol">{</a><a id="2810" href="MJ.Semantics.Values.html#2810" class="Bound">a</a><a id="2811" class="Symbol">}</a> <a id="2813" class="Symbol">→</a> <a id="2815" href="Common.Weakening.html#Weakenable" class="Record">Weakenable</a> <a id="2826" class="Symbol">(λ</a> <a id="2829" href="MJ.Semantics.Values.html#2829" class="Bound">W</a> <a id="2831" class="Symbol">→</a> <a id="2833" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="2837" href="MJ.Semantics.Values.html#2829" class="Bound">W</a> <a id="2839" href="MJ.Semantics.Values.html#2810" class="Bound">a</a><a id="2840" class="Symbol">)</a>
  <a id="2844" href="MJ.Semantics.Values.html#val-weakenable" class="Function">val-weakenable</a> <a id="2859" class="Symbol">=</a> <a id="2861" class="Keyword">record</a> <a id="2868" class="Symbol">{</a> <a id="2870" class="Field">wk</a> <a id="2873" class="Symbol">=</a> <a id="2875" href="MJ.Semantics.Values.html#weaken-val" class="Function">weaken-val</a> <a id="2886" class="Symbol">}</a>

  <a id="list-weakenable" href="MJ.Semantics.Values.html#list-weakenable" class="Function">list-weakenable</a> <a id="2907" class="Symbol">:</a> <a id="2909" class="Symbol">∀</a> <a id="2911" class="Symbol">{</a><a id="2912" href="MJ.Semantics.Values.html#2912" class="Bound">a</a><a id="2913" class="Symbol">}{</a><a id="2915" href="MJ.Semantics.Values.html#2915" class="Bound">A</a> <a id="2917" class="Symbol">:</a> <a id="2919" href="MJ.Types.html#World" class="Function">World</a> <a id="2925" href="MJ.Semantics.Values.html#94" class="Bound">c</a> <a id="2927" class="Symbol">→</a> <a id="2929" class="PrimitiveType">Set</a> <a id="2933" href="MJ.Semantics.Values.html#2912" class="Bound">a</a><a id="2934" class="Symbol">}⦃</a> <a id="2937" href="MJ.Semantics.Values.html#2937" class="Bound">wₐ</a> <a id="2940" class="Symbol">:</a> <a id="2942" href="Common.Weakening.html#Weakenable" class="Record">Weakenable</a> <a id="2953" href="MJ.Semantics.Values.html#2915" class="Bound">A</a> <a id="2955" class="Symbol">⦄</a> <a id="2957" class="Symbol">→</a> <a id="2959" href="Common.Weakening.html#Weakenable" class="Record">Weakenable</a> <a id="2970" class="Symbol">(λ</a> <a id="2973" href="MJ.Semantics.Values.html#2973" class="Bound">W</a> <a id="2975" class="Symbol">→</a> <a id="2977" href="Agda.Builtin.List.html#List" class="Datatype">List</a> <a id="2982" class="Symbol">(</a><a id="2983" href="MJ.Semantics.Values.html#2915" class="Bound">A</a> <a id="2985" href="MJ.Semantics.Values.html#2973" class="Bound">W</a><a id="2986" class="Symbol">))</a>
  <a id="2991" href="MJ.Semantics.Values.html#list-weakenable" class="Function">list-weakenable</a> <a id="3007" class="Symbol">⦃</a> <a id="3009" href="MJ.Semantics.Values.html#3009" class="Bound">wₐ</a> <a id="3012" class="Symbol">⦄</a> <a id="3014" class="Symbol">=</a> <a id="3016" class="Keyword">record</a> <a id="3023" class="Symbol">{</a><a id="3024" class="Field">wk</a> <a id="3027" class="Symbol">=</a> <a id="3029" class="Symbol">λ</a> <a id="3031" href="MJ.Semantics.Values.html#3031" class="Bound">ext</a> <a id="3035" href="MJ.Semantics.Values.html#3035" class="Bound">v</a> <a id="3037" class="Symbol">→</a> <a id="3039" href="Data.List.Base.html#map" class="Function">List.map</a> <a id="3048" class="Symbol">(</a><a id="3049" href="Common.Weakening.html#721" class="Field">wk</a> <a id="3052" href="MJ.Semantics.Values.html#3031" class="Bound">ext</a><a id="3055" class="Symbol">)</a> <a id="3057" href="MJ.Semantics.Values.html#3035" class="Bound">v</a> <a id="3059" class="Symbol">}</a>

  <a id="list∀-weakenable" href="MJ.Semantics.Values.html#list%E2%88%80-weakenable" class="Function">list∀-weakenable</a> <a id="3081" class="Symbol">:</a> <a id="3083" class="Symbol">∀</a> <a id="3085" class="Symbol">{</a><a id="3086" href="MJ.Semantics.Values.html#3086" class="Bound">b</a><a id="3087" class="Symbol">}{</a><a id="3089" href="MJ.Semantics.Values.html#3089" class="Bound">B</a> <a id="3091" class="Symbol">:</a> <a id="3093" class="PrimitiveType">Set</a> <a id="3097" href="MJ.Semantics.Values.html#3086" class="Bound">b</a><a id="3098" class="Symbol">}{</a><a id="3100" href="MJ.Semantics.Values.html#3100" class="Bound">xs</a> <a id="3103" class="Symbol">:</a> <a id="3105" href="Agda.Builtin.List.html#List" class="Datatype">List</a> <a id="3110" href="MJ.Semantics.Values.html#3089" class="Bound">B</a><a id="3111" class="Symbol">}</a>
                     <a id="3134" class="Symbol">{</a><a id="3135" href="MJ.Semantics.Values.html#3135" class="Bound">a</a><a id="3136" class="Symbol">}{</a><a id="3138" href="MJ.Semantics.Values.html#3138" class="Bound">A</a> <a id="3140" class="Symbol">:</a> <a id="3142" href="MJ.Semantics.Values.html#3089" class="Bound">B</a> <a id="3144" class="Symbol">→</a> <a id="3146" href="MJ.Types.html#World" class="Function">World</a> <a id="3152" href="MJ.Semantics.Values.html#94" class="Bound">c</a> <a id="3154" class="Symbol">→</a> <a id="3156" class="PrimitiveType">Set</a> <a id="3160" href="MJ.Semantics.Values.html#3135" class="Bound">a</a><a id="3161" class="Symbol">}⦃</a> <a id="3164" href="MJ.Semantics.Values.html#3164" class="Bound">wₐ</a> <a id="3167" class="Symbol">:</a> <a id="3169" class="Symbol">∀</a> <a id="3171" href="MJ.Semantics.Values.html#3171" class="Bound">x</a> <a id="3173" class="Symbol">→</a> <a id="3175" href="Common.Weakening.html#Weakenable" class="Record">Weakenable</a> <a id="3186" class="Symbol">(</a><a id="3187" href="MJ.Semantics.Values.html#3138" class="Bound">A</a> <a id="3189" href="MJ.Semantics.Values.html#3171" class="Bound">x</a><a id="3190" class="Symbol">)</a> <a id="3192" class="Symbol">⦄</a> <a id="3194" class="Symbol">→</a>
                     <a id="3217" href="Common.Weakening.html#Weakenable" class="Record">Weakenable</a> <a id="3228" class="Symbol">(λ</a> <a id="3231" href="MJ.Semantics.Values.html#3231" class="Bound">W</a> <a id="3233" class="Symbol">→</a> <a id="3235" href="Data.List.All.html#All" class="Datatype">All</a> <a id="3239" class="Symbol">(λ</a> <a id="3242" href="MJ.Semantics.Values.html#3242" class="Bound">x</a> <a id="3244" class="Symbol">→</a> <a id="3246" href="MJ.Semantics.Values.html#3138" class="Bound">A</a> <a id="3248" href="MJ.Semantics.Values.html#3242" class="Bound">x</a> <a id="3250" href="MJ.Semantics.Values.html#3231" class="Bound">W</a><a id="3251" class="Symbol">)</a> <a id="3253" href="MJ.Semantics.Values.html#3100" class="Bound">xs</a><a id="3255" class="Symbol">)</a>
  <a id="3259" href="MJ.Semantics.Values.html#list%E2%88%80-weakenable" class="Function">list∀-weakenable</a> <a id="3276" class="Symbol">⦃</a> <a id="3278" href="MJ.Semantics.Values.html#3278" class="Bound">wₐ</a> <a id="3281" class="Symbol">⦄</a> <a id="3283" class="Symbol">=</a> <a id="3285" class="Keyword">record</a> <a id="3292" class="Symbol">{</a> <a id="3294" class="Field">wk</a> <a id="3297" class="Symbol">=</a> <a id="3299" class="Symbol">λ</a> <a id="3301" href="MJ.Semantics.Values.html#3301" class="Bound">ext</a> <a id="3305" href="MJ.Semantics.Values.html#3305" class="Bound">v</a> <a id="3307" class="Symbol">→</a> <a id="3309" href="Data.List.All.html#map" class="Function">List∀.map</a> <a id="3319" class="Symbol">(λ</a> <a id="3322" href="MJ.Semantics.Values.html#3322" class="Bound">y</a> <a id="3324" class="Symbol">→</a> <a id="3326" href="Common.Weakening.html#721" class="Field">wk</a> <a id="3329" class="Symbol">⦃</a> <a id="3331" href="MJ.Semantics.Values.html#3278" class="Bound">wₐ</a> <a id="3334" class="Symbol">_</a> <a id="3336" class="Symbol">⦄</a> <a id="3338" href="MJ.Semantics.Values.html#3301" class="Bound">ext</a> <a id="3342" href="MJ.Semantics.Values.html#3322" class="Bound">y</a><a id="3343" class="Symbol">)</a> <a id="3345" href="MJ.Semantics.Values.html#3305" class="Bound">v</a> <a id="3347" class="Symbol">}</a>

</pre></body></html>