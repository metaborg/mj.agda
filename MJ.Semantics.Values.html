<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>MJ.Semantics.Values</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="MJ.Types.html" class="Module">MJ.Types</a> <a id="22" class="Symbol">as</a> <a id="25" class="Module">Types</a>
<a id="31" class="Keyword">import</a> <a id="38" href="MJ.Classtable.Core.html" class="Module">MJ.Classtable.Core</a> <a id="57" class="Symbol">as</a> <a id="60" class="Module">Core</a>

<a id="66" class="Keyword">module</a> <a id="73" href="MJ.Semantics.Values.html" class="Module">MJ.Semantics.Values</a> <a id="93" class="Symbol">{</a><a id="94" href="MJ.Semantics.Values.html#94" class="Bound">c</a><a id="95" class="Symbol">}(</a><a id="97" href="MJ.Semantics.Values.html#97" class="Bound">Ct</a> <a id="100" class="Symbol">:</a> <a id="102" href="MJ.Classtable.Core.html#Classtable" class="Record">Core.Classtable</a> <a id="118" href="MJ.Semantics.Values.html#94" class="Bound">c</a><a id="119" class="Symbol">)</a> <a id="121" class="Keyword">where</a>

<a id="128" class="Keyword">open</a> <a id="133" class="Keyword">import</a> <a id="140" href="Prelude.html" class="Module">Prelude</a>

<a id="149" class="Keyword">open</a> <a id="154" class="Keyword">import</a> <a id="161" href="Level.html" class="Module">Level</a> <a id="167" class="Keyword">renaming</a> <a id="176" class="Symbol">(</a><a id="177" href="Agda.Primitive.html#lsuc" class="Primitive">suc</a> <a id="181" class="Symbol">to</a> <a id="184" href="Agda.Primitive.html#lsuc" class="Primitive">lsuc</a><a id="188" class="Symbol">;</a> <a id="190" href="Agda.Primitive.html#lzero" class="Primitive">zero</a> <a id="195" class="Symbol">to</a> <a id="198" href="Agda.Primitive.html#lzero" class="Primitive">lzero</a><a id="203" class="Symbol">)</a>
<a id="205" class="Keyword">open</a> <a id="210" class="Keyword">import</a> <a id="217" href="Data.List.Most.html" class="Module">Data.List.Most</a>
<a id="232" class="Keyword">open</a> <a id="237" class="Keyword">import</a> <a id="244" href="Data.List.Prefix.html" class="Module">Data.List.Prefix</a>

<a id="262" class="Keyword">open</a> <a id="267" href="MJ.Classtable.Core.html" class="Module">Core</a> <a id="272" href="MJ.Semantics.Values.html#94" class="Bound">c</a>
<a id="274" class="Keyword">open</a> <a id="279" href="MJ.Classtable.Core.html#Classtable" class="Module">Classtable</a> <a id="290" href="MJ.Semantics.Values.html#97" class="Bound">Ct</a>
<a id="293" class="Keyword">open</a> <a id="298" class="Keyword">import</a> <a id="305" href="MJ.Classtable.Membership.html" class="Module">MJ.Classtable.Membership</a> <a id="330" href="MJ.Semantics.Values.html#97" class="Bound">Ct</a>
<a id="333" class="Keyword">open</a> <a id="338" class="Keyword">import</a> <a id="345" href="MJ.LexicalScope.html" class="Module">MJ.LexicalScope</a> <a id="361" href="MJ.Semantics.Values.html#94" class="Bound">c</a>
<a id="363" class="Keyword">open</a> <a id="368" class="Keyword">import</a> <a id="375" href="Common.Weakening.html" class="Module">Common.Weakening</a>

<a id="393" class="Comment">{-
MJ inherits the values of STLC+Ref. In contrast to STCL+Ref, MJ also has
null-pointers; which we add as a constructor to our value type Val. The value
constructed by null is typed with an arbitrary reference type as it can be used
in place of any proper reference.
-}</a>
<a id="664" class="Keyword">data</a> <a id="Val" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="673" class="Symbol">(</a><a id="674" href="MJ.Semantics.Values.html#674" class="Bound">W</a> <a id="676" class="Symbol">:</a> <a id="678" href="MJ.Types.html#World" class="Function">World</a> <a id="684" href="MJ.Semantics.Values.html#94" class="Bound">c</a><a id="685" class="Symbol">)</a> <a id="687" class="Symbol">:</a> <a id="689" href="MJ.Types.html#Ty" class="Datatype">Ty</a> <a id="692" href="MJ.Semantics.Values.html#94" class="Bound">c</a> <a id="694" class="Symbol">→</a> <a id="696" class="PrimitiveType">Set</a> <a id="700" class="Keyword">where</a>
  <a id="Val.num" href="MJ.Semantics.Values.html#Val.num" class="InductiveConstructor">num</a>  <a id="713" class="Symbol">:</a> <a id="715" href="Agda.Builtin.Nat.html#%E2%84%95" class="Datatype">ℕ</a> <a id="717" class="Symbol">→</a> <a id="719" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="723" href="MJ.Semantics.Values.html#674" class="Bound">W</a> <a id="725" href="MJ.Types.html#Ty.int" class="InductiveConstructor">int</a>
  <a id="Val.unit" href="MJ.Semantics.Values.html#Val.unit" class="InductiveConstructor">unit</a> <a id="736" class="Symbol">:</a> <a id="738" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="742" href="MJ.Semantics.Values.html#674" class="Bound">W</a> <a id="744" href="MJ.Types.html#Ty.void" class="InductiveConstructor">void</a>
  <a id="Val.null" href="MJ.Semantics.Values.html#Val.null" class="InductiveConstructor">null</a> <a id="756" class="Symbol">:</a> <a id="758" class="Symbol">∀</a> <a id="760" class="Symbol">{</a><a id="761" href="MJ.Semantics.Values.html#761" class="Bound">C</a><a id="762" class="Symbol">}</a> <a id="764" class="Symbol">→</a> <a id="766" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="770" href="MJ.Semantics.Values.html#674" class="Bound">W</a> <a id="772" class="Symbol">(</a><a id="773" href="MJ.Types.html#Ty.ref" class="InductiveConstructor">ref</a> <a id="777" href="MJ.Semantics.Values.html#761" class="Bound">C</a><a id="778" class="Symbol">)</a>
  <a id="Val.ref" href="MJ.Semantics.Values.html#Val.ref" class="InductiveConstructor">ref</a>  <a id="787" class="Symbol">:</a> <a id="789" class="Symbol">∀</a> <a id="791" class="Symbol">{</a><a id="792" href="MJ.Semantics.Values.html#792" class="Bound">C</a> <a id="794" href="MJ.Semantics.Values.html#794" class="Bound">P</a><a id="795" class="Symbol">}</a> <a id="797" class="Symbol">→</a> <a id="799" class="Symbol">(</a><a id="800" href="MJ.Types.html#Ty%E2%81%BA.obj" class="InductiveConstructor">obj</a> <a id="804" href="MJ.Semantics.Values.html#792" class="Bound">C</a><a id="805" class="Symbol">)</a> <a id="807" href="Data.List.Any.Membership.html#Propositional.M._%E2%88%88_" class="Function Operator">∈</a> <a id="809" href="MJ.Semantics.Values.html#674" class="Bound">W</a> <a id="811" class="Symbol">→</a> <a id="813" href="MJ.Classtable.Core.html#2464" class="Field">Σ</a> <a id="815" href="MJ.Classtable.Core.html#2074" class="Function Operator">⊢</a> <a id="817" href="MJ.Semantics.Values.html#792" class="Bound">C</a> <a id="819" href="MJ.Classtable.Core.html#2074" class="Function Operator">&lt;:</a> <a id="822" href="MJ.Semantics.Values.html#794" class="Bound">P</a> <a id="824" class="Symbol">→</a> <a id="826" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="830" href="MJ.Semantics.Values.html#674" class="Bound">W</a> <a id="832" class="Symbol">(</a><a id="833" href="MJ.Types.html#Ty.ref" class="InductiveConstructor">ref</a> <a id="837" href="MJ.Semantics.Values.html#794" class="Bound">P</a><a id="838" class="Symbol">)</a>

<a id="841" class="Comment">{-
We can construct default values out of thin air for every type
-}</a>
<a id="default" href="MJ.Semantics.Values.html#default" class="Function">default</a> <a id="918" class="Symbol">:</a> <a id="920" class="Symbol">∀</a> <a id="922" class="Symbol">{</a><a id="923" href="MJ.Semantics.Values.html#923" class="Bound">W</a><a id="924" class="Symbol">}</a> <a id="926" class="Symbol">→</a> <a id="928" class="Symbol">(</a><a id="929" href="MJ.Semantics.Values.html#929" class="Bound">a</a> <a id="931" class="Symbol">:</a> <a id="933" href="MJ.Types.html#Ty" class="Datatype">Ty</a> <a id="936" href="MJ.Semantics.Values.html#94" class="Bound">c</a><a id="937" class="Symbol">)</a> <a id="939" class="Symbol">→</a> <a id="941" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="945" href="MJ.Semantics.Values.html#923" class="Bound">W</a> <a id="947" href="MJ.Semantics.Values.html#929" class="Bound">a</a>
<a id="949" href="MJ.Semantics.Values.html#default" class="Function">default</a> <a id="957" href="MJ.Types.html#Ty.void" class="InductiveConstructor">void</a> <a id="962" class="Symbol">=</a> <a id="964" href="MJ.Semantics.Values.html#Val.unit" class="InductiveConstructor">unit</a>
<a id="969" href="MJ.Semantics.Values.html#default" class="Function">default</a> <a id="977" href="MJ.Types.html#Ty.int" class="InductiveConstructor">int</a> <a id="981" class="Symbol">=</a> <a id="983" href="MJ.Semantics.Values.html#Val.num" class="InductiveConstructor">num</a> <a id="987" class="Number">0</a>
<a id="989" href="MJ.Semantics.Values.html#default" class="Function">default</a> <a id="997" class="Symbol">(</a><a id="998" href="MJ.Types.html#Ty.ref" class="InductiveConstructor">ref</a> <a id="1002" href="MJ.Semantics.Values.html#1002" class="Bound">x</a><a id="1003" class="Symbol">)</a> <a id="1005" class="Symbol">=</a> <a id="1007" href="MJ.Semantics.Values.html#Val.null" class="InductiveConstructor">null</a>

<a id="1013" class="Comment">{-
Value weakening
-}</a>
<a id="weaken-val" href="MJ.Semantics.Values.html#weaken-val" class="Function">weaken-val</a> <a id="1046" class="Symbol">:</a> <a id="1048" class="Symbol">∀</a> <a id="1050" class="Symbol">{</a><a id="1051" href="MJ.Semantics.Values.html#1051" class="Bound">a</a><a id="1052" class="Symbol">}{</a><a id="1054" href="MJ.Semantics.Values.html#1054" class="Bound">W</a> <a id="1056" href="MJ.Semantics.Values.html#1056" class="Bound">W&#39;</a> <a id="1059" class="Symbol">:</a> <a id="1061" href="MJ.Types.html#World" class="Function">World</a> <a id="1067" href="MJ.Semantics.Values.html#94" class="Bound">c</a><a id="1068" class="Symbol">}</a> <a id="1070" class="Symbol">→</a> <a id="1072" href="MJ.Semantics.Values.html#1054" class="Bound">W</a> <a id="1074" href="Data.List.Prefix.html#_%E2%8A%92_" class="Function Operator">⊒</a> <a id="1076" href="MJ.Semantics.Values.html#1056" class="Bound">W&#39;</a> <a id="1079" class="Symbol">→</a> <a id="1081" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="1085" href="MJ.Semantics.Values.html#1056" class="Bound">W&#39;</a> <a id="1088" href="MJ.Semantics.Values.html#1051" class="Bound">a</a> <a id="1090" class="Symbol">→</a> <a id="1092" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="1096" href="MJ.Semantics.Values.html#1054" class="Bound">W</a> <a id="1098" href="MJ.Semantics.Values.html#1051" class="Bound">a</a>
<a id="1100" href="MJ.Semantics.Values.html#weaken-val" class="Function">weaken-val</a> <a id="1111" href="MJ.Semantics.Values.html#1111" class="Bound">ext</a> <a id="1115" class="Symbol">(</a><a id="1116" href="MJ.Semantics.Values.html#Val.num" class="InductiveConstructor">num</a> <a id="1120" href="MJ.Semantics.Values.html#1120" class="Bound">n</a><a id="1121" class="Symbol">)</a> <a id="1123" class="Symbol">=</a> <a id="1125" href="MJ.Semantics.Values.html#Val.num" class="InductiveConstructor">num</a> <a id="1129" href="MJ.Semantics.Values.html#1120" class="Bound">n</a>
<a id="1131" href="MJ.Semantics.Values.html#weaken-val" class="Function">weaken-val</a> <a id="1142" href="MJ.Semantics.Values.html#1142" class="Bound">ext</a> <a id="1146" href="MJ.Semantics.Values.html#Val.unit" class="InductiveConstructor">unit</a> <a id="1151" class="Symbol">=</a> <a id="1153" href="MJ.Semantics.Values.html#Val.unit" class="InductiveConstructor">unit</a>
<a id="1158" href="MJ.Semantics.Values.html#weaken-val" class="Function">weaken-val</a> <a id="1169" href="MJ.Semantics.Values.html#1169" class="Bound">ext</a> <a id="1173" href="MJ.Semantics.Values.html#Val.null" class="InductiveConstructor">null</a> <a id="1178" class="Symbol">=</a> <a id="1180" href="MJ.Semantics.Values.html#Val.null" class="InductiveConstructor">null</a>
<a id="1185" href="MJ.Semantics.Values.html#weaken-val" class="Function">weaken-val</a> <a id="1196" href="MJ.Semantics.Values.html#1196" class="Bound">ext</a> <a id="1200" class="Symbol">(</a><a id="1201" href="MJ.Semantics.Values.html#Val.ref" class="InductiveConstructor">ref</a> <a id="1205" href="MJ.Semantics.Values.html#1205" class="Bound">x</a> <a id="1207" href="MJ.Semantics.Values.html#1207" class="Bound">sub</a><a id="1210" class="Symbol">)</a> <a id="1212" class="Symbol">=</a> <a id="1214" href="MJ.Semantics.Values.html#Val.ref" class="InductiveConstructor">ref</a> <a id="1218" class="Symbol">(</a><a id="1219" href="Data.List.Prefix.html#%E2%88%88-%E2%8A%92" class="Function">∈-⊒</a> <a id="1223" href="MJ.Semantics.Values.html#1205" class="Bound">x</a> <a id="1225" href="MJ.Semantics.Values.html#1196" class="Bound">ext</a><a id="1228" class="Symbol">)</a> <a id="1230" href="MJ.Semantics.Values.html#1207" class="Bound">sub</a>

<a id="1235" class="Keyword">instance</a>
  <a id="val-weakenable" href="MJ.Semantics.Values.html#val-weakenable" class="Function">val-weakenable</a> <a id="1261" class="Symbol">:</a> <a id="1263" class="Symbol">∀</a> <a id="1265" class="Symbol">{</a><a id="1266" href="MJ.Semantics.Values.html#1266" class="Bound">a</a><a id="1267" class="Symbol">}</a> <a id="1269" class="Symbol">→</a> <a id="1271" href="Common.Weakening.html#Weakenable" class="Record">Weakenable</a> <a id="1282" class="Symbol">(λ</a> <a id="1285" href="MJ.Semantics.Values.html#1285" class="Bound">W</a> <a id="1287" class="Symbol">→</a> <a id="1289" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="1293" href="MJ.Semantics.Values.html#1285" class="Bound">W</a> <a id="1295" href="MJ.Semantics.Values.html#1266" class="Bound">a</a><a id="1296" class="Symbol">)</a>
  <a id="1300" href="MJ.Semantics.Values.html#val-weakenable" class="Function">val-weakenable</a> <a id="1315" class="Symbol">=</a> <a id="1317" class="Keyword">record</a> <a id="1324" class="Symbol">{</a> <a id="1326" class="Field">wk</a> <a id="1329" class="Symbol">=</a> <a id="1331" href="MJ.Semantics.Values.html#weaken-val" class="Function">weaken-val</a> <a id="1342" class="Symbol">}</a>

</pre></body></html>