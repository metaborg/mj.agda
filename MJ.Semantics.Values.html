<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>MJ.Semantics.Values</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="MJ.Types.html" class="Module">MJ.Types</a> <a id="22" class="Symbol">as</a> <a id="25" class="Module">Types</a>
<a id="31" class="Keyword">import</a> <a id="38" href="MJ.Classtable.Core.html" class="Module">MJ.Classtable.Core</a> <a id="57" class="Symbol">as</a> <a id="60" class="Module">Core</a>

<a id="66" class="Keyword">module</a> <a id="73" href="MJ.Semantics.Values.html" class="Module">MJ.Semantics.Values</a> <a id="93" class="Symbol">{</a><a id="94" href="MJ.Semantics.Values.html#94" class="Bound">c</a><a id="95" class="Symbol">}(</a><a id="97" href="MJ.Semantics.Values.html#97" class="Bound">Ct</a> <a id="100" class="Symbol">:</a> <a id="102" href="MJ.Classtable.Core.html#Classtable" class="Record">Core.Classtable</a> <a id="118" href="MJ.Semantics.Values.html#94" class="Bound">c</a><a id="119" class="Symbol">)</a> <a id="121" class="Keyword">where</a>

<a id="128" class="Keyword">open</a> <a id="133" class="Keyword">import</a> <a id="140" href="Prelude.html" class="Module">Prelude</a>

<a id="149" class="Keyword">open</a> <a id="154" class="Keyword">import</a> <a id="161" href="Level.html" class="Module">Level</a> <a id="167" class="Keyword">renaming</a> <a id="176" class="Symbol">(</a><a id="177" href="Agda.Primitive.html#lsuc" class="Primitive">suc</a> <a id="181" class="Symbol">to</a> <a id="184" href="Agda.Primitive.html#lsuc" class="Primitive">lsuc</a><a id="188" class="Symbol">;</a> <a id="190" href="Agda.Primitive.html#lzero" class="Primitive">zero</a> <a id="195" class="Symbol">to</a> <a id="198" href="Agda.Primitive.html#lzero" class="Primitive">lzero</a><a id="203" class="Symbol">)</a>
<a id="205" class="Keyword">open</a> <a id="210" class="Keyword">import</a> <a id="217" href="Data.List.html" class="Module">Data.List</a> <a id="227" class="Symbol">as</a> <a id="230" class="Module">List</a> <a id="235" class="Keyword">hiding</a> <a id="242" class="Symbol">(</a><a id="243" href="Data.List.Base.html#null" class="Function">null</a><a id="247" class="Symbol">)</a>
<a id="249" class="Keyword">open</a> <a id="254" class="Keyword">import</a> <a id="261" href="Data.Vec.html" class="Module">Data.Vec</a> <a id="270" class="Keyword">hiding</a> <a id="277" class="Symbol">(</a><a id="278" href="Data.Vec.html#_%E2%88%88_" class="Datatype Operator">_∈_</a><a id="281" class="Symbol">)</a>
<a id="283" class="Keyword">open</a> <a id="288" class="Keyword">import</a> <a id="295" href="Data.List.Any.Membership.Propositional.html" class="Module">Data.List.Any.Membership.Propositional</a>
<a id="334" class="Keyword">open</a> <a id="339" class="Keyword">import</a> <a id="346" href="Data.List.All.html" class="Module">Data.List.All</a> <a id="360" class="Symbol">as</a> <a id="363" class="Module">List∀</a>
<a id="369" class="Keyword">open</a> <a id="374" class="Keyword">import</a> <a id="381" href="Data.List.All.Properties.Extra.html" class="Module">Data.List.All.Properties.Extra</a> <a id="412" class="Symbol">as</a> <a id="415" class="Module">List∀++</a>
<a id="423" class="Keyword">open</a> <a id="428" class="Keyword">import</a> <a id="435" href="Data.List.Prefix.html" class="Module">Data.List.Prefix</a>
<a id="452" class="Keyword">open</a> <a id="457" class="Keyword">import</a> <a id="464" href="Data.Vec.All.html" class="Module">Data.Vec.All</a> <a id="477" class="Symbol">as</a> <a id="480" class="Module">Vec∀</a> <a id="485" class="Keyword">using</a> <a id="491" class="Symbol">()</a>


<a id="496" class="Keyword">open</a> <a id="501" href="MJ.Classtable.Core.html" class="Module">Core</a> <a id="506" href="MJ.Semantics.Values.html#94" class="Bound">c</a>
<a id="508" class="Keyword">open</a> <a id="513" href="MJ.Classtable.Core.html#Classtable" class="Module">Classtable</a> <a id="524" href="MJ.Semantics.Values.html#97" class="Bound">Ct</a>
<a id="527" class="Keyword">open</a> <a id="532" class="Keyword">import</a> <a id="539" href="MJ.Classtable.Membership.html" class="Module">MJ.Classtable.Membership</a> <a id="564" href="MJ.Semantics.Values.html#97" class="Bound">Ct</a>
<a id="567" class="Keyword">open</a> <a id="572" class="Keyword">import</a> <a id="579" href="MJ.LexicalScope.html" class="Module">MJ.LexicalScope</a> <a id="595" href="MJ.Semantics.Values.html#97" class="Bound">Ct</a>
<a id="598" class="Keyword">open</a> <a id="603" class="Keyword">import</a> <a id="610" href="Common.Weakening.html" class="Module">Common.Weakening</a>

<a id="628" class="Keyword">open</a> <a id="633" href="Common.Weakening.html#Weakenable" class="Module">Weakenable</a> <a id="644" class="Symbol">⦃...⦄</a>

<a id="651" class="Comment">{-
MJ inherits the values of STLC+Ref. In contrast to STCL+Ref, MJ also has
null-pointers; which we add as a constructor to our value type Val. The value
constructed by null is typed with an arbitrary reference type as it can be used
in place of any proper reference.
-}</a>
<a id="922" class="Keyword">data</a> <a id="Val" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="931" class="Symbol">(</a><a id="932" href="MJ.Semantics.Values.html#932" class="Bound">W</a> <a id="934" class="Symbol">:</a> <a id="936" href="MJ.Types.html#World" class="Function">World</a> <a id="942" href="MJ.Semantics.Values.html#94" class="Bound">c</a><a id="943" class="Symbol">)</a> <a id="945" class="Symbol">:</a> <a id="947" href="MJ.Types.html#Ty" class="Datatype">Ty</a> <a id="950" href="MJ.Semantics.Values.html#94" class="Bound">c</a> <a id="952" class="Symbol">→</a> <a id="954" class="PrimitiveType">Set</a> <a id="958" class="Keyword">where</a>
  <a id="Val.num" href="MJ.Semantics.Values.html#Val.num" class="InductiveConstructor">num</a>  <a id="971" class="Symbol">:</a> <a id="973" href="Agda.Builtin.Nat.html#%E2%84%95" class="Datatype">ℕ</a> <a id="975" class="Symbol">→</a> <a id="977" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="981" href="MJ.Semantics.Values.html#932" class="Bound">W</a> <a id="983" href="MJ.Types.html#Ty.int" class="InductiveConstructor">int</a>
  <a id="Val.unit" href="MJ.Semantics.Values.html#Val.unit" class="InductiveConstructor">unit</a> <a id="994" class="Symbol">:</a> <a id="996" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="1000" href="MJ.Semantics.Values.html#932" class="Bound">W</a> <a id="1002" href="MJ.Types.html#Ty.void" class="InductiveConstructor">void</a>
  <a id="Val.null" href="MJ.Semantics.Values.html#Val.null" class="InductiveConstructor">null</a> <a id="1014" class="Symbol">:</a> <a id="1016" class="Symbol">∀</a> <a id="1018" class="Symbol">{</a><a id="1019" href="MJ.Semantics.Values.html#1019" class="Bound">C</a><a id="1020" class="Symbol">}</a> <a id="1022" class="Symbol">→</a> <a id="1024" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="1028" href="MJ.Semantics.Values.html#932" class="Bound">W</a> <a id="1030" class="Symbol">(</a><a id="1031" href="MJ.Types.html#Ty.ref" class="InductiveConstructor">ref</a> <a id="1035" href="MJ.Semantics.Values.html#1019" class="Bound">C</a><a id="1036" class="Symbol">)</a>
  <a id="Val.ref" href="MJ.Semantics.Values.html#Val.ref" class="InductiveConstructor">ref</a>  <a id="1045" class="Symbol">:</a> <a id="1047" class="Symbol">∀</a> <a id="1049" class="Symbol">{</a><a id="1050" href="MJ.Semantics.Values.html#1050" class="Bound">C</a> <a id="1052" href="MJ.Semantics.Values.html#1052" class="Bound">P</a><a id="1053" class="Symbol">}</a> <a id="1055" class="Symbol">→</a> <a id="1057" class="Symbol">(</a><a id="1058" href="MJ.Types.html#Ty%E2%81%BA.obj" class="InductiveConstructor">obj</a> <a id="1062" href="MJ.Semantics.Values.html#1050" class="Bound">C</a><a id="1063" class="Symbol">)</a> <a id="1065" href="Data.List.Any.Membership.html#Propositional.M._%E2%88%88_" class="Function Operator">∈</a> <a id="1067" href="MJ.Semantics.Values.html#932" class="Bound">W</a> <a id="1069" class="Symbol">→</a> <a id="1071" href="MJ.Classtable.Core.html#2464" class="Field">Σ</a> <a id="1073" href="MJ.Classtable.Core.html#2074" class="Function Operator">⊢</a> <a id="1075" href="MJ.Semantics.Values.html#1050" class="Bound">C</a> <a id="1077" href="MJ.Classtable.Core.html#2074" class="Function Operator">&lt;:</a> <a id="1080" href="MJ.Semantics.Values.html#1052" class="Bound">P</a> <a id="1082" class="Symbol">→</a> <a id="1084" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="1088" href="MJ.Semantics.Values.html#932" class="Bound">W</a> <a id="1090" class="Symbol">(</a><a id="1091" href="MJ.Types.html#Ty.ref" class="InductiveConstructor">ref</a> <a id="1095" href="MJ.Semantics.Values.html#1052" class="Bound">P</a><a id="1096" class="Symbol">)</a>

<a id="1099" class="Comment">{-
We can construct default values out of thin air for every type
-}</a>
<a id="default" href="MJ.Semantics.Values.html#default" class="Function">default</a> <a id="1176" class="Symbol">:</a> <a id="1178" class="Symbol">∀</a> <a id="1180" class="Symbol">{</a><a id="1181" href="MJ.Semantics.Values.html#1181" class="Bound">W</a><a id="1182" class="Symbol">}</a> <a id="1184" class="Symbol">→</a> <a id="1186" class="Symbol">(</a><a id="1187" href="MJ.Semantics.Values.html#1187" class="Bound">a</a> <a id="1189" class="Symbol">:</a> <a id="1191" href="MJ.Types.html#Ty" class="Datatype">Ty</a> <a id="1194" href="MJ.Semantics.Values.html#94" class="Bound">c</a><a id="1195" class="Symbol">)</a> <a id="1197" class="Symbol">→</a> <a id="1199" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="1203" href="MJ.Semantics.Values.html#1181" class="Bound">W</a> <a id="1205" href="MJ.Semantics.Values.html#1187" class="Bound">a</a>
<a id="1207" href="MJ.Semantics.Values.html#default" class="Function">default</a> <a id="1215" href="MJ.Types.html#Ty.void" class="InductiveConstructor">void</a> <a id="1220" class="Symbol">=</a> <a id="1222" href="MJ.Semantics.Values.html#Val.unit" class="InductiveConstructor">unit</a>
<a id="1227" href="MJ.Semantics.Values.html#default" class="Function">default</a> <a id="1235" href="MJ.Types.html#Ty.int" class="InductiveConstructor">int</a> <a id="1239" class="Symbol">=</a> <a id="1241" href="MJ.Semantics.Values.html#Val.num" class="InductiveConstructor">num</a> <a id="1245" class="Number">0</a>
<a id="1247" href="MJ.Semantics.Values.html#default" class="Function">default</a> <a id="1255" class="Symbol">(</a><a id="1256" href="MJ.Types.html#Ty.ref" class="InductiveConstructor">ref</a> <a id="1260" href="MJ.Semantics.Values.html#1260" class="Bound">x</a><a id="1261" class="Symbol">)</a> <a id="1263" class="Symbol">=</a> <a id="1265" href="MJ.Semantics.Values.html#Val.null" class="InductiveConstructor">null</a>

<a id="1271" class="Comment">{-
We equip MJ with mutable lexical environments.
We could choose to model this directly, moving the environment from
the Reader part of the evaluation monad to the State part.

Instead we choose to keep our environments immutable and model
mutability of the values in it by an indirection via the mutable store.
This greatly simplifies the treatment of environments in the interpreter
and keeps the representation lightweight, even though we support block scopes.
-}</a>
<a id="Env" href="MJ.Semantics.Values.html#Env" class="Function">Env</a> <a id="1743" class="Symbol">:</a> <a id="1745" class="Symbol">∀</a> <a id="1747" class="Symbol">(</a><a id="1748" href="MJ.Semantics.Values.html#1748" class="Bound">Γ</a> <a id="1750" class="Symbol">:</a> <a id="1752" href="MJ.LexicalScope.html#226" class="Function">Ctx</a><a id="1755" class="Symbol">)(</a><a id="1757" href="MJ.Semantics.Values.html#1757" class="Bound">W</a> <a id="1759" class="Symbol">:</a> <a id="1761" href="MJ.Types.html#World" class="Function">World</a> <a id="1767" href="MJ.Semantics.Values.html#94" class="Bound">c</a><a id="1768" class="Symbol">)</a> <a id="1770" class="Symbol">→</a> <a id="1772" class="PrimitiveType">Set</a>
<a id="1776" href="MJ.Semantics.Values.html#Env" class="Function">Env</a> <a id="1780" href="MJ.Semantics.Values.html#1780" class="Bound">Γ</a> <a id="1782" href="MJ.Semantics.Values.html#1782" class="Bound">W</a> <a id="1784" class="Symbol">=</a> <a id="1786" href="Data.List.All.html#All" class="Datatype">All</a> <a id="1790" class="Symbol">(λ</a> <a id="1793" href="MJ.Semantics.Values.html#1793" class="Bound">a</a> <a id="1795" class="Symbol">→</a> <a id="1797" href="MJ.Types.html#Ty%E2%81%BA.vty" class="InductiveConstructor">vty</a> <a id="1801" href="MJ.Semantics.Values.html#1793" class="Bound">a</a> <a id="1803" href="Data.List.Any.Membership.html#Propositional.M._%E2%88%88_" class="Function Operator">∈</a> <a id="1805" href="MJ.Semantics.Values.html#1782" class="Bound">W</a><a id="1806" class="Symbol">)</a> <a id="1808" href="MJ.Semantics.Values.html#1780" class="Bound">Γ</a>

<a id="_⊕_" href="MJ.Semantics.Values.html#_%E2%8A%95_" class="Function Operator">_⊕_</a> <a id="1815" class="Symbol">:</a> <a id="1817" class="Symbol">∀</a> <a id="1819" class="Symbol">{</a><a id="1820" href="MJ.Semantics.Values.html#1820" class="Bound">Γ</a> <a id="1822" href="MJ.Semantics.Values.html#1822" class="Bound">W</a> <a id="1824" href="MJ.Semantics.Values.html#1824" class="Bound">a</a><a id="1825" class="Symbol">}</a> <a id="1827" class="Symbol">→</a> <a id="1829" href="MJ.Semantics.Values.html#Env" class="Function">Env</a> <a id="1833" href="MJ.Semantics.Values.html#1820" class="Bound">Γ</a> <a id="1835" href="MJ.Semantics.Values.html#1822" class="Bound">W</a> <a id="1837" class="Symbol">→</a> <a id="1839" class="Symbol">(</a><a id="1840" href="MJ.Types.html#Ty%E2%81%BA.vty" class="InductiveConstructor">vty</a> <a id="1844" href="MJ.Semantics.Values.html#1824" class="Bound">a</a><a id="1845" class="Symbol">)</a> <a id="1847" href="Data.List.Any.Membership.html#Propositional.M._%E2%88%88_" class="Function Operator">∈</a> <a id="1849" href="MJ.Semantics.Values.html#1822" class="Bound">W</a> <a id="1851" class="Symbol">→</a> <a id="1853" href="MJ.Semantics.Values.html#Env" class="Function">Env</a> <a id="1857" class="Symbol">(</a><a id="1858" href="MJ.Semantics.Values.html#1820" class="Bound">Γ</a> <a id="1860" href="MJ.LexicalScope.html#295" class="Function Operator">+local</a> <a id="1867" href="MJ.Semantics.Values.html#1824" class="Bound">a</a><a id="1868" class="Symbol">)</a> <a id="1870" href="MJ.Semantics.Values.html#1822" class="Bound">W</a>
<a id="1872" href="MJ.Semantics.Values.html#_%E2%8A%95_" class="Function Operator">_⊕_</a> <a id="1876" href="MJ.Semantics.Values.html#1876" class="Bound">E</a> <a id="1878" href="MJ.Semantics.Values.html#1878" class="Bound">v</a> <a id="1880" class="Symbol">=</a> <a id="1882" href="MJ.Semantics.Values.html#1878" class="Bound">v</a> <a id="1884" href="Data.List.All.html#All._%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="1886" href="MJ.Semantics.Values.html#1876" class="Bound">E</a>

<a id="1889" class="Keyword">open</a> <a id="1894" class="Keyword">import</a> <a id="1901" href="Data.List.Any.html" class="Module">Data.List.Any</a>
<a id="getvar" href="MJ.Semantics.Values.html#getvar" class="Function">getvar</a> <a id="1922" class="Symbol">:</a> <a id="1924" class="Symbol">∀</a> <a id="1926" class="Symbol">{</a><a id="1927" href="MJ.Semantics.Values.html#1927" class="Bound">Γ</a> <a id="1929" href="MJ.Semantics.Values.html#1929" class="Bound">W</a> <a id="1931" href="MJ.Semantics.Values.html#1931" class="Bound">a</a><a id="1932" class="Symbol">}</a> <a id="1934" class="Symbol">→</a> <a id="1936" href="MJ.LexicalScope.html#255" class="Function">Var</a> <a id="1940" href="MJ.Semantics.Values.html#1927" class="Bound">Γ</a> <a id="1942" href="MJ.Semantics.Values.html#1931" class="Bound">a</a> <a id="1944" class="Symbol">→</a> <a id="1946" href="MJ.Semantics.Values.html#Env" class="Function">Env</a> <a id="1950" href="MJ.Semantics.Values.html#1927" class="Bound">Γ</a> <a id="1952" href="MJ.Semantics.Values.html#1929" class="Bound">W</a> <a id="1954" class="Symbol">→</a> <a id="1956" href="MJ.Types.html#Ty%E2%81%BA.vty" class="InductiveConstructor">vty</a> <a id="1960" href="MJ.Semantics.Values.html#1931" class="Bound">a</a> <a id="1962" href="Data.List.Any.Membership.html#Propositional.M._%E2%88%88_" class="Function Operator">∈</a> <a id="1964" href="MJ.Semantics.Values.html#1929" class="Bound">W</a>
<a id="1966" href="MJ.Semantics.Values.html#getvar" class="Function">getvar</a> <a id="1973" href="MJ.Semantics.Values.html#1973" class="Bound">px</a> <a id="1976" href="MJ.Semantics.Values.html#1976" class="Bound">E</a> <a id="1978" class="Symbol">=</a> <a id="1980" href="Data.List.All.Properties.Extra.html#%E2%88%88-all" class="Function">∈-all</a> <a id="1986" href="MJ.Semantics.Values.html#1973" class="Bound">px</a> <a id="1989" href="MJ.Semantics.Values.html#1976" class="Bound">E</a>

<a id="1992" class="Comment">{-
Abstract interface for object encodings.
-}</a>
<a id="2039" class="Keyword">record</a> <a id="ObjEncoding" href="MJ.Semantics.Values.html#ObjEncoding" class="Record">ObjEncoding</a> <a id="2058" class="Symbol">:</a> <a id="2060" class="PrimitiveType">Set</a> <a id="2064" class="Symbol">(</a><a id="2065" href="Agda.Primitive.html#lsuc" class="Primitive">lsuc</a> <a id="2070" href="Agda.Primitive.html#lzero" class="Primitive">lzero</a><a id="2075" class="Symbol">)</a> <a id="2077" class="Keyword">where</a>
  <a id="2085" class="Keyword">field</a>
    <a id="ObjEncoding.Obj" href="MJ.Semantics.Values.html#ObjEncoding.Obj" class="Field">Obj</a> <a id="2099" class="Symbol">:</a> <a id="2101" href="MJ.Types.html#World" class="Function">World</a> <a id="2107" href="MJ.Semantics.Values.html#94" class="Bound">c</a> <a id="2109" class="Symbol">→</a> <a id="2111" href="MJ.Types.html#Cid" class="Datatype">Cid</a> <a id="2115" href="MJ.Semantics.Values.html#94" class="Bound">c</a> <a id="2117" class="Symbol">→</a> <a id="2119" class="PrimitiveType">Set</a>
    <a id="ObjEncoding.weaken-obj" href="MJ.Semantics.Values.html#ObjEncoding.weaken-obj" class="Field">weaken-obj</a> <a id="2138" class="Symbol">:</a> <a id="2140" class="Symbol">∀</a> <a id="2142" class="Symbol">{</a><a id="2143" href="MJ.Semantics.Values.html#2143" class="Bound">W</a> <a id="2145" href="MJ.Semantics.Values.html#2145" class="Bound">W&#39;</a><a id="2147" class="Symbol">}</a> <a id="2149" href="MJ.Semantics.Values.html#2149" class="Bound">cid</a> <a id="2153" class="Symbol">→</a> <a id="2155" href="MJ.Semantics.Values.html#2145" class="Bound">W&#39;</a> <a id="2158" href="Data.List.Prefix.html#_%E2%8A%92_" class="Function Operator">⊒</a> <a id="2160" href="MJ.Semantics.Values.html#2143" class="Bound">W</a> <a id="2162" class="Symbol">→</a> <a id="2164" href="MJ.Semantics.Values.html#ObjEncoding.Obj" class="Field">Obj</a> <a id="2168" href="MJ.Semantics.Values.html#2143" class="Bound">W</a> <a id="2170" href="MJ.Semantics.Values.html#2149" class="Bound">cid</a> <a id="2174" class="Symbol">→</a> <a id="2176" href="MJ.Semantics.Values.html#ObjEncoding.Obj" class="Field">Obj</a> <a id="2180" href="MJ.Semantics.Values.html#2145" class="Bound">W&#39;</a> <a id="2183" href="MJ.Semantics.Values.html#2149" class="Bound">cid</a>
    <a id="ObjEncoding.getter" href="MJ.Semantics.Values.html#ObjEncoding.getter" class="Field">getter</a> <a id="2198" class="Symbol">:</a> <a id="2200" class="Symbol">∀</a> <a id="2202" class="Symbol">{</a><a id="2203" href="MJ.Semantics.Values.html#2203" class="Bound">W</a> <a id="2205" href="MJ.Semantics.Values.html#2205" class="Bound">m</a> <a id="2207" href="MJ.Semantics.Values.html#2207" class="Bound">a</a><a id="2208" class="Symbol">}</a> <a id="2210" href="MJ.Semantics.Values.html#2210" class="Bound">c</a> <a id="2212" class="Symbol">→</a> <a id="2214" href="MJ.Semantics.Values.html#ObjEncoding.Obj" class="Field">Obj</a> <a id="2218" href="MJ.Semantics.Values.html#2203" class="Bound">W</a> <a id="2220" href="MJ.Semantics.Values.html#2210" class="Bound">c</a> <a id="2222" class="Symbol">→</a> <a id="2224" href="MJ.Classtable.Membership.html#960" class="Function">IsMember</a> <a id="2233" href="MJ.Semantics.Values.html#2210" class="Bound">c</a> <a id="2235" href="MJ.Classtable.Core.html#657" class="InductiveConstructor">FIELD</a> <a id="2241" href="MJ.Semantics.Values.html#2205" class="Bound">m</a> <a id="2243" href="MJ.Semantics.Values.html#2207" class="Bound">a</a> <a id="2245" class="Symbol">→</a> <a id="2247" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="2251" href="MJ.Semantics.Values.html#2203" class="Bound">W</a> <a id="2253" href="MJ.Semantics.Values.html#2207" class="Bound">a</a>
    <a id="ObjEncoding.setter" href="MJ.Semantics.Values.html#ObjEncoding.setter" class="Field">setter</a> <a id="2266" class="Symbol">:</a> <a id="2268" class="Symbol">∀</a> <a id="2270" class="Symbol">{</a><a id="2271" href="MJ.Semantics.Values.html#2271" class="Bound">W</a> <a id="2273" href="MJ.Semantics.Values.html#2273" class="Bound">m</a> <a id="2275" href="MJ.Semantics.Values.html#2275" class="Bound">a</a><a id="2276" class="Symbol">}</a> <a id="2278" href="MJ.Semantics.Values.html#2278" class="Bound">c</a> <a id="2280" class="Symbol">→</a> <a id="2282" href="MJ.Semantics.Values.html#ObjEncoding.Obj" class="Field">Obj</a> <a id="2286" href="MJ.Semantics.Values.html#2271" class="Bound">W</a> <a id="2288" href="MJ.Semantics.Values.html#2278" class="Bound">c</a> <a id="2290" class="Symbol">→</a> <a id="2292" href="MJ.Classtable.Membership.html#960" class="Function">IsMember</a> <a id="2301" href="MJ.Semantics.Values.html#2278" class="Bound">c</a> <a id="2303" href="MJ.Classtable.Core.html#657" class="InductiveConstructor">FIELD</a> <a id="2309" href="MJ.Semantics.Values.html#2273" class="Bound">m</a> <a id="2311" href="MJ.Semantics.Values.html#2275" class="Bound">a</a> <a id="2313" class="Symbol">→</a> <a id="2315" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="2319" href="MJ.Semantics.Values.html#2271" class="Bound">W</a> <a id="2321" href="MJ.Semantics.Values.html#2275" class="Bound">a</a> <a id="2323" class="Symbol">→</a> <a id="2325" href="MJ.Semantics.Values.html#ObjEncoding.Obj" class="Field">Obj</a> <a id="2329" href="MJ.Semantics.Values.html#2271" class="Bound">W</a> <a id="2331" href="MJ.Semantics.Values.html#2278" class="Bound">c</a>
    <a id="ObjEncoding.defaultObject" href="MJ.Semantics.Values.html#ObjEncoding.defaultObject" class="Field">defaultObject</a> <a id="2351" class="Symbol">:</a> <a id="2353" class="Symbol">∀</a> <a id="2355" class="Symbol">{</a><a id="2356" href="MJ.Semantics.Values.html#2356" class="Bound">W</a><a id="2357" class="Symbol">}</a> <a id="2359" href="MJ.Semantics.Values.html#2359" class="Bound">c</a> <a id="2361" class="Symbol">→</a> <a id="2363" href="MJ.Semantics.Values.html#ObjEncoding.Obj" class="Field">Obj</a> <a id="2367" href="MJ.Semantics.Values.html#2356" class="Bound">W</a> <a id="2369" href="MJ.Semantics.Values.html#2359" class="Bound">c</a>

  <a id="2374" class="Keyword">data</a> <a id="ObjEncoding.StoreVal" href="MJ.Semantics.Values.html#ObjEncoding.StoreVal" class="Datatype">StoreVal</a> <a id="2388" class="Symbol">(</a><a id="2389" href="MJ.Semantics.Values.html#2389" class="Bound">W</a> <a id="2391" class="Symbol">:</a> <a id="2393" href="MJ.Types.html#World" class="Function">World</a> <a id="2399" href="MJ.Semantics.Values.html#94" class="Bound">c</a><a id="2400" class="Symbol">)</a> <a id="2402" class="Symbol">:</a> <a id="2404" href="MJ.Types.html#Ty%E2%81%BA" class="Datatype">Ty⁺</a> <a id="2408" href="MJ.Semantics.Values.html#94" class="Bound">c</a> <a id="2410" class="Symbol">→</a> <a id="2412" class="PrimitiveType">Set</a> <a id="2416" class="Keyword">where</a>
    <a id="ObjEncoding.StoreVal.val" href="MJ.Semantics.Values.html#ObjEncoding.StoreVal.val" class="InductiveConstructor">val</a> <a id="2430" class="Symbol">:</a> <a id="2432" class="Symbol">∀</a> <a id="2434" class="Symbol">{</a><a id="2435" href="MJ.Semantics.Values.html#2435" class="Bound">ty</a><a id="2437" class="Symbol">}</a> <a id="2439" class="Symbol">→</a> <a id="2441" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="2445" href="MJ.Semantics.Values.html#2389" class="Bound">W</a> <a id="2447" href="MJ.Semantics.Values.html#2435" class="Bound">ty</a> <a id="2450" class="Symbol">→</a> <a id="2452" href="MJ.Semantics.Values.html#ObjEncoding.StoreVal" class="Datatype">StoreVal</a> <a id="2461" href="MJ.Semantics.Values.html#2389" class="Bound">W</a> <a id="2463" class="Symbol">(</a><a id="2464" href="MJ.Types.html#Ty%E2%81%BA.vty" class="InductiveConstructor">vty</a> <a id="2468" href="MJ.Semantics.Values.html#2435" class="Bound">ty</a><a id="2470" class="Symbol">)</a>
    <a id="ObjEncoding.StoreVal.obj" href="MJ.Semantics.Values.html#ObjEncoding.StoreVal.obj" class="InductiveConstructor">obj</a> <a id="2480" class="Symbol">:</a> <a id="2482" class="Symbol">∀</a> <a id="2484" href="MJ.Semantics.Values.html#2484" class="Bound">cid</a> <a id="2488" class="Symbol">→</a> <a id="2490" href="MJ.Semantics.Values.html#ObjEncoding.Obj" class="Field">Obj</a> <a id="2494" href="MJ.Semantics.Values.html#2389" class="Bound">W</a> <a id="2496" href="MJ.Semantics.Values.html#2484" class="Bound">cid</a> <a id="2500" class="Symbol">→</a> <a id="2502" href="MJ.Semantics.Values.html#ObjEncoding.StoreVal" class="Datatype">StoreVal</a> <a id="2511" href="MJ.Semantics.Values.html#2389" class="Bound">W</a> <a id="2513" class="Symbol">(</a><a id="2514" href="MJ.Types.html#Ty%E2%81%BA.obj" class="InductiveConstructor">obj</a> <a id="2518" href="MJ.Semantics.Values.html#2484" class="Bound">cid</a><a id="2521" class="Symbol">)</a>

  <a id="ObjEncoding.Store" href="MJ.Semantics.Values.html#ObjEncoding.Store" class="Function">Store</a> <a id="2532" class="Symbol">:</a> <a id="2534" href="MJ.Types.html#World" class="Function">World</a> <a id="2540" href="MJ.Semantics.Values.html#94" class="Bound">c</a> <a id="2542" class="Symbol">→</a> <a id="2544" class="PrimitiveType">Set</a>
  <a id="2550" href="MJ.Semantics.Values.html#ObjEncoding.Store" class="Function">Store</a> <a id="2556" href="MJ.Semantics.Values.html#2556" class="Bound">W</a> <a id="2558" class="Symbol">=</a> <a id="2560" href="Data.List.All.html#All" class="Datatype">All</a> <a id="2564" class="Symbol">(</a><a id="2565" href="MJ.Semantics.Values.html#ObjEncoding.StoreVal" class="Datatype">StoreVal</a> <a id="2574" href="MJ.Semantics.Values.html#2556" class="Bound">W</a><a id="2575" class="Symbol">)</a> <a id="2577" href="MJ.Semantics.Values.html#2556" class="Bound">W</a>

<a id="2580" class="Comment">{-
Value weakening
-}</a>
<a id="weaken-val" href="MJ.Semantics.Values.html#weaken-val" class="Function">weaken-val</a> <a id="2613" class="Symbol">:</a> <a id="2615" class="Symbol">∀</a> <a id="2617" class="Symbol">{</a><a id="2618" href="MJ.Semantics.Values.html#2618" class="Bound">a</a><a id="2619" class="Symbol">}{</a><a id="2621" href="MJ.Semantics.Values.html#2621" class="Bound">W</a> <a id="2623" href="MJ.Semantics.Values.html#2623" class="Bound">W&#39;</a> <a id="2626" class="Symbol">:</a> <a id="2628" href="MJ.Types.html#World" class="Function">World</a> <a id="2634" href="MJ.Semantics.Values.html#94" class="Bound">c</a><a id="2635" class="Symbol">}</a> <a id="2637" class="Symbol">→</a> <a id="2639" href="MJ.Semantics.Values.html#2621" class="Bound">W</a> <a id="2641" href="Data.List.Prefix.html#_%E2%8A%92_" class="Function Operator">⊒</a> <a id="2643" href="MJ.Semantics.Values.html#2623" class="Bound">W&#39;</a> <a id="2646" class="Symbol">→</a> <a id="2648" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="2652" href="MJ.Semantics.Values.html#2623" class="Bound">W&#39;</a> <a id="2655" href="MJ.Semantics.Values.html#2618" class="Bound">a</a> <a id="2657" class="Symbol">→</a> <a id="2659" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="2663" href="MJ.Semantics.Values.html#2621" class="Bound">W</a> <a id="2665" href="MJ.Semantics.Values.html#2618" class="Bound">a</a>
<a id="2667" href="MJ.Semantics.Values.html#weaken-val" class="Function">weaken-val</a> <a id="2678" href="MJ.Semantics.Values.html#2678" class="Bound">ext</a> <a id="2682" class="Symbol">(</a><a id="2683" href="MJ.Semantics.Values.html#Val.num" class="InductiveConstructor">num</a> <a id="2687" href="MJ.Semantics.Values.html#2687" class="Bound">n</a><a id="2688" class="Symbol">)</a> <a id="2690" class="Symbol">=</a> <a id="2692" href="MJ.Semantics.Values.html#Val.num" class="InductiveConstructor">num</a> <a id="2696" href="MJ.Semantics.Values.html#2687" class="Bound">n</a>
<a id="2698" href="MJ.Semantics.Values.html#weaken-val" class="Function">weaken-val</a> <a id="2709" href="MJ.Semantics.Values.html#2709" class="Bound">ext</a> <a id="2713" href="MJ.Semantics.Values.html#Val.unit" class="InductiveConstructor">unit</a> <a id="2718" class="Symbol">=</a> <a id="2720" href="MJ.Semantics.Values.html#Val.unit" class="InductiveConstructor">unit</a>
<a id="2725" href="MJ.Semantics.Values.html#weaken-val" class="Function">weaken-val</a> <a id="2736" href="MJ.Semantics.Values.html#2736" class="Bound">ext</a> <a id="2740" href="MJ.Semantics.Values.html#Val.null" class="InductiveConstructor">null</a> <a id="2745" class="Symbol">=</a> <a id="2747" href="MJ.Semantics.Values.html#Val.null" class="InductiveConstructor">null</a>
<a id="2752" href="MJ.Semantics.Values.html#weaken-val" class="Function">weaken-val</a> <a id="2763" href="MJ.Semantics.Values.html#2763" class="Bound">ext</a> <a id="2767" class="Symbol">(</a><a id="2768" href="MJ.Semantics.Values.html#Val.ref" class="InductiveConstructor">ref</a> <a id="2772" href="MJ.Semantics.Values.html#2772" class="Bound">x</a> <a id="2774" href="MJ.Semantics.Values.html#2774" class="Bound">sub</a><a id="2777" class="Symbol">)</a> <a id="2779" class="Symbol">=</a> <a id="2781" href="MJ.Semantics.Values.html#Val.ref" class="InductiveConstructor">ref</a> <a id="2785" class="Symbol">(</a><a id="2786" href="Data.List.Prefix.html#%E2%88%88-%E2%8A%92" class="Function">∈-⊒</a> <a id="2790" href="MJ.Semantics.Values.html#2772" class="Bound">x</a> <a id="2792" href="MJ.Semantics.Values.html#2763" class="Bound">ext</a><a id="2795" class="Symbol">)</a> <a id="2797" href="MJ.Semantics.Values.html#2774" class="Bound">sub</a>

<a id="2802" class="Keyword">instance</a>

  <a id="val-weakenable" href="MJ.Semantics.Values.html#val-weakenable" class="Function">val-weakenable</a> <a id="2829" class="Symbol">:</a> <a id="2831" class="Symbol">∀</a> <a id="2833" class="Symbol">{</a><a id="2834" href="MJ.Semantics.Values.html#2834" class="Bound">a</a><a id="2835" class="Symbol">}</a> <a id="2837" class="Symbol">→</a> <a id="2839" href="Common.Weakening.html#Weakenable" class="Record">Weakenable</a> <a id="2850" class="Symbol">(λ</a> <a id="2853" href="MJ.Semantics.Values.html#2853" class="Bound">W</a> <a id="2855" class="Symbol">→</a> <a id="2857" href="MJ.Semantics.Values.html#Val" class="Datatype">Val</a> <a id="2861" href="MJ.Semantics.Values.html#2853" class="Bound">W</a> <a id="2863" href="MJ.Semantics.Values.html#2834" class="Bound">a</a><a id="2864" class="Symbol">)</a>
  <a id="2868" href="MJ.Semantics.Values.html#val-weakenable" class="Function">val-weakenable</a> <a id="2883" class="Symbol">=</a> <a id="2885" class="Keyword">record</a> <a id="2892" class="Symbol">{</a> <a id="2894" class="Field">wk</a> <a id="2897" class="Symbol">=</a> <a id="2899" href="MJ.Semantics.Values.html#weaken-val" class="Function">weaken-val</a> <a id="2910" class="Symbol">}</a>

  <a id="list-weakenable" href="MJ.Semantics.Values.html#list-weakenable" class="Function">list-weakenable</a> <a id="2931" class="Symbol">:</a> <a id="2933" class="Symbol">∀</a> <a id="2935" class="Symbol">{</a><a id="2936" href="MJ.Semantics.Values.html#2936" class="Bound">a</a><a id="2937" class="Symbol">}{</a><a id="2939" href="MJ.Semantics.Values.html#2939" class="Bound">A</a> <a id="2941" class="Symbol">:</a> <a id="2943" href="MJ.Types.html#World" class="Function">World</a> <a id="2949" href="MJ.Semantics.Values.html#94" class="Bound">c</a> <a id="2951" class="Symbol">→</a> <a id="2953" class="PrimitiveType">Set</a> <a id="2957" href="MJ.Semantics.Values.html#2936" class="Bound">a</a><a id="2958" class="Symbol">}⦃</a> <a id="2961" href="MJ.Semantics.Values.html#2961" class="Bound">wₐ</a> <a id="2964" class="Symbol">:</a> <a id="2966" href="Common.Weakening.html#Weakenable" class="Record">Weakenable</a> <a id="2977" href="MJ.Semantics.Values.html#2939" class="Bound">A</a> <a id="2979" class="Symbol">⦄</a> <a id="2981" class="Symbol">→</a> <a id="2983" href="Common.Weakening.html#Weakenable" class="Record">Weakenable</a> <a id="2994" class="Symbol">(λ</a> <a id="2997" href="MJ.Semantics.Values.html#2997" class="Bound">W</a> <a id="2999" class="Symbol">→</a> <a id="3001" href="Agda.Builtin.List.html#List" class="Datatype">List</a> <a id="3006" class="Symbol">(</a><a id="3007" href="MJ.Semantics.Values.html#2939" class="Bound">A</a> <a id="3009" href="MJ.Semantics.Values.html#2997" class="Bound">W</a><a id="3010" class="Symbol">))</a>
  <a id="3015" href="MJ.Semantics.Values.html#list-weakenable" class="Function">list-weakenable</a> <a id="3031" class="Symbol">⦃</a> <a id="3033" href="MJ.Semantics.Values.html#3033" class="Bound">wₐ</a> <a id="3036" class="Symbol">⦄</a> <a id="3038" class="Symbol">=</a> <a id="3040" class="Keyword">record</a> <a id="3047" class="Symbol">{</a><a id="3048" class="Field">wk</a> <a id="3051" class="Symbol">=</a> <a id="3053" class="Symbol">λ</a> <a id="3055" href="MJ.Semantics.Values.html#3055" class="Bound">ext</a> <a id="3059" href="MJ.Semantics.Values.html#3059" class="Bound">v</a> <a id="3061" class="Symbol">→</a> <a id="3063" href="Data.List.Base.html#map" class="Function">List.map</a> <a id="3072" class="Symbol">(</a><a id="3073" href="Common.Weakening.html#228" class="Field">wk</a> <a id="3076" href="MJ.Semantics.Values.html#3055" class="Bound">ext</a><a id="3079" class="Symbol">)</a> <a id="3081" href="MJ.Semantics.Values.html#3059" class="Bound">v</a> <a id="3083" class="Symbol">}</a>

  <a id="list∀-weakenable" href="MJ.Semantics.Values.html#list%E2%88%80-weakenable" class="Function">list∀-weakenable</a> <a id="3105" class="Symbol">:</a> <a id="3107" class="Symbol">∀</a> <a id="3109" class="Symbol">{</a><a id="3110" href="MJ.Semantics.Values.html#3110" class="Bound">b</a><a id="3111" class="Symbol">}{</a><a id="3113" href="MJ.Semantics.Values.html#3113" class="Bound">B</a> <a id="3115" class="Symbol">:</a> <a id="3117" class="PrimitiveType">Set</a> <a id="3121" href="MJ.Semantics.Values.html#3110" class="Bound">b</a><a id="3122" class="Symbol">}{</a><a id="3124" href="MJ.Semantics.Values.html#3124" class="Bound">xs</a> <a id="3127" class="Symbol">:</a> <a id="3129" href="Agda.Builtin.List.html#List" class="Datatype">List</a> <a id="3134" href="MJ.Semantics.Values.html#3113" class="Bound">B</a><a id="3135" class="Symbol">}</a>
                     <a id="3158" class="Symbol">{</a><a id="3159" href="MJ.Semantics.Values.html#3159" class="Bound">a</a><a id="3160" class="Symbol">}{</a><a id="3162" href="MJ.Semantics.Values.html#3162" class="Bound">A</a> <a id="3164" class="Symbol">:</a> <a id="3166" href="MJ.Semantics.Values.html#3113" class="Bound">B</a> <a id="3168" class="Symbol">→</a> <a id="3170" href="MJ.Types.html#World" class="Function">World</a> <a id="3176" href="MJ.Semantics.Values.html#94" class="Bound">c</a> <a id="3178" class="Symbol">→</a> <a id="3180" class="PrimitiveType">Set</a> <a id="3184" href="MJ.Semantics.Values.html#3159" class="Bound">a</a><a id="3185" class="Symbol">}⦃</a> <a id="3188" href="MJ.Semantics.Values.html#3188" class="Bound">wₐ</a> <a id="3191" class="Symbol">:</a> <a id="3193" class="Symbol">∀</a> <a id="3195" href="MJ.Semantics.Values.html#3195" class="Bound">x</a> <a id="3197" class="Symbol">→</a> <a id="3199" href="Common.Weakening.html#Weakenable" class="Record">Weakenable</a> <a id="3210" class="Symbol">(</a><a id="3211" href="MJ.Semantics.Values.html#3162" class="Bound">A</a> <a id="3213" href="MJ.Semantics.Values.html#3195" class="Bound">x</a><a id="3214" class="Symbol">)</a> <a id="3216" class="Symbol">⦄</a> <a id="3218" class="Symbol">→</a>
                     <a id="3241" href="Common.Weakening.html#Weakenable" class="Record">Weakenable</a> <a id="3252" class="Symbol">(λ</a> <a id="3255" href="MJ.Semantics.Values.html#3255" class="Bound">W</a> <a id="3257" class="Symbol">→</a> <a id="3259" href="Data.List.All.html#All" class="Datatype">All</a> <a id="3263" class="Symbol">(λ</a> <a id="3266" href="MJ.Semantics.Values.html#3266" class="Bound">x</a> <a id="3268" class="Symbol">→</a> <a id="3270" href="MJ.Semantics.Values.html#3162" class="Bound">A</a> <a id="3272" href="MJ.Semantics.Values.html#3266" class="Bound">x</a> <a id="3274" href="MJ.Semantics.Values.html#3255" class="Bound">W</a><a id="3275" class="Symbol">)</a> <a id="3277" href="MJ.Semantics.Values.html#3124" class="Bound">xs</a><a id="3279" class="Symbol">)</a>
  <a id="3283" href="MJ.Semantics.Values.html#list%E2%88%80-weakenable" class="Function">list∀-weakenable</a> <a id="3300" class="Symbol">⦃</a> <a id="3302" href="MJ.Semantics.Values.html#3302" class="Bound">wₐ</a> <a id="3305" class="Symbol">⦄</a> <a id="3307" class="Symbol">=</a> <a id="3309" class="Keyword">record</a> <a id="3316" class="Symbol">{</a> <a id="3318" class="Field">wk</a> <a id="3321" class="Symbol">=</a> <a id="3323" class="Symbol">λ</a> <a id="3325" href="MJ.Semantics.Values.html#3325" class="Bound">ext</a> <a id="3329" href="MJ.Semantics.Values.html#3329" class="Bound">v</a> <a id="3331" class="Symbol">→</a> <a id="3333" href="Data.List.All.html#map" class="Function">List∀.map</a> <a id="3343" class="Symbol">(λ</a> <a id="3346" href="MJ.Semantics.Values.html#3346" class="Bound">y</a> <a id="3348" class="Symbol">→</a> <a id="3350" href="Common.Weakening.html#228" class="Field">wk</a> <a id="3353" class="Symbol">⦃</a> <a id="3355" href="MJ.Semantics.Values.html#3302" class="Bound">wₐ</a> <a id="3358" class="Symbol">_</a> <a id="3360" class="Symbol">⦄</a> <a id="3362" href="MJ.Semantics.Values.html#3325" class="Bound">ext</a> <a id="3366" href="MJ.Semantics.Values.html#3346" class="Bound">y</a><a id="3367" class="Symbol">)</a> <a id="3369" href="MJ.Semantics.Values.html#3329" class="Bound">v</a> <a id="3371" class="Symbol">}</a>

</pre></body></html>