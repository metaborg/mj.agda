<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>MJSF.Syntax</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="Data.Nat.html" class="Module">Data.Nat</a>
<a id="22" class="Keyword">open</a> <a id="27" class="Keyword">import</a> <a id="34" href="Data.Fin.html" class="Module">Data.Fin</a> <a id="43" class="Keyword">using</a> <a id="49" class="Symbol">(</a><a id="50" href="Data.Fin.html#Fin" class="Datatype">Fin</a><a id="53" class="Symbol">;</a> <a id="55" href="Data.Fin.html#%23_" class="Function Operator">#_</a><a id="57" class="Symbol">;</a> <a id="59" href="Data.Fin.html#Fin.suc" class="InductiveConstructor">suc</a><a id="62" class="Symbol">;</a> <a id="64" href="Data.Fin.html#Fin.zero" class="InductiveConstructor">zero</a><a id="68" class="Symbol">)</a>
<a id="70" class="Keyword">open</a> <a id="75" class="Keyword">import</a> <a id="82" href="Data.List.Most.html" class="Module">Data.List.Most</a>
<a id="97" class="Keyword">open</a> <a id="102" class="Keyword">import</a> <a id="109" href="Data.Integer.html" class="Module">Data.Integer</a> <a id="122" class="Keyword">hiding</a> <a id="129" class="Symbol">(</a><a id="130" href="Data.Integer.Base.html#suc" class="Function">suc</a><a id="133" class="Symbol">)</a>
<a id="135" class="Keyword">open</a> <a id="140" class="Keyword">import</a> <a id="147" href="Data.Product.html" class="Module">Data.Product</a> <a id="160" class="Keyword">hiding</a> <a id="167" class="Symbol">(</a><a id="168" href="Data.Product.html#map" class="Function">map</a><a id="171" class="Symbol">)</a>
<a id="173" class="Keyword">open</a> <a id="178" class="Keyword">import</a> <a id="185" href="Data.Unit.html" class="Module">Data.Unit</a>
<a id="195" class="Keyword">open</a> <a id="200" class="Keyword">import</a> <a id="207" href="Data.Star.html" class="Module">Data.Star</a> <a id="217" class="Keyword">hiding</a> <a id="224" class="Symbol">(</a><a id="225" href="Data.Star.html#return" class="Function">return</a> <a id="232" class="Symbol">;</a> <a id="234" href="Data.Star.html#_%3E%3E%3D_" class="Function Operator">_&gt;&gt;=_</a> <a id="240" class="Symbol">;</a> <a id="242" href="Data.Star.html#map" class="Function">map</a><a id="245" class="Symbol">)</a>
<a id="247" class="Keyword">open</a> <a id="252" class="Keyword">import</a> <a id="259" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="297" class="Keyword">hiding</a> <a id="304" class="Symbol">(</a><a id="305" href="Relation.Binary.PropositionalEquality.html#Reveal_%C2%B7_is_.%5B_%5D" class="InductiveConstructor Operator">[_]</a><a id="308" class="Symbol">)</a>
<a id="310" class="Keyword">open</a> <a id="315" href="Relation.Binary.PropositionalEquality.html#%E2%89%A1-Reasoning" class="Module">≡-Reasoning</a>
<a id="327" class="Keyword">open</a> <a id="332" class="Keyword">import</a> <a id="339" href="Data.Empty.html" class="Module">Data.Empty</a>

<a id="351" class="Comment">-- This file contains the syntax for the definitional interpreter for</a>
<a id="421" class="Comment">-- MJ using scopes and frames, described in Section 5 of the paper.</a>

<a id="490" class="Comment">-- The definitions are parameterized by a scope graph of size `k`, as</a>
<a id="560" class="Comment">-- usual:</a>

<a id="571" class="Keyword">module</a> <a id="578" href="MJSF.Syntax.html" class="Module">MJSF.Syntax</a> <a id="590" class="Symbol">(</a><a id="591" href="MJSF.Syntax.html#591" class="Bound">k</a> <a id="593" class="Symbol">:</a> <a id="595" href="Agda.Builtin.Nat.html#%E2%84%95" class="Datatype">ℕ</a><a id="596" class="Symbol">)</a> <a id="598" class="Keyword">where</a>

<a id="605" class="Keyword">private</a>
  <a id="Scope" href="MJSF.Syntax.html#Scope" class="Function">Scope</a> <a id="621" class="Symbol">:</a> <a id="623" class="PrimitiveType">Set</a>
  <a id="629" href="MJSF.Syntax.html#Scope" class="Function">Scope</a> <a id="635" class="Symbol">=</a> <a id="637" href="Data.Fin.html#Fin" class="Datatype">Fin</a> <a id="641" href="MJSF.Syntax.html#591" class="Bound">k</a>

<a id="644" class="Comment">-- Return types, method parameters, and field types in MJ are given by</a>
<a id="715" class="Comment">-- `VTy`:</a>

<a id="726" class="Keyword">data</a> <a id="VTy" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="735" class="Symbol">:</a> <a id="737" class="PrimitiveType">Set</a> <a id="741" class="Keyword">where</a>
  <a id="VTy.void" href="MJSF.Syntax.html#VTy.void" class="InductiveConstructor">void</a> <a id="754" class="Symbol">:</a> <a id="756" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a>
  <a id="VTy.int" href="MJSF.Syntax.html#VTy.int" class="InductiveConstructor">int</a> <a id="766" class="Symbol">:</a> <a id="768" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a>
  <a id="VTy.ref" href="MJSF.Syntax.html#VTy.ref" class="InductiveConstructor">ref</a> <a id="778" class="Symbol">:</a> <a id="780" href="MJSF.Syntax.html#Scope" class="Function">Scope</a> <a id="786" class="Symbol">→</a> <a id="788" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a>

<a id="793" class="Comment">-- The scope graph library is parameterized by a single kind of type,</a>
<a id="863" class="Comment">-- to be used for all declarations.  But there are three different</a>
<a id="930" class="Comment">-- kinds of names (declarations) in MJ: value declarations (e.g., for</a>
<a id="1000" class="Comment">-- fields and method parameters); method declarations; and class</a>
<a id="1065" class="Comment">-- declarations.</a>
<a id="1082" class="Comment">--</a>
<a id="1085" class="Comment">-- We use the following type to &quot;tag&quot; and distinguish the various</a>
<a id="1151" class="Comment">-- kinds of declarations.</a>

<a id="1178" class="Keyword">data</a> <a id="Ty" href="MJSF.Syntax.html#Ty" class="Datatype">Ty</a> <a id="1186" class="Symbol">:</a> <a id="1188" class="PrimitiveType">Set</a> <a id="1192" class="Keyword">where</a>
  <a id="Ty.vᵗ" href="MJSF.Syntax.html#Ty.v%E1%B5%97" class="InductiveConstructor">vᵗ</a> <a id="1203" class="Symbol">:</a> <a id="1205" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="1209" class="Symbol">→</a> <a id="1211" href="MJSF.Syntax.html#Ty" class="Datatype">Ty</a>
  <a id="Ty.mᵗ" href="MJSF.Syntax.html#Ty.m%E1%B5%97" class="InductiveConstructor">mᵗ</a> <a id="1219" class="Symbol">:</a> <a id="1221" href="Agda.Builtin.List.html#List" class="Datatype">List</a> <a id="1226" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="1230" class="Symbol">→</a> <a id="1232" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="1236" class="Symbol">→</a> <a id="1238" href="MJSF.Syntax.html#Ty" class="Datatype">Ty</a>
  <a id="Ty.cᵗ" href="MJSF.Syntax.html#Ty.c%E1%B5%97" class="InductiveConstructor">cᵗ</a> <a id="1246" class="Symbol">:</a> <a id="1248" href="MJSF.Syntax.html#Scope" class="Function">Scope</a> <a id="1254" class="Symbol">→</a> <a id="1256" href="MJSF.Syntax.html#Scope" class="Function">Scope</a> <a id="1262" class="Symbol">→</a> <a id="1264" href="MJSF.Syntax.html#Ty" class="Datatype">Ty</a>

<a id="1268" class="Comment">-- We specialize the scopes-and-frames library to the size of our</a>
<a id="1334" class="Comment">-- scope graph, and the tagged type for declarations above:</a>

<a id="1395" class="Keyword">open</a> <a id="1400" class="Keyword">import</a> <a id="1407" href="ScopesFrames.ScopesFrames.html" class="Module">ScopesFrames.ScopesFrames</a> <a id="1433" href="MJSF.Syntax.html#591" class="Bound">k</a> <a id="1435" href="MJSF.Syntax.html#Ty" class="Datatype">Ty</a> <a id="1438" class="Keyword">hiding</a> <a id="1445" class="Symbol">(</a>Scope<a id="1451" class="Symbol">)</a>


<a id="1455" class="Comment">-------------</a>
<a id="1469" class="Comment">-- HAS TAG --</a>
<a id="1483" class="Comment">-------------</a>

<a id="1498" class="Comment">-- As summarized above, declarations may be either value-typed,</a>
<a id="1562" class="Comment">-- method-typed, or class-typed.  We introduce some parameterized</a>
<a id="1628" class="Comment">-- predicates which only hold for a particular tag.  This is useful</a>
<a id="1696" class="Comment">-- for saying that some list of types `ts : List Ty` only contains</a>
<a id="1763" class="Comment">-- value types, and that a particular property holds for each of those</a>
<a id="1834" class="Comment">-- value types.  For example, the type `All (#v (λ _ → ⊤)) ts`</a>
<a id="1897" class="Comment">-- guarantees that `ts` contains only value types, and does not</a>
<a id="1961" class="Comment">-- constrain the value types further (due to the use of `⊤`).</a>

<a id="2024" class="Keyword">data</a> <a id="#v" href="MJSF.Syntax.html#%23v" class="Datatype">#v</a> <a id="2032" class="Symbol">:</a> <a id="2034" class="Symbol">(</a><a id="2035" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="2039" class="Symbol">→</a> <a id="2041" class="PrimitiveType">Set</a><a id="2044" class="Symbol">)</a> <a id="2046" class="Symbol">→</a> <a id="2048" href="MJSF.Syntax.html#Ty" class="Datatype">Ty</a> <a id="2051" class="Symbol">→</a> <a id="2053" class="PrimitiveType">Set</a> <a id="2057" class="Keyword">where</a>
  <a id="#v.#v&#39;" href="MJSF.Syntax.html#%23v.%23v%27" class="InductiveConstructor">#v&#39;</a> <a id="2069" class="Symbol">:</a> <a id="2071" class="Symbol">∀</a> <a id="2073" class="Symbol">{</a><a id="2074" href="MJSF.Syntax.html#2074" class="Bound">t</a> <a id="2076" href="MJSF.Syntax.html#2076" class="Bound">p</a><a id="2077" class="Symbol">}</a> <a id="2079" class="Symbol">→</a> <a id="2081" href="MJSF.Syntax.html#2076" class="Bound">p</a> <a id="2083" href="MJSF.Syntax.html#2074" class="Bound">t</a> <a id="2085" class="Symbol">→</a> <a id="2087" href="MJSF.Syntax.html#%23v" class="Datatype">#v</a> <a id="2090" href="MJSF.Syntax.html#2076" class="Bound">p</a> <a id="2092" class="Symbol">(</a><a id="2093" href="MJSF.Syntax.html#Ty.v%E1%B5%97" class="InductiveConstructor">vᵗ</a> <a id="2096" href="MJSF.Syntax.html#2074" class="Bound">t</a><a id="2097" class="Symbol">)</a>

<a id="2100" class="Keyword">data</a> <a id="#m" href="MJSF.Syntax.html#%23m" class="Datatype">#m</a> <a id="2108" class="Symbol">:</a> <a id="2110" class="Symbol">(</a><a id="2111" href="Agda.Builtin.List.html#List" class="Datatype">List</a> <a id="2116" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="2120" class="Symbol">→</a> <a id="2122" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="2126" class="Symbol">→</a> <a id="2128" class="PrimitiveType">Set</a><a id="2131" class="Symbol">)</a> <a id="2133" class="Symbol">→</a> <a id="2135" href="MJSF.Syntax.html#Ty" class="Datatype">Ty</a> <a id="2138" class="Symbol">→</a> <a id="2140" class="PrimitiveType">Set</a> <a id="2144" class="Keyword">where</a>
  <a id="#m.#m&#39;" href="MJSF.Syntax.html#%23m.%23m%27" class="InductiveConstructor">#m&#39;</a> <a id="2156" class="Symbol">:</a> <a id="2158" class="Symbol">∀</a> <a id="2160" class="Symbol">{</a><a id="2161" href="MJSF.Syntax.html#2161" class="Bound">ts</a> <a id="2164" href="MJSF.Syntax.html#2164" class="Bound">rt</a> <a id="2167" href="MJSF.Syntax.html#2167" class="Bound">p</a><a id="2168" class="Symbol">}</a> <a id="2170" class="Symbol">→</a> <a id="2172" href="MJSF.Syntax.html#2167" class="Bound">p</a> <a id="2174" href="MJSF.Syntax.html#2161" class="Bound">ts</a> <a id="2177" href="MJSF.Syntax.html#2164" class="Bound">rt</a> <a id="2180" class="Symbol">→</a> <a id="2182" href="MJSF.Syntax.html#%23m" class="Datatype">#m</a> <a id="2185" href="MJSF.Syntax.html#2167" class="Bound">p</a> <a id="2187" class="Symbol">(</a><a id="2188" href="MJSF.Syntax.html#Ty.m%E1%B5%97" class="InductiveConstructor">mᵗ</a> <a id="2191" href="MJSF.Syntax.html#2161" class="Bound">ts</a> <a id="2194" href="MJSF.Syntax.html#2164" class="Bound">rt</a><a id="2196" class="Symbol">)</a>

<a id="2199" class="Keyword">data</a> <a id="#c" href="MJSF.Syntax.html#%23c" class="Datatype">#c</a> <a id="2207" class="Symbol">(</a><a id="2208" href="MJSF.Syntax.html#2208" class="Bound">sʳ</a> <a id="2211" class="Symbol">:</a> <a id="2213" href="MJSF.Syntax.html#Scope" class="Function">Scope</a><a id="2218" class="Symbol">)</a> <a id="2220" class="Symbol">(</a><a id="2221" href="MJSF.Syntax.html#2221" class="Bound">p</a> <a id="2223" class="Symbol">:</a> <a id="2225" href="MJSF.Syntax.html#Scope" class="Function">Scope</a> <a id="2231" class="Symbol">→</a> <a id="2233" class="PrimitiveType">Set</a><a id="2236" class="Symbol">)</a> <a id="2238" class="Symbol">:</a> <a id="2240" href="MJSF.Syntax.html#Ty" class="Datatype">Ty</a> <a id="2243" class="Symbol">→</a> <a id="2245" class="PrimitiveType">Set</a> <a id="2249" class="Keyword">where</a>
  <a id="#c.#c&#39;" href="MJSF.Syntax.html#%23c.%23c%27" class="InductiveConstructor">#c&#39;</a> <a id="2261" class="Symbol">:</a> <a id="2263" class="Symbol">∀</a> <a id="2265" class="Symbol">{</a><a id="2266" href="MJSF.Syntax.html#2266" class="Bound">s</a><a id="2267" class="Symbol">}</a> <a id="2269" class="Symbol">→</a> <a id="2271" href="MJSF.Syntax.html#2221" class="Bound">p</a> <a id="2273" href="MJSF.Syntax.html#2266" class="Bound">s</a> <a id="2275" class="Symbol">→</a> <a id="2277" href="MJSF.Syntax.html#%23c" class="Datatype">#c</a> <a id="2280" href="MJSF.Syntax.html#2208" class="Bound">sʳ</a> <a id="2283" href="MJSF.Syntax.html#2221" class="Bound">p</a> <a id="2285" class="Symbol">(</a><a id="2286" href="MJSF.Syntax.html#Ty.c%E1%B5%97" class="InductiveConstructor">cᵗ</a> <a id="2289" href="MJSF.Syntax.html#2208" class="Bound">sʳ</a> <a id="2292" href="MJSF.Syntax.html#2266" class="Bound">s</a><a id="2293" class="Symbol">)</a>


<a id="2297" class="Keyword">module</a> <a id="SyntaxG" href="MJSF.Syntax.html#SyntaxG" class="Module">SyntaxG</a> <a id="2312" class="Symbol">(</a><a id="2313" href="MJSF.Syntax.html#2313" class="Bound">g</a> <a id="2315" class="Symbol">:</a> <a id="2317" href="ScopesFrames.ScopesFrames.html#1611" class="Function">Graph</a><a id="2322" class="Symbol">)</a> <a id="2324" class="Keyword">where</a>

  <a id="2333" class="Keyword">open</a> <a id="2338" href="ScopesFrames.ScopesFrames.html#UsesGraph" class="Module">UsesGraph</a> <a id="2348" href="MJSF.Syntax.html#2313" class="Bound">g</a>


  <a id="2354" class="Comment">-------------------------------</a>
  <a id="2388" class="Comment">-- SUBTYPING AND INHERITANCE --</a>
  <a id="2422" class="Comment">-------------------------------</a>

  <a id="2457" class="Comment">-- As summarized in the paper, we define sub-typing in terms of</a>
  <a id="2523" class="Comment">-- inheritance edges between class scopes in the scope graph:</a>

  <a id="SyntaxG._&lt;:_" href="MJSF.Syntax.html#SyntaxG._%3C%3A_" class="Function Operator">_&lt;:_</a> <a id="2593" class="Symbol">:</a> <a id="2595" href="MJSF.Syntax.html#Scope" class="Function">Scope</a> <a id="2601" class="Symbol">→</a> <a id="2603" href="MJSF.Syntax.html#Scope" class="Function">Scope</a> <a id="2609" class="Symbol">→</a> <a id="2611" class="PrimitiveType">Set</a>
  <a id="2617" href="MJSF.Syntax.html#SyntaxG._%3C%3A_" class="Function Operator">_&lt;:_</a> <a id="2622" class="Symbol">=</a> <a id="2624" href="ScopesFrames.ScopesFrames.html#2073" class="Datatype Operator">_⟶_</a>

  <a id="2631" class="Comment">-- Scope graphs may be cyclic, and there is (in theory) nothing that</a>
  <a id="2702" class="Comment">-- prevents classes from mutually extending one another, thereby</a>
  <a id="2769" class="Comment">-- creating cyclic inheritance chains.  The following `Inherits`</a>
  <a id="2836" class="Comment">-- type witnesses that a given class scope has a finite set of</a>
  <a id="2901" class="Comment">-- inheritance steps.  This property is useful for defining object</a>
  <a id="2970" class="Comment">-- initialization in a way that lets Agda prove that object</a>
  <a id="3032" class="Comment">-- initialization takes finite time (i.e., no need for fuel).</a>

  <a id="3097" class="Keyword">data</a> <a id="SyntaxG.Inherits" href="MJSF.Syntax.html#SyntaxG.Inherits" class="Datatype">Inherits</a> <a id="3111" class="Symbol">:</a> <a id="3113" href="MJSF.Syntax.html#Scope" class="Function">Scope</a> <a id="3119" class="Symbol">→</a> <a id="3121" href="MJSF.Syntax.html#Scope" class="Function">Scope</a> <a id="3127" class="Symbol">→</a> <a id="3129" class="PrimitiveType">Set</a> <a id="3133" class="Keyword">where</a>
    <a id="SyntaxG.Inherits.obj" href="MJSF.Syntax.html#SyntaxG.Inherits.obj" class="InductiveConstructor">obj</a>   <a id="3149" class="Symbol">:</a> <a id="3151" class="Symbol">∀</a> <a id="3153" href="MJSF.Syntax.html#3153" class="Bound">s</a> <a id="3155" class="Symbol">{</a><a id="3156" href="MJSF.Syntax.html#3156" class="Bound">ds</a> <a id="3159" href="MJSF.Syntax.html#3159" class="Bound">sʳ</a><a id="3161" class="Symbol">}</a> <a id="3163" class="Symbol">⦃</a> <a id="3165" href="MJSF.Syntax.html#3165" class="Bound">shape</a> <a id="3171" class="Symbol">:</a> <a id="3173" href="MJSF.Syntax.html#2313" class="Bound">g</a> <a id="3175" href="MJSF.Syntax.html#3153" class="Bound">s</a> <a id="3177" href="Agda.Builtin.Equality.html#_%E2%89%A1_" class="Datatype Operator">≡</a> <a id="3179" class="Symbol">(</a><a id="3180" href="MJSF.Syntax.html#3156" class="Bound">ds</a> <a id="3183" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="3185" href="Data.List.Base.html#%5B_%5D" class="Function Operator">[</a> <a id="3187" href="MJSF.Syntax.html#3159" class="Bound">sʳ</a> <a id="3190" href="Data.List.Base.html#%5B_%5D" class="Function Operator">]</a><a id="3191" class="Symbol">)</a> <a id="3193" class="Symbol">⦄</a> <a id="3195" class="Symbol">→</a> <a id="3197" href="MJSF.Syntax.html#SyntaxG.Inherits" class="Datatype">Inherits</a> <a id="3206" href="MJSF.Syntax.html#3153" class="Bound">s</a> <a id="3208" href="MJSF.Syntax.html#3153" class="Bound">s</a>
    <a id="SyntaxG.Inherits.super" href="MJSF.Syntax.html#SyntaxG.Inherits.super" class="InductiveConstructor">super</a> <a id="3220" class="Symbol">:</a> <a id="3222" class="Symbol">∀</a> <a id="3224" class="Symbol">{</a><a id="3225" href="MJSF.Syntax.html#3225" class="Bound">s</a> <a id="3227" href="MJSF.Syntax.html#3227" class="Bound">ds</a> <a id="3230" href="MJSF.Syntax.html#3230" class="Bound">sʳ</a> <a id="3233" href="MJSF.Syntax.html#3233" class="Bound">sᵖ</a> <a id="3236" href="MJSF.Syntax.html#3236" class="Bound">s&#39;</a><a id="3238" class="Symbol">}</a> <a id="3240" class="Symbol">⦃</a> <a id="3242" href="MJSF.Syntax.html#3242" class="Bound">shape</a> <a id="3248" class="Symbol">:</a> <a id="3250" href="MJSF.Syntax.html#2313" class="Bound">g</a> <a id="3252" href="MJSF.Syntax.html#3225" class="Bound">s</a> <a id="3254" href="Agda.Builtin.Equality.html#_%E2%89%A1_" class="Datatype Operator">≡</a> <a id="3256" class="Symbol">(</a><a id="3257" href="MJSF.Syntax.html#3227" class="Bound">ds</a> <a id="3260" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="3262" href="MJSF.Syntax.html#3230" class="Bound">sʳ</a> <a id="3265" href="Agda.Builtin.List.html#List._%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="3267" href="MJSF.Syntax.html#3233" class="Bound">sᵖ</a> <a id="3270" href="Agda.Builtin.List.html#List._%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="3272" href="Agda.Builtin.List.html#List.%5B%5D" class="InductiveConstructor">[]</a><a id="3274" class="Symbol">)</a> <a id="3276" class="Symbol">⦄</a> <a id="3278" class="Symbol">→</a> <a id="3280" href="MJSF.Syntax.html#SyntaxG.Inherits" class="Datatype">Inherits</a> <a id="3289" href="MJSF.Syntax.html#3233" class="Bound">sᵖ</a> <a id="3292" href="MJSF.Syntax.html#3236" class="Bound">s&#39;</a> <a id="3295" class="Symbol">→</a> <a id="3297" href="MJSF.Syntax.html#SyntaxG.Inherits" class="Datatype">Inherits</a> <a id="3306" href="MJSF.Syntax.html#3225" class="Bound">s</a> <a id="3308" href="MJSF.Syntax.html#3236" class="Bound">s&#39;</a>


  <a id="3315" class="Comment">------------</a>
  <a id="3330" class="Comment">-- SYNTAX --</a>
  <a id="3345" class="Comment">------------</a>

  <a id="3361" class="Comment">-- The expressions of MJ where the `s` in `Expr s t` is the lexical</a>
  <a id="3431" class="Comment">-- context scope:</a>

  <a id="3452" class="Keyword">data</a> <a id="SyntaxG.Expr" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="3462" class="Symbol">(</a><a id="3463" href="MJSF.Syntax.html#3463" class="Bound">s</a> <a id="3465" class="Symbol">:</a> <a id="3467" href="MJSF.Syntax.html#Scope" class="Function">Scope</a><a id="3472" class="Symbol">)</a> <a id="3474" class="Symbol">:</a> <a id="3476" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="3480" class="Symbol">→</a> <a id="3482" class="PrimitiveType">Set</a> <a id="3486" class="Keyword">where</a>
    <a id="SyntaxG.Expr.call" href="MJSF.Syntax.html#SyntaxG.Expr.call" class="InductiveConstructor">call</a>     <a id="3505" class="Symbol">:</a>  <a id="3508" class="Symbol">∀</a> <a id="3510" class="Symbol">{</a><a id="3511" href="MJSF.Syntax.html#3511" class="Bound">s&#39;</a> <a id="3514" href="MJSF.Syntax.html#3514" class="Bound">ts</a> <a id="3517" href="MJSF.Syntax.html#3517" class="Bound">t</a><a id="3518" class="Symbol">}</a> <a id="3520" class="Symbol">→</a> <a id="3522" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="3527" href="MJSF.Syntax.html#3463" class="Bound">s</a> <a id="3529" class="Symbol">(</a><a id="3530" href="MJSF.Syntax.html#VTy.ref" class="InductiveConstructor">ref</a> <a id="3534" href="MJSF.Syntax.html#3511" class="Bound">s&#39;</a><a id="3536" class="Symbol">)</a> <a id="3538" class="Symbol">→</a> <a id="3540" class="Comment">-- receiver</a>
                <a id="3568" class="Symbol">(</a><a id="3569" href="MJSF.Syntax.html#3511" class="Bound">s&#39;</a> <a id="3572" href="ScopesFrames.ScopesFrames.html#2347" class="Datatype Operator">↦</a> <a id="3574" class="Symbol">(</a><a id="3575" href="MJSF.Syntax.html#Ty.m%E1%B5%97" class="InductiveConstructor">mᵗ</a> <a id="3578" href="MJSF.Syntax.html#3514" class="Bound">ts</a> <a id="3581" href="MJSF.Syntax.html#3517" class="Bound">t</a><a id="3582" class="Symbol">))</a> <a id="3585" class="Symbol">→</a>              <a id="3600" class="Comment">-- path to method declaration</a>
                <a id="3646" href="Data.List.All.html#All" class="Datatype">All</a> <a id="3650" class="Symbol">(</a><a id="3651" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="3656" href="MJSF.Syntax.html#3463" class="Bound">s</a><a id="3657" class="Symbol">)</a> <a id="3659" href="MJSF.Syntax.html#3514" class="Bound">ts</a> <a id="3662" class="Symbol">→</a>               <a id="3678" class="Comment">-- argument list</a>
                <a id="3711" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="3716" href="MJSF.Syntax.html#3463" class="Bound">s</a> <a id="3718" href="MJSF.Syntax.html#3517" class="Bound">t</a>
    <a id="SyntaxG.Expr.get" href="MJSF.Syntax.html#SyntaxG.Expr.get" class="InductiveConstructor">get</a>      <a id="3733" class="Symbol">:</a>  <a id="3736" class="Symbol">∀</a> <a id="3738" class="Symbol">{</a><a id="3739" href="MJSF.Syntax.html#3739" class="Bound">s&#39;</a> <a id="3742" href="MJSF.Syntax.html#3742" class="Bound">t</a><a id="3743" class="Symbol">}</a> <a id="3745" class="Symbol">→</a> <a id="3747" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="3752" href="MJSF.Syntax.html#3463" class="Bound">s</a> <a id="3754" class="Symbol">(</a><a id="3755" href="MJSF.Syntax.html#VTy.ref" class="InductiveConstructor">ref</a> <a id="3759" href="MJSF.Syntax.html#3739" class="Bound">s&#39;</a><a id="3761" class="Symbol">)</a> <a id="3763" class="Symbol">→</a> <a id="3765" class="Symbol">(</a><a id="3766" href="MJSF.Syntax.html#3739" class="Bound">s&#39;</a> <a id="3769" href="ScopesFrames.ScopesFrames.html#2347" class="Datatype Operator">↦</a> <a id="3771" href="MJSF.Syntax.html#Ty.v%E1%B5%97" class="InductiveConstructor">vᵗ</a> <a id="3774" href="MJSF.Syntax.html#3742" class="Bound">t</a><a id="3775" class="Symbol">)</a> <a id="3777" class="Symbol">→</a> <a id="3779" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="3784" href="MJSF.Syntax.html#3463" class="Bound">s</a> <a id="3786" href="MJSF.Syntax.html#3742" class="Bound">t</a>
    <a id="SyntaxG.Expr.var" href="MJSF.Syntax.html#SyntaxG.Expr.var" class="InductiveConstructor">var</a>      <a id="3801" class="Symbol">:</a>  <a id="3804" class="Symbol">∀</a> <a id="3806" class="Symbol">{</a><a id="3807" href="MJSF.Syntax.html#3807" class="Bound">t</a><a id="3808" class="Symbol">}</a> <a id="3810" class="Symbol">→</a> <a id="3812" class="Symbol">(</a><a id="3813" href="MJSF.Syntax.html#3463" class="Bound">s</a> <a id="3815" href="ScopesFrames.ScopesFrames.html#2347" class="Datatype Operator">↦</a> <a id="3817" href="MJSF.Syntax.html#Ty.v%E1%B5%97" class="InductiveConstructor">vᵗ</a> <a id="3820" href="MJSF.Syntax.html#3807" class="Bound">t</a><a id="3821" class="Symbol">)</a> <a id="3823" class="Symbol">→</a> <a id="3825" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="3830" href="MJSF.Syntax.html#3463" class="Bound">s</a> <a id="3832" href="MJSF.Syntax.html#3807" class="Bound">t</a>
    <a id="SyntaxG.Expr.new" href="MJSF.Syntax.html#SyntaxG.Expr.new" class="InductiveConstructor">new</a>      <a id="3847" class="Symbol">:</a>  <a id="3850" class="Symbol">∀</a> <a id="3852" class="Symbol">{</a><a id="3853" href="MJSF.Syntax.html#3853" class="Bound">sʳ</a> <a id="3856" href="MJSF.Syntax.html#3856" class="Bound">s&#39;</a><a id="3858" class="Symbol">}</a> <a id="3860" class="Symbol">→</a> <a id="3862" href="MJSF.Syntax.html#3463" class="Bound">s</a> <a id="3864" href="ScopesFrames.ScopesFrames.html#2347" class="Datatype Operator">↦</a> <a id="3866" href="MJSF.Syntax.html#Ty.c%E1%B5%97" class="InductiveConstructor">cᵗ</a> <a id="3869" href="MJSF.Syntax.html#3853" class="Bound">sʳ</a> <a id="3872" href="MJSF.Syntax.html#3856" class="Bound">s&#39;</a> <a id="3875" class="Symbol">→</a> <a id="3877" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="3882" href="MJSF.Syntax.html#3463" class="Bound">s</a> <a id="3884" class="Symbol">(</a><a id="3885" href="MJSF.Syntax.html#VTy.ref" class="InductiveConstructor">ref</a> <a id="3889" href="MJSF.Syntax.html#3856" class="Bound">s&#39;</a><a id="3891" class="Symbol">)</a> <a id="3893" class="Comment">-- path to class declaration</a>
    <a id="SyntaxG.Expr.null" href="MJSF.Syntax.html#SyntaxG.Expr.null" class="InductiveConstructor">null</a>     <a id="3935" class="Symbol">:</a>  <a id="3938" class="Symbol">∀</a> <a id="3940" class="Symbol">{</a><a id="3941" href="MJSF.Syntax.html#3941" class="Bound">s&#39;</a><a id="3943" class="Symbol">}</a> <a id="3945" class="Symbol">→</a> <a id="3947" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="3952" href="MJSF.Syntax.html#3463" class="Bound">s</a> <a id="3954" class="Symbol">(</a><a id="3955" href="MJSF.Syntax.html#VTy.ref" class="InductiveConstructor">ref</a> <a id="3959" href="MJSF.Syntax.html#3941" class="Bound">s&#39;</a><a id="3961" class="Symbol">)</a>
    <a id="SyntaxG.Expr.num" href="MJSF.Syntax.html#SyntaxG.Expr.num" class="InductiveConstructor">num</a>      <a id="3976" class="Symbol">:</a>  <a id="3979" href="Agda.Builtin.Int.html#%E2%84%A4" class="Datatype">ℤ</a> <a id="3981" class="Symbol">→</a> <a id="3983" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="3988" href="MJSF.Syntax.html#3463" class="Bound">s</a> <a id="3990" href="MJSF.Syntax.html#VTy.int" class="InductiveConstructor">int</a>
    <a id="SyntaxG.Expr.iop" href="MJSF.Syntax.html#SyntaxG.Expr.iop" class="InductiveConstructor">iop</a>      <a id="4007" class="Symbol">:</a>  <a id="4010" class="Symbol">(</a><a id="4011" href="Agda.Builtin.Int.html#%E2%84%A4" class="Datatype">ℤ</a> <a id="4013" class="Symbol">→</a> <a id="4015" href="Agda.Builtin.Int.html#%E2%84%A4" class="Datatype">ℤ</a> <a id="4017" class="Symbol">→</a> <a id="4019" href="Agda.Builtin.Int.html#%E2%84%A4" class="Datatype">ℤ</a><a id="4020" class="Symbol">)</a> <a id="4022" class="Symbol">→</a> <a id="4024" class="Symbol">(</a><a id="4025" href="MJSF.Syntax.html#4025" class="Bound">l</a> <a id="4027" href="MJSF.Syntax.html#4027" class="Bound">r</a> <a id="4029" class="Symbol">:</a> <a id="4031" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="4036" href="MJSF.Syntax.html#3463" class="Bound">s</a> <a id="4038" href="MJSF.Syntax.html#VTy.int" class="InductiveConstructor">int</a><a id="4041" class="Symbol">)</a> <a id="4043" class="Symbol">→</a> <a id="4045" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="4050" href="MJSF.Syntax.html#3463" class="Bound">s</a> <a id="4052" href="MJSF.Syntax.html#VTy.int" class="InductiveConstructor">int</a>
    <a id="SyntaxG.Expr.upcast" href="MJSF.Syntax.html#SyntaxG.Expr.upcast" class="InductiveConstructor">upcast</a>   <a id="4069" class="Symbol">:</a>  <a id="4072" class="Symbol">∀</a> <a id="4074" class="Symbol">{</a><a id="4075" href="MJSF.Syntax.html#4075" class="Bound">t&#39;</a> <a id="4078" href="MJSF.Syntax.html#4078" class="Bound">t</a><a id="4079" class="Symbol">}</a> <a id="4081" class="Symbol">→</a> <a id="4083" href="MJSF.Syntax.html#4075" class="Bound">t&#39;</a> <a id="4086" href="MJSF.Syntax.html#SyntaxG._%3C%3A_" class="Function Operator">&lt;:</a> <a id="4089" href="MJSF.Syntax.html#4078" class="Bound">t</a> <a id="4091" class="Symbol">→</a> <a id="4093" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="4098" href="MJSF.Syntax.html#3463" class="Bound">s</a> <a id="4100" class="Symbol">(</a><a id="4101" href="MJSF.Syntax.html#VTy.ref" class="InductiveConstructor">ref</a> <a id="4105" href="MJSF.Syntax.html#4075" class="Bound">t&#39;</a><a id="4107" class="Symbol">)</a> <a id="4109" class="Symbol">→</a> <a id="4111" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="4116" href="MJSF.Syntax.html#3463" class="Bound">s</a> <a id="4118" class="Symbol">(</a><a id="4119" href="MJSF.Syntax.html#VTy.ref" class="InductiveConstructor">ref</a> <a id="4123" href="MJSF.Syntax.html#4078" class="Bound">t</a><a id="4124" class="Symbol">)</a>
    <a id="SyntaxG.Expr.this" href="MJSF.Syntax.html#SyntaxG.Expr.this" class="InductiveConstructor">this</a>     <a id="4139" class="Symbol">:</a>  <a id="4142" class="Symbol">∀</a> <a id="4144" class="Symbol">{</a><a id="4145" href="MJSF.Syntax.html#4145" class="Bound">s&#39;</a> <a id="4148" href="MJSF.Syntax.html#4148" class="Bound">self</a><a id="4152" class="Symbol">}</a> <a id="4154" class="Symbol">→</a> <a id="4156" href="MJSF.Syntax.html#3463" class="Bound">s</a> <a id="4158" href="ScopesFrames.ScopesFrames.html#2073" class="Datatype Operator">⟶</a> <a id="4160" href="MJSF.Syntax.html#4145" class="Bound">s&#39;</a> <a id="4163" class="Symbol">→</a> <a id="4165" href="MJSF.Syntax.html#4148" class="Bound">self</a> <a id="4170" href="Data.List.Any.Membership.html#Propositional.M._%E2%88%88_" class="Function Operator">∈</a> <a id="4172" href="ScopesFrames.ScopesFrames.html#1858" class="Function">edgesOf</a> <a id="4180" href="MJSF.Syntax.html#4145" class="Bound">s&#39;</a> <a id="4183" class="Symbol">→</a> <a id="4185" class="Comment">-- the `self` of objects is given by the lexical parent edge of a method</a>
                <a id="4274" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="4279" href="MJSF.Syntax.html#3463" class="Bound">s</a> <a id="4281" class="Symbol">(</a><a id="4282" href="MJSF.Syntax.html#VTy.ref" class="InductiveConstructor">ref</a> <a id="4286" href="MJSF.Syntax.html#4148" class="Bound">self</a><a id="4290" class="Symbol">)</a>

  <a id="4295" class="Comment">-- The statements of MJ where the `s` in `Stmt s t s&#39;` is the</a>
  <a id="4359" class="Comment">-- lexical context scope before the statement `t` is the return type</a>
  <a id="4430" class="Comment">-- of the statement, and `s&#39;` is the leixcal context scope after the</a>
  <a id="4501" class="Comment">-- statement.</a>

  <a id="4518" class="Keyword">mutual</a>
    <a id="4529" class="Keyword">data</a> <a id="SyntaxG.Stmt" href="MJSF.Syntax.html#SyntaxG.Stmt" class="Datatype">Stmt</a> <a id="4539" class="Symbol">(</a><a id="4540" href="MJSF.Syntax.html#4540" class="Bound">s</a> <a id="4542" class="Symbol">:</a> <a id="4544" href="MJSF.Syntax.html#Scope" class="Function">Scope</a><a id="4549" class="Symbol">)(</a><a id="4551" href="MJSF.Syntax.html#4551" class="Bound">r</a> <a id="4553" class="Symbol">:</a> <a id="4555" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a><a id="4558" class="Symbol">)</a> <a id="4560" class="Symbol">:</a> <a id="4562" href="MJSF.Syntax.html#Scope" class="Function">Scope</a> <a id="4568" class="Symbol">→</a> <a id="4570" class="PrimitiveType">Set</a> <a id="4574" class="Keyword">where</a>
      <a id="SyntaxG.Stmt.run" href="MJSF.Syntax.html#SyntaxG.Stmt.run" class="InductiveConstructor">run</a>   <a id="4592" class="Symbol">:</a> <a id="4594" class="Symbol">∀</a> <a id="4596" class="Symbol">{</a><a id="4597" href="MJSF.Syntax.html#4597" class="Bound">t&#39;</a><a id="4599" class="Symbol">}</a> <a id="4601" class="Symbol">→</a> <a id="4603" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="4608" href="MJSF.Syntax.html#4540" class="Bound">s</a> <a id="4610" href="MJSF.Syntax.html#4597" class="Bound">t&#39;</a> <a id="4613" class="Symbol">→</a> <a id="4615" href="MJSF.Syntax.html#SyntaxG.Stmt" class="Datatype">Stmt</a> <a id="4620" href="MJSF.Syntax.html#4540" class="Bound">s</a> <a id="4622" href="MJSF.Syntax.html#4551" class="Bound">r</a> <a id="4624" href="MJSF.Syntax.html#4540" class="Bound">s</a>
      <a id="SyntaxG.Stmt.ifz" href="MJSF.Syntax.html#SyntaxG.Stmt.ifz" class="InductiveConstructor">ifz</a>   <a id="4638" class="Symbol">:</a> <a id="4640" class="Symbol">∀</a> <a id="4642" class="Symbol">{</a><a id="4643" href="MJSF.Syntax.html#4643" class="Bound">s&#39;</a> <a id="4646" href="MJSF.Syntax.html#4646" class="Bound">s&#39;&#39;</a> <a id="4650" class="Symbol">:</a> <a id="4652" href="MJSF.Syntax.html#Scope" class="Function">Scope</a><a id="4657" class="Symbol">}</a> <a id="4659" class="Symbol">→</a> <a id="4661" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="4666" href="MJSF.Syntax.html#4540" class="Bound">s</a> <a id="4668" href="MJSF.Syntax.html#VTy.int" class="InductiveConstructor">int</a> <a id="4672" class="Symbol">→</a> <a id="4674" href="MJSF.Syntax.html#SyntaxG.Stmt" class="Datatype">Stmt</a> <a id="4679" href="MJSF.Syntax.html#4540" class="Bound">s</a> <a id="4681" href="MJSF.Syntax.html#4551" class="Bound">r</a> <a id="4683" href="MJSF.Syntax.html#4540" class="Bound">s</a> <a id="4685" class="Symbol">→</a> <a id="4687" href="MJSF.Syntax.html#SyntaxG.Stmt" class="Datatype">Stmt</a> <a id="4692" href="MJSF.Syntax.html#4540" class="Bound">s</a> <a id="4694" href="MJSF.Syntax.html#4551" class="Bound">r</a> <a id="4696" href="MJSF.Syntax.html#4540" class="Bound">s</a> <a id="4698" class="Symbol">→</a> <a id="4700" href="MJSF.Syntax.html#SyntaxG.Stmt" class="Datatype">Stmt</a> <a id="4705" href="MJSF.Syntax.html#4540" class="Bound">s</a> <a id="4707" href="MJSF.Syntax.html#4551" class="Bound">r</a> <a id="4709" href="MJSF.Syntax.html#4540" class="Bound">s</a> <a id="4711" class="Comment">-- branches are blocks</a>
      <a id="SyntaxG.Stmt.set" href="MJSF.Syntax.html#SyntaxG.Stmt.set" class="InductiveConstructor">set</a>   <a id="4746" class="Symbol">:</a> <a id="4748" class="Symbol">∀</a> <a id="4750" class="Symbol">{</a><a id="4751" href="MJSF.Syntax.html#4751" class="Bound">s&#39;</a> <a id="4754" href="MJSF.Syntax.html#4754" class="Bound">t&#39;</a><a id="4756" class="Symbol">}</a> <a id="4758" class="Symbol">→</a> <a id="4760" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="4765" href="MJSF.Syntax.html#4540" class="Bound">s</a> <a id="4767" class="Symbol">(</a><a id="4768" href="MJSF.Syntax.html#VTy.ref" class="InductiveConstructor">ref</a> <a id="4772" href="MJSF.Syntax.html#4751" class="Bound">s&#39;</a><a id="4774" class="Symbol">)</a> <a id="4776" class="Symbol">→</a> <a id="4778" class="Symbol">(</a><a id="4779" href="MJSF.Syntax.html#4751" class="Bound">s&#39;</a> <a id="4782" href="ScopesFrames.ScopesFrames.html#2347" class="Datatype Operator">↦</a> <a id="4784" href="MJSF.Syntax.html#Ty.v%E1%B5%97" class="InductiveConstructor">vᵗ</a> <a id="4787" href="MJSF.Syntax.html#4754" class="Bound">t&#39;</a><a id="4789" class="Symbol">)</a> <a id="4791" class="Symbol">→</a> <a id="4793" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="4798" href="MJSF.Syntax.html#4540" class="Bound">s</a> <a id="4800" href="MJSF.Syntax.html#4754" class="Bound">t&#39;</a> <a id="4803" class="Symbol">→</a> <a id="4805" href="MJSF.Syntax.html#SyntaxG.Stmt" class="Datatype">Stmt</a> <a id="4810" href="MJSF.Syntax.html#4540" class="Bound">s</a> <a id="4812" href="MJSF.Syntax.html#4551" class="Bound">r</a> <a id="4814" href="MJSF.Syntax.html#4540" class="Bound">s</a>
      <a id="SyntaxG.Stmt.loc" href="MJSF.Syntax.html#SyntaxG.Stmt.loc" class="InductiveConstructor">loc</a>   <a id="4828" class="Symbol">:</a> <a id="4830" class="Symbol">∀</a> <a id="4832" class="Symbol">(</a><a id="4833" href="MJSF.Syntax.html#4833" class="Bound">s&#39;</a> <a id="4836" class="Symbol">:</a> <a id="4838" href="MJSF.Syntax.html#Scope" class="Function">Scope</a><a id="4843" class="Symbol">)(</a><a id="4845" href="MJSF.Syntax.html#4845" class="Bound">t&#39;</a> <a id="4848" class="Symbol">:</a> <a id="4850" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a><a id="4853" class="Symbol">)⦃</a> <a id="4856" href="MJSF.Syntax.html#4856" class="Bound">shape</a> <a id="4862" class="Symbol">:</a> <a id="4864" href="MJSF.Syntax.html#2313" class="Bound">g</a> <a id="4866" href="MJSF.Syntax.html#4833" class="Bound">s&#39;</a> <a id="4869" href="Agda.Builtin.Equality.html#_%E2%89%A1_" class="Datatype Operator">≡</a> <a id="4871" class="Symbol">(</a><a id="4872" href="Data.List.Base.html#%5B_%5D" class="Function Operator">[</a> <a id="4874" href="MJSF.Syntax.html#Ty.v%E1%B5%97" class="InductiveConstructor">vᵗ</a> <a id="4877" href="MJSF.Syntax.html#4845" class="Bound">t&#39;</a> <a id="4880" href="Data.List.Base.html#%5B_%5D" class="Function Operator">]</a> <a id="4882" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="4884" href="Data.List.Base.html#%5B_%5D" class="Function Operator">[</a> <a id="4886" href="MJSF.Syntax.html#4540" class="Bound">s</a> <a id="4888" href="Data.List.Base.html#%5B_%5D" class="Function Operator">]</a><a id="4889" class="Symbol">)</a> <a id="4891" class="Symbol">⦄</a> <a id="4893" class="Symbol">→</a> <a id="4895" href="MJSF.Syntax.html#SyntaxG.Stmt" class="Datatype">Stmt</a> <a id="4900" href="MJSF.Syntax.html#4540" class="Bound">s</a> <a id="4902" href="MJSF.Syntax.html#4551" class="Bound">r</a> <a id="4904" href="MJSF.Syntax.html#4833" class="Bound">s&#39;</a> <a id="4907" class="Comment">-- local variable scope `s&#39;` is connected to lexical context scope `s`</a>
      <a id="SyntaxG.Stmt.asgn" href="MJSF.Syntax.html#SyntaxG.Stmt.asgn" class="InductiveConstructor">asgn</a>  <a id="4990" class="Symbol">:</a> <a id="4992" class="Symbol">∀</a> <a id="4994" class="Symbol">{</a><a id="4995" href="MJSF.Syntax.html#4995" class="Bound">t&#39;</a><a id="4997" class="Symbol">}</a> <a id="4999" class="Symbol">→</a> <a id="5001" class="Symbol">(</a><a id="5002" href="MJSF.Syntax.html#4540" class="Bound">s</a> <a id="5004" href="ScopesFrames.ScopesFrames.html#2347" class="Datatype Operator">↦</a> <a id="5006" href="MJSF.Syntax.html#Ty.v%E1%B5%97" class="InductiveConstructor">vᵗ</a> <a id="5009" href="MJSF.Syntax.html#4995" class="Bound">t&#39;</a><a id="5011" class="Symbol">)</a> <a id="5013" class="Symbol">→</a> <a id="5015" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="5020" href="MJSF.Syntax.html#4540" class="Bound">s</a> <a id="5022" href="MJSF.Syntax.html#4995" class="Bound">t&#39;</a> <a id="5025" class="Symbol">→</a> <a id="5027" href="MJSF.Syntax.html#SyntaxG.Stmt" class="Datatype">Stmt</a> <a id="5032" href="MJSF.Syntax.html#4540" class="Bound">s</a> <a id="5034" href="MJSF.Syntax.html#4551" class="Bound">r</a> <a id="5036" href="MJSF.Syntax.html#4540" class="Bound">s</a>
      <a id="SyntaxG.Stmt.ret" href="MJSF.Syntax.html#SyntaxG.Stmt.ret" class="InductiveConstructor">ret</a>   <a id="5050" class="Symbol">:</a> <a id="5052" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="5057" href="MJSF.Syntax.html#4540" class="Bound">s</a> <a id="5059" href="MJSF.Syntax.html#4551" class="Bound">r</a> <a id="5061" class="Symbol">→</a> <a id="5063" href="MJSF.Syntax.html#SyntaxG.Stmt" class="Datatype">Stmt</a> <a id="5068" href="MJSF.Syntax.html#4540" class="Bound">s</a> <a id="5070" href="MJSF.Syntax.html#4551" class="Bound">r</a> <a id="5072" href="MJSF.Syntax.html#4540" class="Bound">s</a>
      <a id="SyntaxG.Stmt.block" href="MJSF.Syntax.html#SyntaxG.Stmt.block" class="InductiveConstructor">block</a> <a id="5086" class="Symbol">:</a> <a id="5088" class="Symbol">∀</a> <a id="5090" class="Symbol">{</a><a id="5091" href="MJSF.Syntax.html#5091" class="Bound">s&#39;</a><a id="5093" class="Symbol">}</a> <a id="5095" class="Symbol">→</a> <a id="5097" href="MJSF.Syntax.html#SyntaxG.Stmts" class="Function">Stmts</a> <a id="5103" href="MJSF.Syntax.html#4540" class="Bound">s</a> <a id="5105" href="MJSF.Syntax.html#4551" class="Bound">r</a> <a id="5107" href="MJSF.Syntax.html#5091" class="Bound">s&#39;</a> <a id="5110" class="Symbol">→</a> <a id="5112" href="MJSF.Syntax.html#SyntaxG.Stmt" class="Datatype">Stmt</a> <a id="5117" href="MJSF.Syntax.html#4540" class="Bound">s</a> <a id="5119" href="MJSF.Syntax.html#4551" class="Bound">r</a> <a id="5121" href="MJSF.Syntax.html#4540" class="Bound">s</a>

    <a id="5128" class="Comment">-- A block of statements is given by a sequence of statements</a>
    <a id="5194" class="Comment">-- whose scopes are lexically nested (if at all):</a>

    <a id="SyntaxG.Stmts" href="MJSF.Syntax.html#SyntaxG.Stmts" class="Function">Stmts</a> <a id="5255" class="Symbol">:</a> <a id="5257" href="MJSF.Syntax.html#Scope" class="Function">Scope</a> <a id="5263" class="Symbol">→</a> <a id="5265" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="5269" class="Symbol">→</a> <a id="5271" href="MJSF.Syntax.html#Scope" class="Function">Scope</a> <a id="5277" class="Symbol">→</a> <a id="5279" class="PrimitiveType">Set</a>
    <a id="5287" href="MJSF.Syntax.html#SyntaxG.Stmts" class="Function">Stmts</a> <a id="5293" href="MJSF.Syntax.html#5293" class="Bound">s</a> <a id="5295" href="MJSF.Syntax.html#5295" class="Bound">r</a> <a id="5297" href="MJSF.Syntax.html#5297" class="Bound">s&#39;</a> <a id="5300" class="Symbol">=</a> <a id="5302" href="Data.Star.html#Star" class="Datatype">Star</a> <a id="5307" class="Symbol">(λ</a> <a id="5310" href="MJSF.Syntax.html#5310" class="Bound">s</a> <a id="5312" href="MJSF.Syntax.html#5312" class="Bound">s&#39;</a> <a id="5315" class="Symbol">→</a> <a id="5317" href="MJSF.Syntax.html#SyntaxG.Stmt" class="Datatype">Stmt</a> <a id="5322" href="MJSF.Syntax.html#5310" class="Bound">s</a> <a id="5324" href="MJSF.Syntax.html#5295" class="Bound">r</a> <a id="5326" href="MJSF.Syntax.html#5312" class="Bound">s&#39;</a><a id="5328" class="Symbol">)</a> <a id="5330" href="MJSF.Syntax.html#5293" class="Bound">s</a> <a id="5332" href="MJSF.Syntax.html#5297" class="Bound">s&#39;</a>

  <a id="5338" class="Comment">-- Method bodies have a mandatory return expression, except for</a>
  <a id="5404" class="Comment">-- `void` typed method bodies:</a>

  <a id="5438" class="Keyword">data</a> <a id="SyntaxG.Body" href="MJSF.Syntax.html#SyntaxG.Body" class="Datatype">Body</a> <a id="5448" class="Symbol">(</a><a id="5449" href="MJSF.Syntax.html#5449" class="Bound">s</a> <a id="5451" class="Symbol">:</a> <a id="5453" href="MJSF.Syntax.html#Scope" class="Function">Scope</a><a id="5458" class="Symbol">)</a> <a id="5460" class="Symbol">:</a> <a id="5462" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="5466" class="Symbol">→</a> <a id="5468" class="PrimitiveType">Set</a> <a id="5472" class="Keyword">where</a>
    <a id="SyntaxG.Body.body" href="MJSF.Syntax.html#SyntaxG.Body.body" class="InductiveConstructor">body</a>      <a id="5492" class="Symbol">:</a> <a id="5494" class="Symbol">∀</a> <a id="5496" class="Symbol">{</a><a id="5497" href="MJSF.Syntax.html#5497" class="Bound">s&#39;</a> <a id="5500" href="MJSF.Syntax.html#5500" class="Bound">t</a><a id="5501" class="Symbol">}</a> <a id="5503" class="Symbol">→</a> <a id="5505" href="MJSF.Syntax.html#SyntaxG.Stmts" class="Function">Stmts</a> <a id="5511" href="MJSF.Syntax.html#5449" class="Bound">s</a> <a id="5513" href="MJSF.Syntax.html#5500" class="Bound">t</a> <a id="5515" href="MJSF.Syntax.html#5497" class="Bound">s&#39;</a> <a id="5518" class="Symbol">→</a> <a id="5520" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="5525" href="MJSF.Syntax.html#5497" class="Bound">s&#39;</a> <a id="5528" href="MJSF.Syntax.html#5500" class="Bound">t</a> <a id="5530" class="Symbol">→</a> <a id="5532" href="MJSF.Syntax.html#SyntaxG.Body" class="Datatype">Body</a> <a id="5537" href="MJSF.Syntax.html#5449" class="Bound">s</a> <a id="5539" href="MJSF.Syntax.html#5500" class="Bound">t</a>
    <a id="SyntaxG.Body.body-void" href="MJSF.Syntax.html#SyntaxG.Body.body-void" class="InductiveConstructor">body-void</a> <a id="5555" class="Symbol">:</a> <a id="5557" class="Symbol">∀</a> <a id="5559" class="Symbol">{</a><a id="5560" href="MJSF.Syntax.html#5560" class="Bound">s&#39;</a><a id="5562" class="Symbol">}</a> <a id="5564" class="Symbol">→</a> <a id="5566" href="MJSF.Syntax.html#SyntaxG.Stmts" class="Function">Stmts</a> <a id="5572" href="MJSF.Syntax.html#5449" class="Bound">s</a> <a id="5574" href="MJSF.Syntax.html#VTy.void" class="InductiveConstructor">void</a> <a id="5579" href="MJSF.Syntax.html#5560" class="Bound">s&#39;</a> <a id="5582" class="Symbol">→</a> <a id="5584" href="MJSF.Syntax.html#SyntaxG.Body" class="Datatype">Body</a> <a id="5589" href="MJSF.Syntax.html#5449" class="Bound">s</a> <a id="5591" href="MJSF.Syntax.html#VTy.void" class="InductiveConstructor">void</a>

  <a id="5599" class="Comment">-- A method defines the scope shape mandating that the method type</a>
  <a id="5668" class="Comment">-- parameters are declarations of the method body scope, and that</a>
  <a id="5736" class="Comment">-- the method body scope is connected to the scope of the class</a>
  <a id="5802" class="Comment">-- where they are defined.  The `s` in `Meth s ts t` is the scope of</a>
  <a id="5873" class="Comment">-- the surrounding class.</a>

  <a id="5902" class="Keyword">data</a> <a id="SyntaxG.Meth" href="MJSF.Syntax.html#SyntaxG.Meth" class="Datatype">Meth</a> <a id="5912" class="Symbol">(</a><a id="5913" href="MJSF.Syntax.html#5913" class="Bound">s</a> <a id="5915" class="Symbol">:</a> <a id="5917" href="MJSF.Syntax.html#Scope" class="Function">Scope</a><a id="5922" class="Symbol">)</a> <a id="5924" class="Symbol">:</a> <a id="5926" href="Agda.Builtin.List.html#List" class="Datatype">List</a> <a id="5931" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="5935" class="Symbol">→</a> <a id="5937" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="5941" class="Symbol">→</a> <a id="5943" class="PrimitiveType">Set</a> <a id="5947" class="Keyword">where</a>
    <a id="SyntaxG.Meth.meth" href="MJSF.Syntax.html#SyntaxG.Meth.meth" class="InductiveConstructor">meth</a>  <a id="5963" class="Symbol">:</a>  <a id="5966" class="Symbol">∀</a> <a id="5968" class="Symbol">{</a><a id="5969" href="MJSF.Syntax.html#5969" class="Bound">ts</a> <a id="5972" href="MJSF.Syntax.html#5972" class="Bound">rt</a><a id="5974" class="Symbol">}(</a><a id="5976" href="MJSF.Syntax.html#5976" class="Bound">s&#39;</a> <a id="5979" class="Symbol">:</a> <a id="5981" href="MJSF.Syntax.html#Scope" class="Function">Scope</a><a id="5986" class="Symbol">)</a>
             <a id="6001" class="Symbol">⦃</a> <a id="6003" href="MJSF.Syntax.html#6003" class="Bound">shape</a> <a id="6009" class="Symbol">:</a> <a id="6011" href="MJSF.Syntax.html#2313" class="Bound">g</a> <a id="6013" href="MJSF.Syntax.html#5976" class="Bound">s&#39;</a> <a id="6016" href="Agda.Builtin.Equality.html#_%E2%89%A1_" class="Datatype Operator">≡</a> <a id="6018" class="Symbol">(</a><a id="6019" href="Data.List.Base.html#map" class="Function">map</a> <a id="6023" href="MJSF.Syntax.html#Ty.v%E1%B5%97" class="InductiveConstructor">vᵗ</a> <a id="6026" href="MJSF.Syntax.html#5969" class="Bound">ts</a> <a id="6029" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="6031" href="Data.List.Base.html#%5B_%5D" class="Function Operator">[</a> <a id="6033" href="MJSF.Syntax.html#5913" class="Bound">s</a> <a id="6035" href="Data.List.Base.html#%5B_%5D" class="Function Operator">]</a><a id="6036" class="Symbol">)</a> <a id="6038" class="Symbol">⦄</a> <a id="6040" class="Symbol">→</a>
             <a id="6055" href="MJSF.Syntax.html#SyntaxG.Body" class="Datatype">Body</a> <a id="6060" href="MJSF.Syntax.html#5976" class="Bound">s&#39;</a> <a id="6063" href="MJSF.Syntax.html#5972" class="Bound">rt</a> <a id="6066" class="Symbol">→</a>
             <a id="6081" href="MJSF.Syntax.html#SyntaxG.Meth" class="Datatype">Meth</a> <a id="6086" href="MJSF.Syntax.html#5913" class="Bound">s</a> <a id="6088" href="MJSF.Syntax.html#5969" class="Bound">ts</a> <a id="6091" href="MJSF.Syntax.html#5972" class="Bound">rt</a>

  <a id="6097" class="Comment">-- A class definition has an optional path to a super class; the</a>
  <a id="6164" class="Comment">-- only difference between a `class0` and a `class1` is that a</a>
  <a id="6229" class="Comment">-- `class1` has a path from the root scope `sʳ` to another class</a>
  <a id="6296" class="Comment">-- declaration, i.e., the super class.</a>
  <a id="6337" class="Comment">--</a>
  <a id="6342" class="Comment">-- The `sʳ` in `Class sʳ s` is the root scope (representing the</a>
  <a id="6408" class="Comment">-- class table), and the `s` is the scope of the defined class.</a>
  <a id="6474" class="Comment">--</a>
  <a id="6479" class="Comment">-- We distinguish three kinds of class members in MJ:</a>
  <a id="6535" class="Comment">--</a>
  <a id="6540" class="Comment">-- * Fields, typed by `fs`.</a>
  <a id="6570" class="Comment">--</a>
  <a id="6575" class="Comment">-- * Methods, typed by `ms`, where for each method type signature</a>
  <a id="6643" class="Comment">--   `mᵗ ts t` in `ms` there is a well-typed method `Meth s ts t`.</a>
  <a id="6712" class="Comment">--</a>
  <a id="6717" class="Comment">-- * Overriding methods, typed by `oms`, where for each method type</a>
  <a id="6787" class="Comment">--   signature `mᵗ ts t` in `oms` there is a path from the current</a>
  <a id="6856" class="Comment">--   class scope to a method declaration in a parent class scope,</a>
  <a id="6924" class="Comment">--   and a well-typed method `Meth s ts t` which overrides the</a>
  <a id="6989" class="Comment">--   method corresponding to that declaration.</a>

  <a id="7039" class="Keyword">data</a> <a id="SyntaxG.Class" href="MJSF.Syntax.html#SyntaxG.Class" class="Datatype">Class</a> <a id="7050" class="Symbol">(</a><a id="7051" href="MJSF.Syntax.html#7051" class="Bound">sʳ</a> <a id="7054" href="MJSF.Syntax.html#7054" class="Bound">s</a> <a id="7056" class="Symbol">:</a> <a id="7058" href="MJSF.Syntax.html#Scope" class="Function">Scope</a><a id="7063" class="Symbol">)</a> <a id="7065" class="Symbol">:</a> <a id="7067" class="PrimitiveType">Set</a> <a id="7071" class="Keyword">where</a>
    <a id="SyntaxG.Class.class1" href="MJSF.Syntax.html#SyntaxG.Class.class1" class="InductiveConstructor">class1</a>  <a id="7089" class="Symbol">:</a>  <a id="7092" class="Symbol">∀</a> <a id="7094" class="Symbol">{</a><a id="7095" href="MJSF.Syntax.html#7095" class="Bound">ms</a> <a id="7098" href="MJSF.Syntax.html#7098" class="Bound">fs</a> <a id="7101" href="MJSF.Syntax.html#7101" class="Bound">oms</a> <a id="7105" href="MJSF.Syntax.html#7105" class="Bound">sᵖ</a><a id="7107" class="Symbol">}</a> <a id="7109" class="Symbol">→</a>
               <a id="7126" href="MJSF.Syntax.html#7051" class="Bound">sʳ</a> <a id="7129" href="ScopesFrames.ScopesFrames.html#2347" class="Datatype Operator">↦</a> <a id="7131" class="Symbol">(</a><a id="7132" href="MJSF.Syntax.html#Ty.c%E1%B5%97" class="InductiveConstructor">cᵗ</a> <a id="7135" href="MJSF.Syntax.html#7051" class="Bound">sʳ</a> <a id="7138" href="MJSF.Syntax.html#7105" class="Bound">sᵖ</a><a id="7140" class="Symbol">)</a> <a id="7142" class="Symbol">→</a>
               <a id="7159" class="Symbol">⦃</a> <a id="7161" href="MJSF.Syntax.html#7161" class="Bound">shape</a>  <a id="7168" class="Symbol">:</a>  <a id="7171" href="MJSF.Syntax.html#2313" class="Bound">g</a> <a id="7173" href="MJSF.Syntax.html#7054" class="Bound">s</a>  <a id="7176" href="Agda.Builtin.Equality.html#_%E2%89%A1_" class="Datatype Operator">≡</a>  <a id="7179" class="Symbol">(</a><a id="7180" href="MJSF.Syntax.html#7095" class="Bound">ms</a> <a id="7183" href="Data.List.Base.html#_%2B%2B_" class="Function Operator">++</a> <a id="7186" href="MJSF.Syntax.html#7098" class="Bound">fs</a> <a id="7189" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a>  <a id="7192" href="MJSF.Syntax.html#7051" class="Bound">sʳ</a> <a id="7195" href="Agda.Builtin.List.html#List._%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="7197" href="MJSF.Syntax.html#7105" class="Bound">sᵖ</a> <a id="7200" href="Agda.Builtin.List.html#List._%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="7202" href="Agda.Builtin.List.html#List.%5B%5D" class="InductiveConstructor">[]</a><a id="7204" class="Symbol">)</a> <a id="7206" class="Symbol">⦄</a> <a id="7208" class="Symbol">→</a>
               <a id="7225" href="Data.List.All.html#All" class="Datatype">All</a> <a id="7229" class="Symbol">(</a><a id="7230" href="MJSF.Syntax.html#%23m" class="Datatype">#m</a> <a id="7233" class="Symbol">(</a><a id="7234" href="MJSF.Syntax.html#SyntaxG.Meth" class="Datatype">Meth</a> <a id="7239" href="MJSF.Syntax.html#7054" class="Bound">s</a><a id="7240" class="Symbol">))</a> <a id="7243" href="MJSF.Syntax.html#7095" class="Bound">ms</a> <a id="7246" class="Symbol">→</a>
               <a id="7263" href="Data.List.All.html#All" class="Datatype">All</a> <a id="7267" class="Symbol">(</a><a id="7268" href="MJSF.Syntax.html#%23v" class="Datatype">#v</a> <a id="7271" class="Symbol">(λ</a> <a id="7274" href="MJSF.Syntax.html#7274" class="Bound">_</a> <a id="7276" class="Symbol">→</a> <a id="7278" href="Agda.Builtin.Unit.html#%E2%8A%A4" class="Record">⊤</a><a id="7279" class="Symbol">))</a> <a id="7282" href="MJSF.Syntax.html#7098" class="Bound">fs</a> <a id="7285" class="Symbol">→</a>
               <a id="7302" href="Data.List.All.html#All" class="Datatype">All</a> <a id="7306" class="Symbol">(</a><a id="7307" href="MJSF.Syntax.html#%23m" class="Datatype">#m</a> <a id="7310" class="Symbol">(λ</a> <a id="7313" href="MJSF.Syntax.html#7313" class="Bound">ts</a> <a id="7316" href="MJSF.Syntax.html#7316" class="Bound">rt</a> <a id="7319" class="Symbol">→</a> <a id="7321" class="Symbol">(</a><a id="7322" href="MJSF.Syntax.html#7054" class="Bound">s</a> <a id="7324" href="ScopesFrames.ScopesFrames.html#2347" class="Datatype Operator">↦</a> <a id="7326" class="Symbol">(</a><a id="7327" href="MJSF.Syntax.html#Ty.m%E1%B5%97" class="InductiveConstructor">mᵗ</a> <a id="7330" href="MJSF.Syntax.html#7313" class="Bound">ts</a> <a id="7333" href="MJSF.Syntax.html#7316" class="Bound">rt</a><a id="7335" class="Symbol">))</a> <a id="7338" href="Data.Product.html#_%C3%97_" class="Function Operator">×</a> <a id="7340" href="MJSF.Syntax.html#SyntaxG.Meth" class="Datatype">Meth</a> <a id="7345" href="MJSF.Syntax.html#7054" class="Bound">s</a> <a id="7347" href="MJSF.Syntax.html#7313" class="Bound">ts</a> <a id="7350" href="MJSF.Syntax.html#7316" class="Bound">rt</a> <a id="7353" class="Symbol">))</a> <a id="7356" href="MJSF.Syntax.html#7101" class="Bound">oms</a> <a id="7360" class="Symbol">→</a> <a id="7362" class="Comment">-- overrides</a>
               <a id="7390" href="MJSF.Syntax.html#SyntaxG.Class" class="Datatype">Class</a> <a id="7396" href="MJSF.Syntax.html#7051" class="Bound">sʳ</a> <a id="7399" href="MJSF.Syntax.html#7054" class="Bound">s</a>
    <a id="SyntaxG.Class.class0" href="MJSF.Syntax.html#SyntaxG.Class.class0" class="InductiveConstructor">class0</a> <a id="7412" class="Symbol">:</a> <a id="7414" class="Symbol">∀</a> <a id="7416" class="Symbol">{</a><a id="7417" href="MJSF.Syntax.html#7417" class="Bound">ms</a> <a id="7420" href="MJSF.Syntax.html#7420" class="Bound">fs</a> <a id="7423" href="MJSF.Syntax.html#7423" class="Bound">oms</a><a id="7426" class="Symbol">}</a> <a id="7428" class="Symbol">→</a>
             <a id="7443" class="Symbol">⦃</a> <a id="7445" href="MJSF.Syntax.html#7445" class="Bound">shape</a> <a id="7451" class="Symbol">:</a> <a id="7453" href="MJSF.Syntax.html#2313" class="Bound">g</a> <a id="7455" href="MJSF.Syntax.html#7054" class="Bound">s</a> <a id="7457" href="Agda.Builtin.Equality.html#_%E2%89%A1_" class="Datatype Operator">≡</a> <a id="7459" class="Symbol">(</a><a id="7460" href="MJSF.Syntax.html#7417" class="Bound">ms</a> <a id="7463" href="Data.List.Base.html#_%2B%2B_" class="Function Operator">++</a> <a id="7466" href="MJSF.Syntax.html#7420" class="Bound">fs</a> <a id="7469" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="7471" href="Data.List.Base.html#%5B_%5D" class="Function Operator">[</a> <a id="7473" href="MJSF.Syntax.html#7051" class="Bound">sʳ</a> <a id="7476" href="Data.List.Base.html#%5B_%5D" class="Function Operator">]</a><a id="7477" class="Symbol">)</a> <a id="7479" class="Symbol">⦄</a> <a id="7481" class="Symbol">→</a>
             <a id="7496" href="Data.List.All.html#All" class="Datatype">All</a> <a id="7500" class="Symbol">(</a><a id="7501" href="MJSF.Syntax.html#%23m" class="Datatype">#m</a> <a id="7504" class="Symbol">(</a><a id="7505" href="MJSF.Syntax.html#SyntaxG.Meth" class="Datatype">Meth</a> <a id="7510" href="MJSF.Syntax.html#7054" class="Bound">s</a><a id="7511" class="Symbol">))</a> <a id="7514" href="MJSF.Syntax.html#7417" class="Bound">ms</a> <a id="7517" class="Symbol">→</a>   <a id="7521" class="Comment">-- only methods</a>
             <a id="7550" href="Data.List.All.html#All" class="Datatype">All</a> <a id="7554" class="Symbol">(</a><a id="7555" href="MJSF.Syntax.html#%23v" class="Datatype">#v</a> <a id="7558" class="Symbol">(λ</a> <a id="7561" href="MJSF.Syntax.html#7561" class="Bound">_</a> <a id="7563" class="Symbol">→</a> <a id="7565" href="Agda.Builtin.Unit.html#%E2%8A%A4" class="Record">⊤</a><a id="7566" class="Symbol">))</a> <a id="7569" href="MJSF.Syntax.html#7420" class="Bound">fs</a> <a id="7572" class="Symbol">→</a>  <a id="7575" class="Comment">-- only values</a>
             <a id="7603" href="Data.List.All.html#All" class="Datatype">All</a> <a id="7607" class="Symbol">(</a><a id="7608" href="MJSF.Syntax.html#%23m" class="Datatype">#m</a> <a id="7611" class="Symbol">(λ</a> <a id="7614" href="MJSF.Syntax.html#7614" class="Bound">ts</a> <a id="7617" href="MJSF.Syntax.html#7617" class="Bound">rt</a> <a id="7620" class="Symbol">→</a> <a id="7622" class="Symbol">(</a><a id="7623" href="MJSF.Syntax.html#7054" class="Bound">s</a> <a id="7625" href="ScopesFrames.ScopesFrames.html#2347" class="Datatype Operator">↦</a> <a id="7627" class="Symbol">(</a><a id="7628" href="MJSF.Syntax.html#Ty.m%E1%B5%97" class="InductiveConstructor">mᵗ</a> <a id="7631" href="MJSF.Syntax.html#7614" class="Bound">ts</a> <a id="7634" href="MJSF.Syntax.html#7617" class="Bound">rt</a><a id="7636" class="Symbol">))</a> <a id="7639" href="Data.Product.html#_%C3%97_" class="Function Operator">×</a> <a id="7641" href="MJSF.Syntax.html#SyntaxG.Meth" class="Datatype">Meth</a> <a id="7646" href="MJSF.Syntax.html#7054" class="Bound">s</a> <a id="7648" href="MJSF.Syntax.html#7614" class="Bound">ts</a> <a id="7651" href="MJSF.Syntax.html#7617" class="Bound">rt</a> <a id="7654" class="Symbol">))</a> <a id="7657" href="MJSF.Syntax.html#7423" class="Bound">oms</a> <a id="7661" class="Symbol">→</a> <a id="7663" class="Comment">-- overrides</a>
             <a id="7689" href="MJSF.Syntax.html#SyntaxG.Class" class="Datatype">Class</a> <a id="7695" href="MJSF.Syntax.html#7051" class="Bound">sʳ</a> <a id="7698" href="MJSF.Syntax.html#7054" class="Bound">s</a>

  <a id="7703" class="Comment">-- A program consists of a sequence of well-typed class definitions</a>
  <a id="7773" class="Comment">-- and a main function to be evaluated in the context of the root</a>
  <a id="7841" class="Comment">-- scope.  The root scope has only class-typed declarations, and has</a>
  <a id="7912" class="Comment">-- no parent edges:</a>

  <a id="7935" class="Keyword">data</a> <a id="SyntaxG.Program" href="MJSF.Syntax.html#SyntaxG.Program" class="Datatype">Program</a> <a id="7948" class="Symbol">(</a><a id="7949" href="MJSF.Syntax.html#7949" class="Bound">sʳ</a> <a id="7952" class="Symbol">:</a> <a id="7954" href="MJSF.Syntax.html#Scope" class="Function">Scope</a><a id="7959" class="Symbol">)(</a><a id="7961" href="MJSF.Syntax.html#7961" class="Bound">a</a> <a id="7963" class="Symbol">:</a> <a id="7965" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a><a id="7968" class="Symbol">)</a> <a id="7970" class="Symbol">:</a> <a id="7972" class="PrimitiveType">Set</a> <a id="7976" class="Keyword">where</a>
    <a id="SyntaxG.Program.program" href="MJSF.Syntax.html#SyntaxG.Program.program" class="InductiveConstructor">program</a> <a id="7994" class="Symbol">:</a>
      <a id="8002" class="Symbol">∀</a> <a id="8004" href="MJSF.Syntax.html#8004" class="Bound">cs</a> <a id="8007" class="Symbol">⦃</a> <a id="8009" href="MJSF.Syntax.html#8009" class="Bound">shape</a> <a id="8015" class="Symbol">:</a> <a id="8017" href="MJSF.Syntax.html#2313" class="Bound">g</a> <a id="8019" href="MJSF.Syntax.html#7949" class="Bound">sʳ</a> <a id="8022" href="Agda.Builtin.Equality.html#_%E2%89%A1_" class="Datatype Operator">≡</a> <a id="8024" class="Symbol">(</a><a id="8025" href="MJSF.Syntax.html#8004" class="Bound">cs</a> <a id="8028" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="8030" href="Agda.Builtin.List.html#List.%5B%5D" class="InductiveConstructor">[]</a><a id="8032" class="Symbol">)</a> <a id="8034" class="Symbol">⦄</a> <a id="8036" class="Symbol">→</a>
        <a id="8046" class="Comment">-- implementation of all the classes</a>
        <a id="8091" href="Data.List.All.html#All" class="Datatype">All</a> <a id="8095" class="Symbol">(</a><a id="8096" href="MJSF.Syntax.html#%23c" class="Datatype">#c</a> <a id="8099" href="MJSF.Syntax.html#7949" class="Bound">sʳ</a> <a id="8102" class="Symbol">(λ</a> <a id="8105" href="MJSF.Syntax.html#8105" class="Bound">s</a> <a id="8107" class="Symbol">→</a> <a id="8109" href="MJSF.Syntax.html#SyntaxG.Class" class="Datatype">Class</a> <a id="8115" href="MJSF.Syntax.html#7949" class="Bound">sʳ</a> <a id="8118" href="MJSF.Syntax.html#8105" class="Bound">s</a> <a id="8120" href="Data.Product.html#_%C3%97_" class="Function Operator">×</a> <a id="8122" href="Data.Product.html#%E2%88%83" class="Function">∃</a> <a id="8124" class="Symbol">λ</a> <a id="8126" href="MJSF.Syntax.html#8126" class="Bound">s&#39;</a> <a id="8129" class="Symbol">→</a> <a id="8131" href="MJSF.Syntax.html#SyntaxG.Inherits" class="Datatype">Inherits</a> <a id="8140" href="MJSF.Syntax.html#8105" class="Bound">s</a> <a id="8142" href="MJSF.Syntax.html#8126" class="Bound">s&#39;</a><a id="8144" class="Symbol">))</a> <a id="8147" href="MJSF.Syntax.html#8004" class="Bound">cs</a> <a id="8150" class="Symbol">→</a>
        <a id="8160" class="Comment">-- main function</a>
        <a id="8185" href="MJSF.Syntax.html#SyntaxG.Body" class="Datatype">Body</a> <a id="8190" href="MJSF.Syntax.html#7949" class="Bound">sʳ</a> <a id="8193" href="MJSF.Syntax.html#7961" class="Bound">a</a> <a id="8195" class="Symbol">→</a>
        <a id="8205" href="MJSF.Syntax.html#SyntaxG.Program" class="Datatype">Program</a> <a id="8213" href="MJSF.Syntax.html#7949" class="Bound">sʳ</a> <a id="8216" href="MJSF.Syntax.html#7961" class="Bound">a</a>
</pre></body></html>