<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>MJSF.Syntax</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="Data.Nat.html" class="Module">Data.Nat</a>
<a id="22" class="Keyword">open</a> <a id="27" class="Keyword">import</a> <a id="34" href="Data.Fin.html" class="Module">Data.Fin</a> <a id="43" class="Keyword">using</a> <a id="49" class="Symbol">(</a><a id="50" href="Data.Fin.html#Fin" class="Datatype">Fin</a><a id="53" class="Symbol">;</a> <a id="55" href="Data.Fin.html#%23_" class="Function Operator">#_</a><a id="57" class="Symbol">;</a> <a id="59" href="Data.Fin.html#Fin.suc" class="InductiveConstructor">suc</a><a id="62" class="Symbol">;</a> <a id="64" href="Data.Fin.html#Fin.zero" class="InductiveConstructor">zero</a><a id="68" class="Symbol">)</a>
<a id="70" class="Keyword">open</a> <a id="75" class="Keyword">import</a> <a id="82" href="Data.List.Most.html" class="Module">Data.List.Most</a>
<a id="97" class="Keyword">open</a> <a id="102" class="Keyword">import</a> <a id="109" href="Data.Integer.html" class="Module">Data.Integer</a> <a id="122" class="Keyword">hiding</a> <a id="129" class="Symbol">(</a><a id="130" href="Data.Integer.Base.html#suc" class="Function">suc</a><a id="133" class="Symbol">)</a>
<a id="135" class="Keyword">open</a> <a id="140" class="Keyword">import</a> <a id="147" href="Data.Product.html" class="Module">Data.Product</a> <a id="160" class="Keyword">hiding</a> <a id="167" class="Symbol">(</a><a id="168" href="Data.Product.html#map" class="Function">map</a><a id="171" class="Symbol">)</a>
<a id="173" class="Keyword">open</a> <a id="178" class="Keyword">import</a> <a id="185" href="Data.Unit.html" class="Module">Data.Unit</a>
<a id="195" class="Keyword">open</a> <a id="200" class="Keyword">import</a> <a id="207" href="Data.Star.html" class="Module">Data.Star</a> <a id="217" class="Keyword">hiding</a> <a id="224" class="Symbol">(</a><a id="225" href="Data.Star.html#return" class="Function">return</a> <a id="232" class="Symbol">;</a> <a id="234" href="Data.Star.html#_%3E%3E%3D_" class="Function Operator">_&gt;&gt;=_</a> <a id="240" class="Symbol">;</a> <a id="242" href="Data.Star.html#map" class="Function">map</a><a id="245" class="Symbol">)</a>
<a id="247" class="Keyword">open</a> <a id="252" class="Keyword">import</a> <a id="259" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="297" class="Keyword">hiding</a> <a id="304" class="Symbol">(</a><a id="305" href="Relation.Binary.PropositionalEquality.html#Reveal_%C2%B7_is_.%5B_%5D" class="InductiveConstructor Operator">[_]</a><a id="308" class="Symbol">)</a>
<a id="310" class="Keyword">open</a> <a id="315" href="Relation.Binary.PropositionalEquality.html#%E2%89%A1-Reasoning" class="Module">≡-Reasoning</a>
<a id="327" class="Keyword">open</a> <a id="332" class="Keyword">import</a> <a id="339" href="Data.Empty.html" class="Module">Data.Empty</a>

<a id="351" class="Comment">-- This file contains the syntax for the definitional interpreter for</a>
<a id="421" class="Comment">-- MJ using scopes and frames, described in Section 5 of the paper.</a>

<a id="490" class="Comment">-- The definitions are parameterized by a scope graph of size `k`, as</a>
<a id="560" class="Comment">-- usual:</a>

<a id="571" class="Keyword">module</a> <a id="578" href="MJSF.Syntax.html" class="Module">MJSF.Syntax</a> <a id="590" class="Symbol">(</a><a id="591" href="MJSF.Syntax.html#591" class="Bound">k</a> <a id="593" class="Symbol">:</a> <a id="595" href="Agda.Builtin.Nat.html#%E2%84%95" class="Datatype">ℕ</a><a id="596" class="Symbol">)</a> <a id="598" class="Keyword">where</a>

<a id="605" class="Keyword">private</a>
  <a id="Scope" href="MJSF.Syntax.html#Scope" class="Function">Scope</a> <a id="621" class="Symbol">:</a> <a id="623" class="PrimitiveType">Set</a>
  <a id="629" href="MJSF.Syntax.html#Scope" class="Function">Scope</a> <a id="635" class="Symbol">=</a> <a id="637" href="Data.Fin.html#Fin" class="Datatype">Fin</a> <a id="641" href="MJSF.Syntax.html#591" class="Bound">k</a>

<a id="644" class="Comment">-- Return types, method parameters, and field types in MJ are given by</a>
<a id="715" class="Comment">-- `VTy`:</a>

<a id="726" class="Keyword">data</a> <a id="VTy" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="735" class="Symbol">:</a> <a id="737" class="PrimitiveType">Set</a> <a id="741" class="Keyword">where</a>
  <a id="VTy.void" href="MJSF.Syntax.html#VTy.void" class="InductiveConstructor">void</a> <a id="754" class="Symbol">:</a> <a id="756" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a>
  <a id="VTy.int" href="MJSF.Syntax.html#VTy.int" class="InductiveConstructor">int</a> <a id="766" class="Symbol">:</a> <a id="768" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a>
  <a id="VTy.ref" href="MJSF.Syntax.html#VTy.ref" class="InductiveConstructor">ref</a> <a id="778" class="Symbol">:</a> <a id="780" href="MJSF.Syntax.html#Scope" class="Function">Scope</a> <a id="786" class="Symbol">→</a> <a id="788" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a>

<a id="793" class="Comment">-- The scope graph library is parameterized by a single kind of type,</a>
<a id="863" class="Comment">-- to be used for all declarations.  But there are three different</a>
<a id="930" class="Comment">-- kinds of names (declarations) in MJ: value declarations (e.g., for</a>
<a id="1000" class="Comment">-- fields and method parameters); method declarations; and class</a>
<a id="1065" class="Comment">-- declarations.</a>
<a id="1082" class="Comment">--</a>
<a id="1085" class="Comment">-- We use the following type to &quot;tag&quot; and distinguish the various</a>
<a id="1151" class="Comment">-- kinds of declarations.</a>

<a id="1178" class="Keyword">data</a> <a id="Ty" href="MJSF.Syntax.html#Ty" class="Datatype">Ty</a> <a id="1186" class="Symbol">:</a> <a id="1188" class="PrimitiveType">Set</a> <a id="1192" class="Keyword">where</a>
  <a id="Ty.vᵗ" href="MJSF.Syntax.html#Ty.v%E1%B5%97" class="InductiveConstructor">vᵗ</a> <a id="1203" class="Symbol">:</a> <a id="1205" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="1209" class="Symbol">→</a> <a id="1211" href="MJSF.Syntax.html#Ty" class="Datatype">Ty</a>
  <a id="Ty.mᵗ" href="MJSF.Syntax.html#Ty.m%E1%B5%97" class="InductiveConstructor">mᵗ</a> <a id="1219" class="Symbol">:</a> <a id="1221" href="Agda.Builtin.List.html#List" class="Datatype">List</a> <a id="1226" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="1230" class="Symbol">→</a> <a id="1232" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="1236" class="Symbol">→</a> <a id="1238" href="MJSF.Syntax.html#Ty" class="Datatype">Ty</a>
  <a id="Ty.cᵗ" href="MJSF.Syntax.html#Ty.c%E1%B5%97" class="InductiveConstructor">cᵗ</a> <a id="1246" class="Symbol">:</a> <a id="1248" href="MJSF.Syntax.html#Scope" class="Function">Scope</a> <a id="1254" class="Symbol">→</a> <a id="1256" href="MJSF.Syntax.html#Scope" class="Function">Scope</a> <a id="1262" class="Symbol">→</a> <a id="1264" href="MJSF.Syntax.html#Ty" class="Datatype">Ty</a>

<a id="1268" class="Comment">-- We specialize the scopes-and-frames library to the size of our</a>
<a id="1334" class="Comment">-- scope graph, and the tagged type for declarations above:</a>

<a id="1395" class="Keyword">open</a> <a id="1400" class="Keyword">import</a> <a id="1407" href="ScopesFrames.ScopesFrames.html" class="Module">ScopesFrames.ScopesFrames</a> <a id="1433" href="MJSF.Syntax.html#591" class="Bound">k</a> <a id="1435" href="MJSF.Syntax.html#Ty" class="Datatype">Ty</a> <a id="1438" class="Keyword">hiding</a> <a id="1445" class="Symbol">(</a>Scope<a id="1451" class="Symbol">)</a>


<a id="1455" class="Comment">-------------</a>
<a id="1469" class="Comment">-- HAS TAG --</a>
<a id="1483" class="Comment">-------------</a>

<a id="1498" class="Comment">-- As summarized above, declarations may be either value-typed,</a>
<a id="1562" class="Comment">-- method-typed, or class-typed.  We introduce some parameterized</a>
<a id="1628" class="Comment">-- predicates which only hold for a particular tag.  This is useful</a>
<a id="1696" class="Comment">-- for saying that some list of types `ts : List Ty` only contains</a>
<a id="1763" class="Comment">-- value types, and that a particular property holds for each of those</a>
<a id="1834" class="Comment">-- value types.  For example, the type `All (#v (λ _ → ⊤)) ts`</a>
<a id="1897" class="Comment">-- guarantees that `ts` contains only value types, and does not</a>
<a id="1961" class="Comment">-- constrain the value types further (due to the use of `⊤`).</a>

<a id="2024" class="Keyword">data</a> <a id="#v" href="MJSF.Syntax.html#%23v" class="Datatype">#v</a> <a id="2032" class="Symbol">:</a> <a id="2034" class="Symbol">(</a><a id="2035" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="2039" class="Symbol">→</a> <a id="2041" class="PrimitiveType">Set</a><a id="2044" class="Symbol">)</a> <a id="2046" class="Symbol">→</a> <a id="2048" href="MJSF.Syntax.html#Ty" class="Datatype">Ty</a> <a id="2051" class="Symbol">→</a> <a id="2053" class="PrimitiveType">Set</a> <a id="2057" class="Keyword">where</a>
  <a id="#v.#v&#39;" href="MJSF.Syntax.html#%23v.%23v%27" class="InductiveConstructor">#v&#39;</a> <a id="2069" class="Symbol">:</a> <a id="2071" class="Symbol">∀</a> <a id="2073" class="Symbol">{</a><a id="2074" href="MJSF.Syntax.html#2074" class="Bound">t</a> <a id="2076" href="MJSF.Syntax.html#2076" class="Bound">p</a><a id="2077" class="Symbol">}</a> <a id="2079" class="Symbol">→</a> <a id="2081" href="MJSF.Syntax.html#2076" class="Bound">p</a> <a id="2083" href="MJSF.Syntax.html#2074" class="Bound">t</a> <a id="2085" class="Symbol">→</a> <a id="2087" href="MJSF.Syntax.html#%23v" class="Datatype">#v</a> <a id="2090" href="MJSF.Syntax.html#2076" class="Bound">p</a> <a id="2092" class="Symbol">(</a><a id="2093" href="MJSF.Syntax.html#Ty.v%E1%B5%97" class="InductiveConstructor">vᵗ</a> <a id="2096" href="MJSF.Syntax.html#2074" class="Bound">t</a><a id="2097" class="Symbol">)</a>

<a id="2100" class="Keyword">data</a> <a id="#m" href="MJSF.Syntax.html#%23m" class="Datatype">#m</a> <a id="2108" class="Symbol">:</a> <a id="2110" class="Symbol">(</a><a id="2111" href="Agda.Builtin.List.html#List" class="Datatype">List</a> <a id="2116" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="2120" class="Symbol">→</a> <a id="2122" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="2126" class="Symbol">→</a> <a id="2128" class="PrimitiveType">Set</a><a id="2131" class="Symbol">)</a> <a id="2133" class="Symbol">→</a> <a id="2135" href="MJSF.Syntax.html#Ty" class="Datatype">Ty</a> <a id="2138" class="Symbol">→</a> <a id="2140" class="PrimitiveType">Set</a> <a id="2144" class="Keyword">where</a>
  <a id="#m.#m&#39;" href="MJSF.Syntax.html#%23m.%23m%27" class="InductiveConstructor">#m&#39;</a> <a id="2156" class="Symbol">:</a> <a id="2158" class="Symbol">∀</a> <a id="2160" class="Symbol">{</a><a id="2161" href="MJSF.Syntax.html#2161" class="Bound">ts</a> <a id="2164" href="MJSF.Syntax.html#2164" class="Bound">rt</a> <a id="2167" href="MJSF.Syntax.html#2167" class="Bound">p</a><a id="2168" class="Symbol">}</a> <a id="2170" class="Symbol">→</a> <a id="2172" href="MJSF.Syntax.html#2167" class="Bound">p</a> <a id="2174" href="MJSF.Syntax.html#2161" class="Bound">ts</a> <a id="2177" href="MJSF.Syntax.html#2164" class="Bound">rt</a> <a id="2180" class="Symbol">→</a> <a id="2182" href="MJSF.Syntax.html#%23m" class="Datatype">#m</a> <a id="2185" href="MJSF.Syntax.html#2167" class="Bound">p</a> <a id="2187" class="Symbol">(</a><a id="2188" href="MJSF.Syntax.html#Ty.m%E1%B5%97" class="InductiveConstructor">mᵗ</a> <a id="2191" href="MJSF.Syntax.html#2161" class="Bound">ts</a> <a id="2194" href="MJSF.Syntax.html#2164" class="Bound">rt</a><a id="2196" class="Symbol">)</a>

<a id="2199" class="Keyword">data</a> <a id="#c" href="MJSF.Syntax.html#%23c" class="Datatype">#c</a> <a id="2207" class="Symbol">(</a><a id="2208" href="MJSF.Syntax.html#2208" class="Bound">sʳ</a> <a id="2211" class="Symbol">:</a> <a id="2213" href="MJSF.Syntax.html#Scope" class="Function">Scope</a><a id="2218" class="Symbol">)</a> <a id="2220" class="Symbol">(</a><a id="2221" href="MJSF.Syntax.html#2221" class="Bound">p</a> <a id="2223" class="Symbol">:</a> <a id="2225" href="MJSF.Syntax.html#Scope" class="Function">Scope</a> <a id="2231" class="Symbol">→</a> <a id="2233" class="PrimitiveType">Set</a><a id="2236" class="Symbol">)</a> <a id="2238" class="Symbol">:</a> <a id="2240" href="MJSF.Syntax.html#Ty" class="Datatype">Ty</a> <a id="2243" class="Symbol">→</a> <a id="2245" class="PrimitiveType">Set</a> <a id="2249" class="Keyword">where</a>
  <a id="#c.#c&#39;" href="MJSF.Syntax.html#%23c.%23c%27" class="InductiveConstructor">#c&#39;</a> <a id="2261" class="Symbol">:</a> <a id="2263" class="Symbol">∀</a> <a id="2265" class="Symbol">{</a><a id="2266" href="MJSF.Syntax.html#2266" class="Bound">s</a><a id="2267" class="Symbol">}</a> <a id="2269" class="Symbol">→</a> <a id="2271" href="MJSF.Syntax.html#2221" class="Bound">p</a> <a id="2273" href="MJSF.Syntax.html#2266" class="Bound">s</a> <a id="2275" class="Symbol">→</a> <a id="2277" href="MJSF.Syntax.html#%23c" class="Datatype">#c</a> <a id="2280" href="MJSF.Syntax.html#2208" class="Bound">sʳ</a> <a id="2283" href="MJSF.Syntax.html#2221" class="Bound">p</a> <a id="2285" class="Symbol">(</a><a id="2286" href="MJSF.Syntax.html#Ty.c%E1%B5%97" class="InductiveConstructor">cᵗ</a> <a id="2289" href="MJSF.Syntax.html#2208" class="Bound">sʳ</a> <a id="2292" href="MJSF.Syntax.html#2266" class="Bound">s</a><a id="2293" class="Symbol">)</a>


<a id="2297" class="Keyword">module</a> <a id="SyntaxG" href="MJSF.Syntax.html#SyntaxG" class="Module">SyntaxG</a> <a id="2312" class="Symbol">(</a><a id="2313" href="MJSF.Syntax.html#2313" class="Bound">g</a> <a id="2315" class="Symbol">:</a> <a id="2317" href="ScopesFrames.ScopesFrames.html#1611" class="Function">Graph</a><a id="2322" class="Symbol">)</a> <a id="2324" class="Keyword">where</a>

  <a id="2333" class="Keyword">open</a> <a id="2338" href="ScopesFrames.ScopesFrames.html#UsesGraph" class="Module">UsesGraph</a> <a id="2348" href="MJSF.Syntax.html#2313" class="Bound">g</a>


  <a id="2354" class="Comment">-------------------------------</a>
  <a id="2388" class="Comment">-- SUBTYPING AND INHERITANCE --</a>
  <a id="2422" class="Comment">-------------------------------</a>

  <a id="2457" class="Comment">-- As summarized in the paper, we define sub-typing in terms of</a>
  <a id="2523" class="Comment">-- inheritance edges between class scopes in the scope graph:</a>

  <a id="2588" class="Keyword">data</a> <a id="SyntaxG._&lt;:_" href="MJSF.Syntax.html#SyntaxG._%3C%3A_" class="Datatype Operator">_&lt;:_</a> <a id="2598" class="Symbol">:</a> <a id="2600" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="2604" class="Symbol">→</a> <a id="2606" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="2610" class="Symbol">→</a> <a id="2612" class="PrimitiveType">Set</a> <a id="2616" class="Keyword">where</a>
    <a id="SyntaxG._&lt;:_.refl" href="MJSF.Syntax.html#SyntaxG._%3C%3A_.refl" class="InductiveConstructor">refl</a>   <a id="2633" class="Symbol">:</a>  <a id="2636" class="Symbol">∀</a> <a id="2638" class="Symbol">{</a><a id="2639" href="MJSF.Syntax.html#2639" class="Bound">t</a><a id="2640" class="Symbol">}</a> <a id="2642" class="Symbol">→</a> <a id="2644" href="MJSF.Syntax.html#2639" class="Bound">t</a> <a id="2646" href="MJSF.Syntax.html#SyntaxG._%3C%3A_" class="Datatype Operator">&lt;:</a> <a id="2649" href="MJSF.Syntax.html#2639" class="Bound">t</a>
    <a id="SyntaxG._&lt;:_.super" href="MJSF.Syntax.html#SyntaxG._%3C%3A_.super" class="InductiveConstructor">super</a>  <a id="2662" class="Symbol">:</a>  <a id="2665" class="Symbol">∀</a> <a id="2667" class="Symbol">{</a><a id="2668" href="MJSF.Syntax.html#2668" class="Bound">s1</a> <a id="2671" href="MJSF.Syntax.html#2671" class="Bound">s2</a> <a id="2674" href="MJSF.Syntax.html#2674" class="Bound">t</a><a id="2675" class="Symbol">}</a> <a id="2677" class="Symbol">→</a>
              <a id="2693" href="MJSF.Syntax.html#2671" class="Bound">s2</a> <a id="2696" href="Data.List.Any.Membership.html#Propositional.M._%E2%88%88_" class="Function Operator">∈</a> <a id="2698" href="ScopesFrames.ScopesFrames.html#1858" class="Function">edgesOf</a> <a id="2706" href="MJSF.Syntax.html#2668" class="Bound">s1</a> <a id="2709" class="Symbol">→</a> <a id="2711" class="Symbol">(</a><a id="2712" href="MJSF.Syntax.html#VTy.ref" class="InductiveConstructor">ref</a> <a id="2716" href="MJSF.Syntax.html#2671" class="Bound">s2</a><a id="2718" class="Symbol">)</a> <a id="2720" href="MJSF.Syntax.html#SyntaxG._%3C%3A_" class="Datatype Operator">&lt;:</a> <a id="2723" href="MJSF.Syntax.html#2674" class="Bound">t</a> <a id="2725" class="Symbol">→</a> <a id="2727" class="Symbol">(</a><a id="2728" href="MJSF.Syntax.html#VTy.ref" class="InductiveConstructor">ref</a> <a id="2732" href="MJSF.Syntax.html#2668" class="Bound">s1</a><a id="2734" class="Symbol">)</a> <a id="2736" href="MJSF.Syntax.html#SyntaxG._%3C%3A_" class="Datatype Operator">&lt;:</a> <a id="2739" href="MJSF.Syntax.html#2674" class="Bound">t</a>

  <a id="2744" class="Comment">-- Scope graphs may be cyclic, and there is (in theory) nothing that</a>
  <a id="2815" class="Comment">-- prevents classes from mutually extending one another, thereby</a>
  <a id="2882" class="Comment">-- creating cyclic inheritance chains.  The following `Inherits`</a>
  <a id="2949" class="Comment">-- type witnesses that a given class scope has a finite set of</a>
  <a id="3014" class="Comment">-- inheritance steps.  This property is useful for defining object</a>
  <a id="3083" class="Comment">-- initialization in a way that lets Agda prove that object</a>
  <a id="3145" class="Comment">-- initialization takes finite time (i.e., no need for fuel).</a>

  <a id="3210" class="Keyword">data</a> <a id="SyntaxG.Inherits" href="MJSF.Syntax.html#SyntaxG.Inherits" class="Datatype">Inherits</a> <a id="3224" class="Symbol">:</a> <a id="3226" href="MJSF.Syntax.html#Scope" class="Function">Scope</a> <a id="3232" class="Symbol">→</a> <a id="3234" href="MJSF.Syntax.html#Scope" class="Function">Scope</a> <a id="3240" class="Symbol">→</a> <a id="3242" class="PrimitiveType">Set</a> <a id="3246" class="Keyword">where</a>
    <a id="SyntaxG.Inherits.obj" href="MJSF.Syntax.html#SyntaxG.Inherits.obj" class="InductiveConstructor">obj</a>   <a id="3262" class="Symbol">:</a> <a id="3264" class="Symbol">∀</a> <a id="3266" href="MJSF.Syntax.html#3266" class="Bound">s</a> <a id="3268" class="Symbol">{</a><a id="3269" href="MJSF.Syntax.html#3269" class="Bound">ds</a> <a id="3272" href="MJSF.Syntax.html#3272" class="Bound">sʳ</a><a id="3274" class="Symbol">}</a> <a id="3276" class="Symbol">⦃</a> <a id="3278" href="MJSF.Syntax.html#3278" class="Bound">shape</a> <a id="3284" class="Symbol">:</a> <a id="3286" href="MJSF.Syntax.html#2313" class="Bound">g</a> <a id="3288" href="MJSF.Syntax.html#3266" class="Bound">s</a> <a id="3290" href="Agda.Builtin.Equality.html#_%E2%89%A1_" class="Datatype Operator">≡</a> <a id="3292" class="Symbol">(</a><a id="3293" href="MJSF.Syntax.html#3269" class="Bound">ds</a> <a id="3296" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="3298" href="Data.List.Base.html#%5B_%5D" class="Function Operator">[</a> <a id="3300" href="MJSF.Syntax.html#3272" class="Bound">sʳ</a> <a id="3303" href="Data.List.Base.html#%5B_%5D" class="Function Operator">]</a><a id="3304" class="Symbol">)</a> <a id="3306" class="Symbol">⦄</a> <a id="3308" class="Symbol">→</a> <a id="3310" href="MJSF.Syntax.html#SyntaxG.Inherits" class="Datatype">Inherits</a> <a id="3319" href="MJSF.Syntax.html#3266" class="Bound">s</a> <a id="3321" href="MJSF.Syntax.html#3266" class="Bound">s</a>
    <a id="SyntaxG.Inherits.super" href="MJSF.Syntax.html#SyntaxG.Inherits.super" class="InductiveConstructor">super</a> <a id="3333" class="Symbol">:</a> <a id="3335" class="Symbol">∀</a> <a id="3337" class="Symbol">{</a><a id="3338" href="MJSF.Syntax.html#3338" class="Bound">s</a> <a id="3340" href="MJSF.Syntax.html#3340" class="Bound">ds</a> <a id="3343" href="MJSF.Syntax.html#3343" class="Bound">sʳ</a> <a id="3346" href="MJSF.Syntax.html#3346" class="Bound">sᵖ</a> <a id="3349" href="MJSF.Syntax.html#3349" class="Bound">s&#39;</a><a id="3351" class="Symbol">}</a> <a id="3353" class="Symbol">⦃</a> <a id="3355" href="MJSF.Syntax.html#3355" class="Bound">shape</a> <a id="3361" class="Symbol">:</a> <a id="3363" href="MJSF.Syntax.html#2313" class="Bound">g</a> <a id="3365" href="MJSF.Syntax.html#3338" class="Bound">s</a> <a id="3367" href="Agda.Builtin.Equality.html#_%E2%89%A1_" class="Datatype Operator">≡</a> <a id="3369" class="Symbol">(</a><a id="3370" href="MJSF.Syntax.html#3340" class="Bound">ds</a> <a id="3373" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="3375" href="MJSF.Syntax.html#3343" class="Bound">sʳ</a> <a id="3378" href="Agda.Builtin.List.html#List._%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="3380" href="MJSF.Syntax.html#3346" class="Bound">sᵖ</a> <a id="3383" href="Agda.Builtin.List.html#List._%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="3385" href="Agda.Builtin.List.html#List.%5B%5D" class="InductiveConstructor">[]</a><a id="3387" class="Symbol">)</a> <a id="3389" class="Symbol">⦄</a> <a id="3391" class="Symbol">→</a> <a id="3393" href="MJSF.Syntax.html#SyntaxG.Inherits" class="Datatype">Inherits</a> <a id="3402" href="MJSF.Syntax.html#3346" class="Bound">sᵖ</a> <a id="3405" href="MJSF.Syntax.html#3349" class="Bound">s&#39;</a> <a id="3408" class="Symbol">→</a> <a id="3410" href="MJSF.Syntax.html#SyntaxG.Inherits" class="Datatype">Inherits</a> <a id="3419" href="MJSF.Syntax.html#3338" class="Bound">s</a> <a id="3421" href="MJSF.Syntax.html#3349" class="Bound">s&#39;</a>


  <a id="3428" class="Comment">------------</a>
  <a id="3443" class="Comment">-- SYNTAX --</a>
  <a id="3458" class="Comment">------------</a>

  <a id="3474" class="Comment">-- The expressions of MJ where the `s` in `Expr s t` is the lexical</a>
  <a id="3544" class="Comment">-- context scope:</a>

  <a id="3565" class="Keyword">data</a> <a id="SyntaxG.Expr" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="3575" class="Symbol">(</a><a id="3576" href="MJSF.Syntax.html#3576" class="Bound">s</a> <a id="3578" class="Symbol">:</a> <a id="3580" href="MJSF.Syntax.html#Scope" class="Function">Scope</a><a id="3585" class="Symbol">)</a> <a id="3587" class="Symbol">:</a> <a id="3589" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="3593" class="Symbol">→</a> <a id="3595" class="PrimitiveType">Set</a> <a id="3599" class="Keyword">where</a>
    <a id="SyntaxG.Expr.call" href="MJSF.Syntax.html#SyntaxG.Expr.call" class="InductiveConstructor">call</a>     <a id="3618" class="Symbol">:</a>  <a id="3621" class="Symbol">∀</a> <a id="3623" class="Symbol">{</a><a id="3624" href="MJSF.Syntax.html#3624" class="Bound">s&#39;</a> <a id="3627" href="MJSF.Syntax.html#3627" class="Bound">ts</a> <a id="3630" href="MJSF.Syntax.html#3630" class="Bound">t</a><a id="3631" class="Symbol">}</a> <a id="3633" class="Symbol">→</a> <a id="3635" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="3640" href="MJSF.Syntax.html#3576" class="Bound">s</a> <a id="3642" class="Symbol">(</a><a id="3643" href="MJSF.Syntax.html#VTy.ref" class="InductiveConstructor">ref</a> <a id="3647" href="MJSF.Syntax.html#3624" class="Bound">s&#39;</a><a id="3649" class="Symbol">)</a> <a id="3651" class="Symbol">→</a> <a id="3653" class="Comment">-- receiver</a>
                <a id="3681" class="Symbol">(</a><a id="3682" href="MJSF.Syntax.html#3624" class="Bound">s&#39;</a> <a id="3685" href="ScopesFrames.ScopesFrames.html#2202" class="Datatype Operator">↦</a> <a id="3687" class="Symbol">(</a><a id="3688" href="MJSF.Syntax.html#Ty.m%E1%B5%97" class="InductiveConstructor">mᵗ</a> <a id="3691" href="MJSF.Syntax.html#3627" class="Bound">ts</a> <a id="3694" href="MJSF.Syntax.html#3630" class="Bound">t</a><a id="3695" class="Symbol">))</a> <a id="3698" class="Symbol">→</a>              <a id="3713" class="Comment">-- path to method declaration</a>
                <a id="3759" href="Data.List.All.html#All" class="Datatype">All</a> <a id="3763" class="Symbol">(</a><a id="3764" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="3769" href="MJSF.Syntax.html#3576" class="Bound">s</a><a id="3770" class="Symbol">)</a> <a id="3772" href="MJSF.Syntax.html#3627" class="Bound">ts</a> <a id="3775" class="Symbol">→</a>               <a id="3791" class="Comment">-- argument list</a>
                <a id="3824" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="3829" href="MJSF.Syntax.html#3576" class="Bound">s</a> <a id="3831" href="MJSF.Syntax.html#3630" class="Bound">t</a>
    <a id="SyntaxG.Expr.get" href="MJSF.Syntax.html#SyntaxG.Expr.get" class="InductiveConstructor">get</a>      <a id="3846" class="Symbol">:</a>  <a id="3849" class="Symbol">∀</a> <a id="3851" class="Symbol">{</a><a id="3852" href="MJSF.Syntax.html#3852" class="Bound">s&#39;</a> <a id="3855" href="MJSF.Syntax.html#3855" class="Bound">t</a><a id="3856" class="Symbol">}</a> <a id="3858" class="Symbol">→</a> <a id="3860" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="3865" href="MJSF.Syntax.html#3576" class="Bound">s</a> <a id="3867" class="Symbol">(</a><a id="3868" href="MJSF.Syntax.html#VTy.ref" class="InductiveConstructor">ref</a> <a id="3872" href="MJSF.Syntax.html#3852" class="Bound">s&#39;</a><a id="3874" class="Symbol">)</a> <a id="3876" class="Symbol">→</a> <a id="3878" class="Symbol">(</a><a id="3879" href="MJSF.Syntax.html#3852" class="Bound">s&#39;</a> <a id="3882" href="ScopesFrames.ScopesFrames.html#2202" class="Datatype Operator">↦</a> <a id="3884" href="MJSF.Syntax.html#Ty.v%E1%B5%97" class="InductiveConstructor">vᵗ</a> <a id="3887" href="MJSF.Syntax.html#3855" class="Bound">t</a><a id="3888" class="Symbol">)</a> <a id="3890" class="Symbol">→</a> <a id="3892" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="3897" href="MJSF.Syntax.html#3576" class="Bound">s</a> <a id="3899" href="MJSF.Syntax.html#3855" class="Bound">t</a>
    <a id="SyntaxG.Expr.var" href="MJSF.Syntax.html#SyntaxG.Expr.var" class="InductiveConstructor">var</a>      <a id="3914" class="Symbol">:</a>  <a id="3917" class="Symbol">∀</a> <a id="3919" class="Symbol">{</a><a id="3920" href="MJSF.Syntax.html#3920" class="Bound">t</a><a id="3921" class="Symbol">}</a> <a id="3923" class="Symbol">→</a> <a id="3925" class="Symbol">(</a><a id="3926" href="MJSF.Syntax.html#3576" class="Bound">s</a> <a id="3928" href="ScopesFrames.ScopesFrames.html#2202" class="Datatype Operator">↦</a> <a id="3930" href="MJSF.Syntax.html#Ty.v%E1%B5%97" class="InductiveConstructor">vᵗ</a> <a id="3933" href="MJSF.Syntax.html#3920" class="Bound">t</a><a id="3934" class="Symbol">)</a> <a id="3936" class="Symbol">→</a> <a id="3938" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="3943" href="MJSF.Syntax.html#3576" class="Bound">s</a> <a id="3945" href="MJSF.Syntax.html#3920" class="Bound">t</a>
    <a id="SyntaxG.Expr.new" href="MJSF.Syntax.html#SyntaxG.Expr.new" class="InductiveConstructor">new</a>      <a id="3960" class="Symbol">:</a>  <a id="3963" class="Symbol">∀</a> <a id="3965" class="Symbol">{</a><a id="3966" href="MJSF.Syntax.html#3966" class="Bound">sʳ</a> <a id="3969" href="MJSF.Syntax.html#3969" class="Bound">s&#39;</a><a id="3971" class="Symbol">}</a> <a id="3973" class="Symbol">→</a> <a id="3975" href="MJSF.Syntax.html#3576" class="Bound">s</a> <a id="3977" href="ScopesFrames.ScopesFrames.html#2202" class="Datatype Operator">↦</a> <a id="3979" href="MJSF.Syntax.html#Ty.c%E1%B5%97" class="InductiveConstructor">cᵗ</a> <a id="3982" href="MJSF.Syntax.html#3966" class="Bound">sʳ</a> <a id="3985" href="MJSF.Syntax.html#3969" class="Bound">s&#39;</a> <a id="3988" class="Symbol">→</a> <a id="3990" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="3995" href="MJSF.Syntax.html#3576" class="Bound">s</a> <a id="3997" class="Symbol">(</a><a id="3998" href="MJSF.Syntax.html#VTy.ref" class="InductiveConstructor">ref</a> <a id="4002" href="MJSF.Syntax.html#3969" class="Bound">s&#39;</a><a id="4004" class="Symbol">)</a> <a id="4006" class="Comment">-- path to class declaration</a>
    <a id="SyntaxG.Expr.null" href="MJSF.Syntax.html#SyntaxG.Expr.null" class="InductiveConstructor">null</a>     <a id="4048" class="Symbol">:</a>  <a id="4051" class="Symbol">∀</a> <a id="4053" class="Symbol">{</a><a id="4054" href="MJSF.Syntax.html#4054" class="Bound">s&#39;</a><a id="4056" class="Symbol">}</a> <a id="4058" class="Symbol">→</a> <a id="4060" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="4065" href="MJSF.Syntax.html#3576" class="Bound">s</a> <a id="4067" class="Symbol">(</a><a id="4068" href="MJSF.Syntax.html#VTy.ref" class="InductiveConstructor">ref</a> <a id="4072" href="MJSF.Syntax.html#4054" class="Bound">s&#39;</a><a id="4074" class="Symbol">)</a>
    <a id="SyntaxG.Expr.num" href="MJSF.Syntax.html#SyntaxG.Expr.num" class="InductiveConstructor">num</a>      <a id="4089" class="Symbol">:</a>  <a id="4092" href="Agda.Builtin.Int.html#%E2%84%A4" class="Datatype">ℤ</a> <a id="4094" class="Symbol">→</a> <a id="4096" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="4101" href="MJSF.Syntax.html#3576" class="Bound">s</a> <a id="4103" href="MJSF.Syntax.html#VTy.int" class="InductiveConstructor">int</a>
    <a id="SyntaxG.Expr.iop" href="MJSF.Syntax.html#SyntaxG.Expr.iop" class="InductiveConstructor">iop</a>      <a id="4120" class="Symbol">:</a>  <a id="4123" class="Symbol">(</a><a id="4124" href="Agda.Builtin.Int.html#%E2%84%A4" class="Datatype">ℤ</a> <a id="4126" class="Symbol">→</a> <a id="4128" href="Agda.Builtin.Int.html#%E2%84%A4" class="Datatype">ℤ</a> <a id="4130" class="Symbol">→</a> <a id="4132" href="Agda.Builtin.Int.html#%E2%84%A4" class="Datatype">ℤ</a><a id="4133" class="Symbol">)</a> <a id="4135" class="Symbol">→</a> <a id="4137" class="Symbol">(</a><a id="4138" href="MJSF.Syntax.html#4138" class="Bound">l</a> <a id="4140" href="MJSF.Syntax.html#4140" class="Bound">r</a> <a id="4142" class="Symbol">:</a> <a id="4144" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="4149" href="MJSF.Syntax.html#3576" class="Bound">s</a> <a id="4151" href="MJSF.Syntax.html#VTy.int" class="InductiveConstructor">int</a><a id="4154" class="Symbol">)</a> <a id="4156" class="Symbol">→</a> <a id="4158" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="4163" href="MJSF.Syntax.html#3576" class="Bound">s</a> <a id="4165" href="MJSF.Syntax.html#VTy.int" class="InductiveConstructor">int</a>
    <a id="SyntaxG.Expr.upcast" href="MJSF.Syntax.html#SyntaxG.Expr.upcast" class="InductiveConstructor">upcast</a>   <a id="4182" class="Symbol">:</a>  <a id="4185" class="Symbol">∀</a> <a id="4187" class="Symbol">{</a><a id="4188" href="MJSF.Syntax.html#4188" class="Bound">t&#39;</a> <a id="4191" href="MJSF.Syntax.html#4191" class="Bound">t</a><a id="4192" class="Symbol">}</a> <a id="4194" class="Symbol">→</a> <a id="4196" href="MJSF.Syntax.html#4188" class="Bound">t&#39;</a> <a id="4199" href="MJSF.Syntax.html#SyntaxG._%3C%3A_" class="Datatype Operator">&lt;:</a> <a id="4202" href="MJSF.Syntax.html#4191" class="Bound">t</a> <a id="4204" class="Symbol">→</a> <a id="4206" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="4211" href="MJSF.Syntax.html#3576" class="Bound">s</a> <a id="4213" href="MJSF.Syntax.html#4188" class="Bound">t&#39;</a> <a id="4216" class="Symbol">→</a> <a id="4218" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="4223" href="MJSF.Syntax.html#3576" class="Bound">s</a> <a id="4225" href="MJSF.Syntax.html#4191" class="Bound">t</a>
    <a id="SyntaxG.Expr.this" href="MJSF.Syntax.html#SyntaxG.Expr.this" class="InductiveConstructor">this</a>     <a id="4240" class="Symbol">:</a>  <a id="4243" class="Symbol">∀</a> <a id="4245" class="Symbol">{</a><a id="4246" href="MJSF.Syntax.html#4246" class="Bound">s&#39;</a> <a id="4249" href="MJSF.Syntax.html#4249" class="Bound">self</a><a id="4253" class="Symbol">}</a> <a id="4255" class="Symbol">→</a> <a id="4257" href="MJSF.Syntax.html#3576" class="Bound">s</a> <a id="4259" href="ScopesFrames.ScopesFrames.html#2073" class="Datatype Operator">⟶</a> <a id="4261" href="MJSF.Syntax.html#4246" class="Bound">s&#39;</a> <a id="4264" class="Symbol">→</a> <a id="4266" href="MJSF.Syntax.html#4249" class="Bound">self</a> <a id="4271" href="Data.List.Any.Membership.html#Propositional.M._%E2%88%88_" class="Function Operator">∈</a> <a id="4273" href="ScopesFrames.ScopesFrames.html#1858" class="Function">edgesOf</a> <a id="4281" href="MJSF.Syntax.html#4246" class="Bound">s&#39;</a> <a id="4284" class="Symbol">→</a> <a id="4286" class="Comment">-- the `self` of objects is given by the lexical parent edge of a method</a>
                <a id="4375" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="4380" href="MJSF.Syntax.html#3576" class="Bound">s</a> <a id="4382" class="Symbol">(</a><a id="4383" href="MJSF.Syntax.html#VTy.ref" class="InductiveConstructor">ref</a> <a id="4387" href="MJSF.Syntax.html#4249" class="Bound">self</a><a id="4391" class="Symbol">)</a>

  <a id="4396" class="Comment">-- The statements of MJ where the `s` in `Stmt s t s&#39;` is the</a>
  <a id="4460" class="Comment">-- lexical context scope before the statement `t` is the return type</a>
  <a id="4531" class="Comment">-- of the statement, and `s&#39;` is the leixcal context scope after the</a>
  <a id="4602" class="Comment">-- statement.</a>

  <a id="4619" class="Keyword">mutual</a>
    <a id="4630" class="Keyword">data</a> <a id="SyntaxG.Stmt" href="MJSF.Syntax.html#SyntaxG.Stmt" class="Datatype">Stmt</a> <a id="4640" class="Symbol">(</a><a id="4641" href="MJSF.Syntax.html#4641" class="Bound">s</a> <a id="4643" class="Symbol">:</a> <a id="4645" href="MJSF.Syntax.html#Scope" class="Function">Scope</a><a id="4650" class="Symbol">)(</a><a id="4652" href="MJSF.Syntax.html#4652" class="Bound">r</a> <a id="4654" class="Symbol">:</a> <a id="4656" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a><a id="4659" class="Symbol">)</a> <a id="4661" class="Symbol">:</a> <a id="4663" href="MJSF.Syntax.html#Scope" class="Function">Scope</a> <a id="4669" class="Symbol">→</a> <a id="4671" class="PrimitiveType">Set</a> <a id="4675" class="Keyword">where</a>
      <a id="SyntaxG.Stmt.do" href="MJSF.Syntax.html#SyntaxG.Stmt.do" class="InductiveConstructor">do</a>    <a id="4693" class="Symbol">:</a> <a id="4695" class="Symbol">∀</a> <a id="4697" class="Symbol">{</a><a id="4698" href="MJSF.Syntax.html#4698" class="Bound">t&#39;</a><a id="4700" class="Symbol">}</a> <a id="4702" class="Symbol">→</a> <a id="4704" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="4709" href="MJSF.Syntax.html#4641" class="Bound">s</a> <a id="4711" href="MJSF.Syntax.html#4698" class="Bound">t&#39;</a> <a id="4714" class="Symbol">→</a> <a id="4716" href="MJSF.Syntax.html#SyntaxG.Stmt" class="Datatype">Stmt</a> <a id="4721" href="MJSF.Syntax.html#4641" class="Bound">s</a> <a id="4723" href="MJSF.Syntax.html#4652" class="Bound">r</a> <a id="4725" href="MJSF.Syntax.html#4641" class="Bound">s</a>
      <a id="SyntaxG.Stmt.ifz" href="MJSF.Syntax.html#SyntaxG.Stmt.ifz" class="InductiveConstructor">ifz</a>   <a id="4739" class="Symbol">:</a> <a id="4741" class="Symbol">∀</a> <a id="4743" class="Symbol">{</a><a id="4744" href="MJSF.Syntax.html#4744" class="Bound">s&#39;</a> <a id="4747" href="MJSF.Syntax.html#4747" class="Bound">s&#39;&#39;</a> <a id="4751" class="Symbol">:</a> <a id="4753" href="MJSF.Syntax.html#Scope" class="Function">Scope</a><a id="4758" class="Symbol">}</a> <a id="4760" class="Symbol">→</a> <a id="4762" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="4767" href="MJSF.Syntax.html#4641" class="Bound">s</a> <a id="4769" href="MJSF.Syntax.html#VTy.int" class="InductiveConstructor">int</a> <a id="4773" class="Symbol">→</a> <a id="4775" href="MJSF.Syntax.html#SyntaxG.Stmt" class="Datatype">Stmt</a> <a id="4780" href="MJSF.Syntax.html#4641" class="Bound">s</a> <a id="4782" href="MJSF.Syntax.html#4652" class="Bound">r</a> <a id="4784" href="MJSF.Syntax.html#4641" class="Bound">s</a> <a id="4786" class="Symbol">→</a> <a id="4788" href="MJSF.Syntax.html#SyntaxG.Stmt" class="Datatype">Stmt</a> <a id="4793" href="MJSF.Syntax.html#4641" class="Bound">s</a> <a id="4795" href="MJSF.Syntax.html#4652" class="Bound">r</a> <a id="4797" href="MJSF.Syntax.html#4641" class="Bound">s</a> <a id="4799" class="Symbol">→</a> <a id="4801" href="MJSF.Syntax.html#SyntaxG.Stmt" class="Datatype">Stmt</a> <a id="4806" href="MJSF.Syntax.html#4641" class="Bound">s</a> <a id="4808" href="MJSF.Syntax.html#4652" class="Bound">r</a> <a id="4810" href="MJSF.Syntax.html#4641" class="Bound">s</a> <a id="4812" class="Comment">-- branches are blocks</a>
      <a id="SyntaxG.Stmt.set" href="MJSF.Syntax.html#SyntaxG.Stmt.set" class="InductiveConstructor">set</a>   <a id="4847" class="Symbol">:</a> <a id="4849" class="Symbol">∀</a> <a id="4851" class="Symbol">{</a><a id="4852" href="MJSF.Syntax.html#4852" class="Bound">s&#39;</a> <a id="4855" href="MJSF.Syntax.html#4855" class="Bound">t&#39;</a><a id="4857" class="Symbol">}</a> <a id="4859" class="Symbol">→</a> <a id="4861" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="4866" href="MJSF.Syntax.html#4641" class="Bound">s</a> <a id="4868" class="Symbol">(</a><a id="4869" href="MJSF.Syntax.html#VTy.ref" class="InductiveConstructor">ref</a> <a id="4873" href="MJSF.Syntax.html#4852" class="Bound">s&#39;</a><a id="4875" class="Symbol">)</a> <a id="4877" class="Symbol">→</a> <a id="4879" class="Symbol">(</a><a id="4880" href="MJSF.Syntax.html#4852" class="Bound">s&#39;</a> <a id="4883" href="ScopesFrames.ScopesFrames.html#2202" class="Datatype Operator">↦</a> <a id="4885" href="MJSF.Syntax.html#Ty.v%E1%B5%97" class="InductiveConstructor">vᵗ</a> <a id="4888" href="MJSF.Syntax.html#4855" class="Bound">t&#39;</a><a id="4890" class="Symbol">)</a> <a id="4892" class="Symbol">→</a> <a id="4894" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="4899" href="MJSF.Syntax.html#4641" class="Bound">s</a> <a id="4901" href="MJSF.Syntax.html#4855" class="Bound">t&#39;</a> <a id="4904" class="Symbol">→</a> <a id="4906" href="MJSF.Syntax.html#SyntaxG.Stmt" class="Datatype">Stmt</a> <a id="4911" href="MJSF.Syntax.html#4641" class="Bound">s</a> <a id="4913" href="MJSF.Syntax.html#4652" class="Bound">r</a> <a id="4915" href="MJSF.Syntax.html#4641" class="Bound">s</a>
      <a id="SyntaxG.Stmt.loc" href="MJSF.Syntax.html#SyntaxG.Stmt.loc" class="InductiveConstructor">loc</a>   <a id="4929" class="Symbol">:</a> <a id="4931" class="Symbol">∀</a> <a id="4933" class="Symbol">(</a><a id="4934" href="MJSF.Syntax.html#4934" class="Bound">s&#39;</a> <a id="4937" class="Symbol">:</a> <a id="4939" href="MJSF.Syntax.html#Scope" class="Function">Scope</a><a id="4944" class="Symbol">)(</a><a id="4946" href="MJSF.Syntax.html#4946" class="Bound">t&#39;</a> <a id="4949" class="Symbol">:</a> <a id="4951" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a><a id="4954" class="Symbol">)⦃</a> <a id="4957" href="MJSF.Syntax.html#4957" class="Bound">shape</a> <a id="4963" class="Symbol">:</a> <a id="4965" href="MJSF.Syntax.html#2313" class="Bound">g</a> <a id="4967" href="MJSF.Syntax.html#4934" class="Bound">s&#39;</a> <a id="4970" href="Agda.Builtin.Equality.html#_%E2%89%A1_" class="Datatype Operator">≡</a> <a id="4972" class="Symbol">(</a><a id="4973" href="Data.List.Base.html#%5B_%5D" class="Function Operator">[</a> <a id="4975" href="MJSF.Syntax.html#Ty.v%E1%B5%97" class="InductiveConstructor">vᵗ</a> <a id="4978" href="MJSF.Syntax.html#4946" class="Bound">t&#39;</a> <a id="4981" href="Data.List.Base.html#%5B_%5D" class="Function Operator">]</a> <a id="4983" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="4985" href="Data.List.Base.html#%5B_%5D" class="Function Operator">[</a> <a id="4987" href="MJSF.Syntax.html#4641" class="Bound">s</a> <a id="4989" href="Data.List.Base.html#%5B_%5D" class="Function Operator">]</a><a id="4990" class="Symbol">)</a> <a id="4992" class="Symbol">⦄</a> <a id="4994" class="Symbol">→</a> <a id="4996" href="MJSF.Syntax.html#SyntaxG.Stmt" class="Datatype">Stmt</a> <a id="5001" href="MJSF.Syntax.html#4641" class="Bound">s</a> <a id="5003" href="MJSF.Syntax.html#4652" class="Bound">r</a> <a id="5005" href="MJSF.Syntax.html#4934" class="Bound">s&#39;</a> <a id="5008" class="Comment">-- local variable scope `s&#39;` is connected to lexical context scope `s`</a>
      <a id="SyntaxG.Stmt.asgn" href="MJSF.Syntax.html#SyntaxG.Stmt.asgn" class="InductiveConstructor">asgn</a>  <a id="5091" class="Symbol">:</a> <a id="5093" class="Symbol">∀</a> <a id="5095" class="Symbol">{</a><a id="5096" href="MJSF.Syntax.html#5096" class="Bound">t&#39;</a><a id="5098" class="Symbol">}</a> <a id="5100" class="Symbol">→</a> <a id="5102" class="Symbol">(</a><a id="5103" href="MJSF.Syntax.html#4641" class="Bound">s</a> <a id="5105" href="ScopesFrames.ScopesFrames.html#2202" class="Datatype Operator">↦</a> <a id="5107" href="MJSF.Syntax.html#Ty.v%E1%B5%97" class="InductiveConstructor">vᵗ</a> <a id="5110" href="MJSF.Syntax.html#5096" class="Bound">t&#39;</a><a id="5112" class="Symbol">)</a> <a id="5114" class="Symbol">→</a> <a id="5116" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="5121" href="MJSF.Syntax.html#4641" class="Bound">s</a> <a id="5123" href="MJSF.Syntax.html#5096" class="Bound">t&#39;</a> <a id="5126" class="Symbol">→</a> <a id="5128" href="MJSF.Syntax.html#SyntaxG.Stmt" class="Datatype">Stmt</a> <a id="5133" href="MJSF.Syntax.html#4641" class="Bound">s</a> <a id="5135" href="MJSF.Syntax.html#4652" class="Bound">r</a> <a id="5137" href="MJSF.Syntax.html#4641" class="Bound">s</a>
      <a id="SyntaxG.Stmt.ret" href="MJSF.Syntax.html#SyntaxG.Stmt.ret" class="InductiveConstructor">ret</a>   <a id="5151" class="Symbol">:</a> <a id="5153" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="5158" href="MJSF.Syntax.html#4641" class="Bound">s</a> <a id="5160" href="MJSF.Syntax.html#4652" class="Bound">r</a> <a id="5162" class="Symbol">→</a> <a id="5164" href="MJSF.Syntax.html#SyntaxG.Stmt" class="Datatype">Stmt</a> <a id="5169" href="MJSF.Syntax.html#4641" class="Bound">s</a> <a id="5171" href="MJSF.Syntax.html#4652" class="Bound">r</a> <a id="5173" href="MJSF.Syntax.html#4641" class="Bound">s</a>
      <a id="SyntaxG.Stmt.block" href="MJSF.Syntax.html#SyntaxG.Stmt.block" class="InductiveConstructor">block</a> <a id="5187" class="Symbol">:</a> <a id="5189" class="Symbol">∀</a> <a id="5191" class="Symbol">{</a><a id="5192" href="MJSF.Syntax.html#5192" class="Bound">s&#39;</a><a id="5194" class="Symbol">}</a> <a id="5196" class="Symbol">→</a> <a id="5198" href="MJSF.Syntax.html#SyntaxG.Stmts" class="Function">Stmts</a> <a id="5204" href="MJSF.Syntax.html#4641" class="Bound">s</a> <a id="5206" href="MJSF.Syntax.html#4652" class="Bound">r</a> <a id="5208" href="MJSF.Syntax.html#5192" class="Bound">s&#39;</a> <a id="5211" class="Symbol">→</a> <a id="5213" href="MJSF.Syntax.html#SyntaxG.Stmt" class="Datatype">Stmt</a> <a id="5218" href="MJSF.Syntax.html#4641" class="Bound">s</a> <a id="5220" href="MJSF.Syntax.html#4652" class="Bound">r</a> <a id="5222" href="MJSF.Syntax.html#4641" class="Bound">s</a>

    <a id="5229" class="Comment">-- A block of statements is given by a sequence of statements</a>
    <a id="5295" class="Comment">-- whose scopes are lexically nested (if at all):</a>

    <a id="SyntaxG.Stmts" href="MJSF.Syntax.html#SyntaxG.Stmts" class="Function">Stmts</a> <a id="5356" class="Symbol">:</a> <a id="5358" href="MJSF.Syntax.html#Scope" class="Function">Scope</a> <a id="5364" class="Symbol">→</a> <a id="5366" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="5370" class="Symbol">→</a> <a id="5372" href="MJSF.Syntax.html#Scope" class="Function">Scope</a> <a id="5378" class="Symbol">→</a> <a id="5380" class="PrimitiveType">Set</a>
    <a id="5388" href="MJSF.Syntax.html#SyntaxG.Stmts" class="Function">Stmts</a> <a id="5394" href="MJSF.Syntax.html#5394" class="Bound">s</a> <a id="5396" href="MJSF.Syntax.html#5396" class="Bound">r</a> <a id="5398" href="MJSF.Syntax.html#5398" class="Bound">s&#39;</a> <a id="5401" class="Symbol">=</a> <a id="5403" href="Data.Star.html#Star" class="Datatype">Star</a> <a id="5408" class="Symbol">(λ</a> <a id="5411" href="MJSF.Syntax.html#5411" class="Bound">s</a> <a id="5413" href="MJSF.Syntax.html#5413" class="Bound">s&#39;</a> <a id="5416" class="Symbol">→</a> <a id="5418" href="MJSF.Syntax.html#SyntaxG.Stmt" class="Datatype">Stmt</a> <a id="5423" href="MJSF.Syntax.html#5411" class="Bound">s</a> <a id="5425" href="MJSF.Syntax.html#5396" class="Bound">r</a> <a id="5427" href="MJSF.Syntax.html#5413" class="Bound">s&#39;</a><a id="5429" class="Symbol">)</a> <a id="5431" href="MJSF.Syntax.html#5394" class="Bound">s</a> <a id="5433" href="MJSF.Syntax.html#5398" class="Bound">s&#39;</a>

  <a id="5439" class="Comment">-- Method bodies have a mandatory return expression, except for</a>
  <a id="5505" class="Comment">-- `void` typed method bodies:</a>

  <a id="5539" class="Keyword">data</a> <a id="SyntaxG.Body" href="MJSF.Syntax.html#SyntaxG.Body" class="Datatype">Body</a> <a id="5549" class="Symbol">(</a><a id="5550" href="MJSF.Syntax.html#5550" class="Bound">s</a> <a id="5552" class="Symbol">:</a> <a id="5554" href="MJSF.Syntax.html#Scope" class="Function">Scope</a><a id="5559" class="Symbol">)</a> <a id="5561" class="Symbol">:</a> <a id="5563" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="5567" class="Symbol">→</a> <a id="5569" class="PrimitiveType">Set</a> <a id="5573" class="Keyword">where</a>
    <a id="SyntaxG.Body.body" href="MJSF.Syntax.html#SyntaxG.Body.body" class="InductiveConstructor">body</a>      <a id="5593" class="Symbol">:</a> <a id="5595" class="Symbol">∀</a> <a id="5597" class="Symbol">{</a><a id="5598" href="MJSF.Syntax.html#5598" class="Bound">s&#39;</a> <a id="5601" href="MJSF.Syntax.html#5601" class="Bound">t</a><a id="5602" class="Symbol">}</a> <a id="5604" class="Symbol">→</a> <a id="5606" href="MJSF.Syntax.html#SyntaxG.Stmts" class="Function">Stmts</a> <a id="5612" href="MJSF.Syntax.html#5550" class="Bound">s</a> <a id="5614" href="MJSF.Syntax.html#5601" class="Bound">t</a> <a id="5616" href="MJSF.Syntax.html#5598" class="Bound">s&#39;</a> <a id="5619" class="Symbol">→</a> <a id="5621" href="MJSF.Syntax.html#SyntaxG.Expr" class="Datatype">Expr</a> <a id="5626" href="MJSF.Syntax.html#5598" class="Bound">s&#39;</a> <a id="5629" href="MJSF.Syntax.html#5601" class="Bound">t</a> <a id="5631" class="Symbol">→</a> <a id="5633" href="MJSF.Syntax.html#SyntaxG.Body" class="Datatype">Body</a> <a id="5638" href="MJSF.Syntax.html#5550" class="Bound">s</a> <a id="5640" href="MJSF.Syntax.html#5601" class="Bound">t</a>
    <a id="SyntaxG.Body.body-void" href="MJSF.Syntax.html#SyntaxG.Body.body-void" class="InductiveConstructor">body-void</a> <a id="5656" class="Symbol">:</a> <a id="5658" class="Symbol">∀</a> <a id="5660" class="Symbol">{</a><a id="5661" href="MJSF.Syntax.html#5661" class="Bound">s&#39;</a><a id="5663" class="Symbol">}</a> <a id="5665" class="Symbol">→</a> <a id="5667" href="MJSF.Syntax.html#SyntaxG.Stmts" class="Function">Stmts</a> <a id="5673" href="MJSF.Syntax.html#5550" class="Bound">s</a> <a id="5675" href="MJSF.Syntax.html#VTy.void" class="InductiveConstructor">void</a> <a id="5680" href="MJSF.Syntax.html#5661" class="Bound">s&#39;</a> <a id="5683" class="Symbol">→</a> <a id="5685" href="MJSF.Syntax.html#SyntaxG.Body" class="Datatype">Body</a> <a id="5690" href="MJSF.Syntax.html#5550" class="Bound">s</a> <a id="5692" href="MJSF.Syntax.html#VTy.void" class="InductiveConstructor">void</a>

  <a id="5700" class="Comment">-- A method defines the scope shape mandating that the method type</a>
  <a id="5769" class="Comment">-- parameters are declarations of the method body scope, and that</a>
  <a id="5837" class="Comment">-- the method body scope is connected to the scope of the class</a>
  <a id="5903" class="Comment">-- where they are defined.  The `s` in `Meth s ts t` is the scope of</a>
  <a id="5974" class="Comment">-- the surrounding class.</a>

  <a id="6003" class="Keyword">data</a> <a id="SyntaxG.Meth" href="MJSF.Syntax.html#SyntaxG.Meth" class="Datatype">Meth</a> <a id="6013" class="Symbol">(</a><a id="6014" href="MJSF.Syntax.html#6014" class="Bound">s</a> <a id="6016" class="Symbol">:</a> <a id="6018" href="MJSF.Syntax.html#Scope" class="Function">Scope</a><a id="6023" class="Symbol">)</a> <a id="6025" class="Symbol">:</a> <a id="6027" href="Agda.Builtin.List.html#List" class="Datatype">List</a> <a id="6032" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="6036" class="Symbol">→</a> <a id="6038" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a> <a id="6042" class="Symbol">→</a> <a id="6044" class="PrimitiveType">Set</a> <a id="6048" class="Keyword">where</a>
    <a id="SyntaxG.Meth.meth" href="MJSF.Syntax.html#SyntaxG.Meth.meth" class="InductiveConstructor">meth</a>  <a id="6064" class="Symbol">:</a>  <a id="6067" class="Symbol">∀</a> <a id="6069" class="Symbol">{</a><a id="6070" href="MJSF.Syntax.html#6070" class="Bound">ts</a> <a id="6073" href="MJSF.Syntax.html#6073" class="Bound">rt</a><a id="6075" class="Symbol">}(</a><a id="6077" href="MJSF.Syntax.html#6077" class="Bound">s&#39;</a> <a id="6080" class="Symbol">:</a> <a id="6082" href="MJSF.Syntax.html#Scope" class="Function">Scope</a><a id="6087" class="Symbol">)</a>
             <a id="6102" class="Symbol">⦃</a> <a id="6104" href="MJSF.Syntax.html#6104" class="Bound">shape</a> <a id="6110" class="Symbol">:</a> <a id="6112" href="MJSF.Syntax.html#2313" class="Bound">g</a> <a id="6114" href="MJSF.Syntax.html#6077" class="Bound">s&#39;</a> <a id="6117" href="Agda.Builtin.Equality.html#_%E2%89%A1_" class="Datatype Operator">≡</a> <a id="6119" class="Symbol">(</a><a id="6120" href="Data.List.Base.html#map" class="Function">map</a> <a id="6124" href="MJSF.Syntax.html#Ty.v%E1%B5%97" class="InductiveConstructor">vᵗ</a> <a id="6127" href="MJSF.Syntax.html#6070" class="Bound">ts</a> <a id="6130" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="6132" href="Data.List.Base.html#%5B_%5D" class="Function Operator">[</a> <a id="6134" href="MJSF.Syntax.html#6014" class="Bound">s</a> <a id="6136" href="Data.List.Base.html#%5B_%5D" class="Function Operator">]</a><a id="6137" class="Symbol">)</a> <a id="6139" class="Symbol">⦄</a> <a id="6141" class="Symbol">→</a>
             <a id="6156" href="MJSF.Syntax.html#SyntaxG.Body" class="Datatype">Body</a> <a id="6161" href="MJSF.Syntax.html#6077" class="Bound">s&#39;</a> <a id="6164" href="MJSF.Syntax.html#6073" class="Bound">rt</a> <a id="6167" class="Symbol">→</a>
             <a id="6182" href="MJSF.Syntax.html#SyntaxG.Meth" class="Datatype">Meth</a> <a id="6187" href="MJSF.Syntax.html#6014" class="Bound">s</a> <a id="6189" href="MJSF.Syntax.html#6070" class="Bound">ts</a> <a id="6192" href="MJSF.Syntax.html#6073" class="Bound">rt</a>

  <a id="6198" class="Comment">-- A class definition has an optional path to a super class; the</a>
  <a id="6265" class="Comment">-- only difference between a `class0` and a `class1` is that a</a>
  <a id="6330" class="Comment">-- `class1` has a path from the root scope `sʳ` to another class</a>
  <a id="6397" class="Comment">-- declaration, i.e., the super class.</a>
  <a id="6438" class="Comment">--</a>
  <a id="6443" class="Comment">-- The `sʳ` in `Class sʳ s` is the root scope (representing the</a>
  <a id="6509" class="Comment">-- class table), and the `s` is the scope of the defined class.</a>
  <a id="6575" class="Comment">--</a>
  <a id="6580" class="Comment">-- We distinguish three kinds of class members in MJ:</a>
  <a id="6636" class="Comment">--</a>
  <a id="6641" class="Comment">-- * Fields, typed by `fs`.</a>
  <a id="6671" class="Comment">--</a>
  <a id="6676" class="Comment">-- * Methods, typed by `ms`, where for each method type signature</a>
  <a id="6744" class="Comment">--   `mᵗ ts t` in `ms` there is a well-typed method `Meth s ts t`.</a>
  <a id="6813" class="Comment">--</a>
  <a id="6818" class="Comment">-- * Overriding methods, typed by `oms`, where for each method type</a>
  <a id="6888" class="Comment">--   signature `mᵗ ts t` in `oms` there is a path from the current</a>
  <a id="6957" class="Comment">--   class scope to a method declaration in a parent class scope,</a>
  <a id="7025" class="Comment">--   and a well-typed method `Meth s ts t` which overrides the</a>
  <a id="7090" class="Comment">--   method corresponding to that declaration.</a>

  <a id="7140" class="Keyword">data</a> <a id="SyntaxG.Class" href="MJSF.Syntax.html#SyntaxG.Class" class="Datatype">Class</a> <a id="7151" class="Symbol">(</a><a id="7152" href="MJSF.Syntax.html#7152" class="Bound">sʳ</a> <a id="7155" href="MJSF.Syntax.html#7155" class="Bound">s</a> <a id="7157" class="Symbol">:</a> <a id="7159" href="MJSF.Syntax.html#Scope" class="Function">Scope</a><a id="7164" class="Symbol">)</a> <a id="7166" class="Symbol">:</a> <a id="7168" class="PrimitiveType">Set</a> <a id="7172" class="Keyword">where</a>
    <a id="SyntaxG.Class.class1" href="MJSF.Syntax.html#SyntaxG.Class.class1" class="InductiveConstructor">class1</a>  <a id="7190" class="Symbol">:</a>  <a id="7193" class="Symbol">∀</a> <a id="7195" class="Symbol">{</a><a id="7196" href="MJSF.Syntax.html#7196" class="Bound">ms</a> <a id="7199" href="MJSF.Syntax.html#7199" class="Bound">fs</a> <a id="7202" href="MJSF.Syntax.html#7202" class="Bound">oms</a> <a id="7206" href="MJSF.Syntax.html#7206" class="Bound">sᵖ</a><a id="7208" class="Symbol">}</a> <a id="7210" class="Symbol">→</a>
               <a id="7227" href="MJSF.Syntax.html#7152" class="Bound">sʳ</a> <a id="7230" href="ScopesFrames.ScopesFrames.html#2202" class="Datatype Operator">↦</a> <a id="7232" class="Symbol">(</a><a id="7233" href="MJSF.Syntax.html#Ty.c%E1%B5%97" class="InductiveConstructor">cᵗ</a> <a id="7236" href="MJSF.Syntax.html#7152" class="Bound">sʳ</a> <a id="7239" href="MJSF.Syntax.html#7206" class="Bound">sᵖ</a><a id="7241" class="Symbol">)</a> <a id="7243" class="Symbol">→</a>
               <a id="7260" class="Symbol">⦃</a> <a id="7262" href="MJSF.Syntax.html#7262" class="Bound">shape</a>  <a id="7269" class="Symbol">:</a>  <a id="7272" href="MJSF.Syntax.html#2313" class="Bound">g</a> <a id="7274" href="MJSF.Syntax.html#7155" class="Bound">s</a>  <a id="7277" href="Agda.Builtin.Equality.html#_%E2%89%A1_" class="Datatype Operator">≡</a>  <a id="7280" class="Symbol">(</a><a id="7281" href="MJSF.Syntax.html#7196" class="Bound">ms</a> <a id="7284" href="Data.List.Base.html#_%2B%2B_" class="Function Operator">++</a> <a id="7287" href="MJSF.Syntax.html#7199" class="Bound">fs</a> <a id="7290" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a>  <a id="7293" href="MJSF.Syntax.html#7152" class="Bound">sʳ</a> <a id="7296" href="Agda.Builtin.List.html#List._%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="7298" href="MJSF.Syntax.html#7206" class="Bound">sᵖ</a> <a id="7301" href="Agda.Builtin.List.html#List._%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="7303" href="Agda.Builtin.List.html#List.%5B%5D" class="InductiveConstructor">[]</a><a id="7305" class="Symbol">)</a> <a id="7307" class="Symbol">⦄</a> <a id="7309" class="Symbol">→</a>
               <a id="7326" href="Data.List.All.html#All" class="Datatype">All</a> <a id="7330" class="Symbol">(</a><a id="7331" href="MJSF.Syntax.html#%23m" class="Datatype">#m</a> <a id="7334" class="Symbol">(</a><a id="7335" href="MJSF.Syntax.html#SyntaxG.Meth" class="Datatype">Meth</a> <a id="7340" href="MJSF.Syntax.html#7155" class="Bound">s</a><a id="7341" class="Symbol">))</a> <a id="7344" href="MJSF.Syntax.html#7196" class="Bound">ms</a> <a id="7347" class="Symbol">→</a>
               <a id="7364" href="Data.List.All.html#All" class="Datatype">All</a> <a id="7368" class="Symbol">(</a><a id="7369" href="MJSF.Syntax.html#%23v" class="Datatype">#v</a> <a id="7372" class="Symbol">(λ</a> <a id="7375" href="MJSF.Syntax.html#7375" class="Bound">_</a> <a id="7377" class="Symbol">→</a> <a id="7379" href="Agda.Builtin.Unit.html#%E2%8A%A4" class="Record">⊤</a><a id="7380" class="Symbol">))</a> <a id="7383" href="MJSF.Syntax.html#7199" class="Bound">fs</a> <a id="7386" class="Symbol">→</a>
               <a id="7403" href="Data.List.All.html#All" class="Datatype">All</a> <a id="7407" class="Symbol">(</a><a id="7408" href="MJSF.Syntax.html#%23m" class="Datatype">#m</a> <a id="7411" class="Symbol">(λ</a> <a id="7414" href="MJSF.Syntax.html#7414" class="Bound">ts</a> <a id="7417" href="MJSF.Syntax.html#7417" class="Bound">rt</a> <a id="7420" class="Symbol">→</a> <a id="7422" class="Symbol">(</a><a id="7423" href="MJSF.Syntax.html#7155" class="Bound">s</a> <a id="7425" href="ScopesFrames.ScopesFrames.html#2202" class="Datatype Operator">↦</a> <a id="7427" class="Symbol">(</a><a id="7428" href="MJSF.Syntax.html#Ty.m%E1%B5%97" class="InductiveConstructor">mᵗ</a> <a id="7431" href="MJSF.Syntax.html#7414" class="Bound">ts</a> <a id="7434" href="MJSF.Syntax.html#7417" class="Bound">rt</a><a id="7436" class="Symbol">))</a> <a id="7439" href="Data.Product.html#_%C3%97_" class="Function Operator">×</a> <a id="7441" href="MJSF.Syntax.html#SyntaxG.Meth" class="Datatype">Meth</a> <a id="7446" href="MJSF.Syntax.html#7155" class="Bound">s</a> <a id="7448" href="MJSF.Syntax.html#7414" class="Bound">ts</a> <a id="7451" href="MJSF.Syntax.html#7417" class="Bound">rt</a> <a id="7454" class="Symbol">))</a> <a id="7457" href="MJSF.Syntax.html#7202" class="Bound">oms</a> <a id="7461" class="Symbol">→</a> <a id="7463" class="Comment">-- overrides</a>
               <a id="7491" href="MJSF.Syntax.html#SyntaxG.Class" class="Datatype">Class</a> <a id="7497" href="MJSF.Syntax.html#7152" class="Bound">sʳ</a> <a id="7500" href="MJSF.Syntax.html#7155" class="Bound">s</a>
    <a id="SyntaxG.Class.class0" href="MJSF.Syntax.html#SyntaxG.Class.class0" class="InductiveConstructor">class0</a> <a id="7513" class="Symbol">:</a> <a id="7515" class="Symbol">∀</a> <a id="7517" class="Symbol">{</a><a id="7518" href="MJSF.Syntax.html#7518" class="Bound">ms</a> <a id="7521" href="MJSF.Syntax.html#7521" class="Bound">fs</a> <a id="7524" href="MJSF.Syntax.html#7524" class="Bound">oms</a><a id="7527" class="Symbol">}</a> <a id="7529" class="Symbol">→</a>
             <a id="7544" class="Symbol">⦃</a> <a id="7546" href="MJSF.Syntax.html#7546" class="Bound">shape</a> <a id="7552" class="Symbol">:</a> <a id="7554" href="MJSF.Syntax.html#2313" class="Bound">g</a> <a id="7556" href="MJSF.Syntax.html#7155" class="Bound">s</a> <a id="7558" href="Agda.Builtin.Equality.html#_%E2%89%A1_" class="Datatype Operator">≡</a> <a id="7560" class="Symbol">(</a><a id="7561" href="MJSF.Syntax.html#7518" class="Bound">ms</a> <a id="7564" href="Data.List.Base.html#_%2B%2B_" class="Function Operator">++</a> <a id="7567" href="MJSF.Syntax.html#7521" class="Bound">fs</a> <a id="7570" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="7572" href="Data.List.Base.html#%5B_%5D" class="Function Operator">[</a> <a id="7574" href="MJSF.Syntax.html#7152" class="Bound">sʳ</a> <a id="7577" href="Data.List.Base.html#%5B_%5D" class="Function Operator">]</a><a id="7578" class="Symbol">)</a> <a id="7580" class="Symbol">⦄</a> <a id="7582" class="Symbol">→</a>
             <a id="7597" href="Data.List.All.html#All" class="Datatype">All</a> <a id="7601" class="Symbol">(</a><a id="7602" href="MJSF.Syntax.html#%23m" class="Datatype">#m</a> <a id="7605" class="Symbol">(</a><a id="7606" href="MJSF.Syntax.html#SyntaxG.Meth" class="Datatype">Meth</a> <a id="7611" href="MJSF.Syntax.html#7155" class="Bound">s</a><a id="7612" class="Symbol">))</a> <a id="7615" href="MJSF.Syntax.html#7518" class="Bound">ms</a> <a id="7618" class="Symbol">→</a>   <a id="7622" class="Comment">-- only methods</a>
             <a id="7651" href="Data.List.All.html#All" class="Datatype">All</a> <a id="7655" class="Symbol">(</a><a id="7656" href="MJSF.Syntax.html#%23v" class="Datatype">#v</a> <a id="7659" class="Symbol">(λ</a> <a id="7662" href="MJSF.Syntax.html#7662" class="Bound">_</a> <a id="7664" class="Symbol">→</a> <a id="7666" href="Agda.Builtin.Unit.html#%E2%8A%A4" class="Record">⊤</a><a id="7667" class="Symbol">))</a> <a id="7670" href="MJSF.Syntax.html#7521" class="Bound">fs</a> <a id="7673" class="Symbol">→</a>  <a id="7676" class="Comment">-- only values</a>
             <a id="7704" href="Data.List.All.html#All" class="Datatype">All</a> <a id="7708" class="Symbol">(</a><a id="7709" href="MJSF.Syntax.html#%23m" class="Datatype">#m</a> <a id="7712" class="Symbol">(λ</a> <a id="7715" href="MJSF.Syntax.html#7715" class="Bound">ts</a> <a id="7718" href="MJSF.Syntax.html#7718" class="Bound">rt</a> <a id="7721" class="Symbol">→</a> <a id="7723" class="Symbol">(</a><a id="7724" href="MJSF.Syntax.html#7155" class="Bound">s</a> <a id="7726" href="ScopesFrames.ScopesFrames.html#2202" class="Datatype Operator">↦</a> <a id="7728" class="Symbol">(</a><a id="7729" href="MJSF.Syntax.html#Ty.m%E1%B5%97" class="InductiveConstructor">mᵗ</a> <a id="7732" href="MJSF.Syntax.html#7715" class="Bound">ts</a> <a id="7735" href="MJSF.Syntax.html#7718" class="Bound">rt</a><a id="7737" class="Symbol">))</a> <a id="7740" href="Data.Product.html#_%C3%97_" class="Function Operator">×</a> <a id="7742" href="MJSF.Syntax.html#SyntaxG.Meth" class="Datatype">Meth</a> <a id="7747" href="MJSF.Syntax.html#7155" class="Bound">s</a> <a id="7749" href="MJSF.Syntax.html#7715" class="Bound">ts</a> <a id="7752" href="MJSF.Syntax.html#7718" class="Bound">rt</a> <a id="7755" class="Symbol">))</a> <a id="7758" href="MJSF.Syntax.html#7524" class="Bound">oms</a> <a id="7762" class="Symbol">→</a> <a id="7764" class="Comment">-- overrides</a>
             <a id="7790" href="MJSF.Syntax.html#SyntaxG.Class" class="Datatype">Class</a> <a id="7796" href="MJSF.Syntax.html#7152" class="Bound">sʳ</a> <a id="7799" href="MJSF.Syntax.html#7155" class="Bound">s</a>

  <a id="7804" class="Comment">-- A program consists of a sequence of well-typed class definitions</a>
  <a id="7874" class="Comment">-- and a main function to be evaluated in the context of the root</a>
  <a id="7942" class="Comment">-- scope.  The root scope has only class-typed declarations, and has</a>
  <a id="8013" class="Comment">-- no parent edges:</a>

  <a id="8036" class="Keyword">data</a> <a id="SyntaxG.Program" href="MJSF.Syntax.html#SyntaxG.Program" class="Datatype">Program</a> <a id="8049" class="Symbol">(</a><a id="8050" href="MJSF.Syntax.html#8050" class="Bound">sʳ</a> <a id="8053" class="Symbol">:</a> <a id="8055" href="MJSF.Syntax.html#Scope" class="Function">Scope</a><a id="8060" class="Symbol">)(</a><a id="8062" href="MJSF.Syntax.html#8062" class="Bound">a</a> <a id="8064" class="Symbol">:</a> <a id="8066" href="MJSF.Syntax.html#VTy" class="Datatype">VTy</a><a id="8069" class="Symbol">)</a> <a id="8071" class="Symbol">:</a> <a id="8073" class="PrimitiveType">Set</a> <a id="8077" class="Keyword">where</a>
    <a id="SyntaxG.Program.program" href="MJSF.Syntax.html#SyntaxG.Program.program" class="InductiveConstructor">program</a> <a id="8095" class="Symbol">:</a>
      <a id="8103" class="Symbol">∀</a> <a id="8105" href="MJSF.Syntax.html#8105" class="Bound">cs</a> <a id="8108" class="Symbol">⦃</a> <a id="8110" href="MJSF.Syntax.html#8110" class="Bound">shape</a> <a id="8116" class="Symbol">:</a> <a id="8118" href="MJSF.Syntax.html#2313" class="Bound">g</a> <a id="8120" href="MJSF.Syntax.html#8050" class="Bound">sʳ</a> <a id="8123" href="Agda.Builtin.Equality.html#_%E2%89%A1_" class="Datatype Operator">≡</a> <a id="8125" class="Symbol">(</a><a id="8126" href="MJSF.Syntax.html#8105" class="Bound">cs</a> <a id="8129" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="8131" href="Agda.Builtin.List.html#List.%5B%5D" class="InductiveConstructor">[]</a><a id="8133" class="Symbol">)</a> <a id="8135" class="Symbol">⦄</a> <a id="8137" class="Symbol">→</a>
        <a id="8147" class="Comment">-- implementation of all the classes</a>
        <a id="8192" href="Data.List.All.html#All" class="Datatype">All</a> <a id="8196" class="Symbol">(</a><a id="8197" href="MJSF.Syntax.html#%23c" class="Datatype">#c</a> <a id="8200" href="MJSF.Syntax.html#8050" class="Bound">sʳ</a> <a id="8203" class="Symbol">(λ</a> <a id="8206" href="MJSF.Syntax.html#8206" class="Bound">s</a> <a id="8208" class="Symbol">→</a> <a id="8210" href="MJSF.Syntax.html#SyntaxG.Class" class="Datatype">Class</a> <a id="8216" href="MJSF.Syntax.html#8050" class="Bound">sʳ</a> <a id="8219" href="MJSF.Syntax.html#8206" class="Bound">s</a> <a id="8221" href="Data.Product.html#_%C3%97_" class="Function Operator">×</a> <a id="8223" href="Data.Product.html#%E2%88%83" class="Function">∃</a> <a id="8225" class="Symbol">λ</a> <a id="8227" href="MJSF.Syntax.html#8227" class="Bound">s&#39;</a> <a id="8230" class="Symbol">→</a> <a id="8232" href="MJSF.Syntax.html#SyntaxG.Inherits" class="Datatype">Inherits</a> <a id="8241" href="MJSF.Syntax.html#8206" class="Bound">s</a> <a id="8243" href="MJSF.Syntax.html#8227" class="Bound">s&#39;</a><a id="8245" class="Symbol">))</a> <a id="8248" href="MJSF.Syntax.html#8105" class="Bound">cs</a> <a id="8251" class="Symbol">→</a>
        <a id="8261" class="Comment">-- main function</a>
        <a id="8286" href="MJSF.Syntax.html#SyntaxG.Body" class="Datatype">Body</a> <a id="8291" href="MJSF.Syntax.html#8050" class="Bound">sʳ</a> <a id="8294" href="MJSF.Syntax.html#8062" class="Bound">a</a> <a id="8296" class="Symbol">→</a>
        <a id="8306" href="MJSF.Syntax.html#SyntaxG.Program" class="Datatype">Program</a> <a id="8314" href="MJSF.Syntax.html#8050" class="Bound">sʳ</a> <a id="8317" href="MJSF.Syntax.html#8062" class="Bound">a</a>
</pre></body></html>