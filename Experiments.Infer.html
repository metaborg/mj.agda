<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Experiments.Infer</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="Relation.Binary.html" class="Module">Relation.Binary</a>
<a id="29" class="Keyword">open</a> <a id="34" class="Keyword">import</a> <a id="41" href="Level.html" class="Module">Level</a>

<a id="48" class="Keyword">module</a> <a id="55" href="Experiments.Infer.html" class="Module">Experiments.Infer</a> <a id="73" class="Symbol">{</a><a id="74" href="Experiments.Infer.html#74" class="Bound">c</a> <a id="76" href="Experiments.Infer.html#76" class="Bound">ℓ₁</a> <a id="79" href="Experiments.Infer.html#79" class="Bound">ℓ₂</a><a id="81" class="Symbol">}(</a><a id="83" href="Experiments.Infer.html#83" class="Bound">PO</a> <a id="86" class="Symbol">:</a> <a id="88" href="Relation.Binary.html#Preorder" class="Record">Preorder</a> <a id="97" href="Experiments.Infer.html#74" class="Bound">c</a> <a id="99" href="Experiments.Infer.html#76" class="Bound">ℓ₁</a> <a id="102" href="Experiments.Infer.html#79" class="Bound">ℓ₂</a><a id="104" class="Symbol">)</a> <a id="106" class="Keyword">where</a>

<a id="113" class="Keyword">open</a> <a id="118" href="Relation.Binary.html#Preorder" class="Module">Preorder</a> <a id="127" href="Experiments.Infer.html#83" class="Bound">PO</a> <a id="130" class="Keyword">renaming</a> <a id="139" class="Symbol">(</a>_∼_ <a id="144" class="Symbol">to</a> _⊑_<a id="150" class="Symbol">)</a>

<a id="153" class="Keyword">record</a> <a id="IsIncluded" href="Experiments.Infer.html#IsIncluded" class="Record">IsIncluded</a> <a id="171" class="Symbol">(</a><a id="172" href="Experiments.Infer.html#172" class="Bound">W</a> <a id="174" href="Experiments.Infer.html#174" class="Bound">W&#39;</a> <a id="177" class="Symbol">:</a> <a id="179" href="Relation.Binary.html#1549" class="Field">Carrier</a><a id="186" class="Symbol">)</a> <a id="188" class="Symbol">:</a> <a id="190" class="PrimitiveType">Set</a> <a id="194" href="Experiments.Infer.html#79" class="Bound">ℓ₂</a> <a id="197" class="Keyword">where</a>
  <a id="205" class="Keyword">field</a>
    <a id="IsIncluded.is-included" href="Experiments.Infer.html#IsIncluded.is-included" class="Field">is-included</a> <a id="227" class="Symbol">:</a> <a id="229" href="Experiments.Infer.html#172" class="Bound">W</a> <a id="231" href="Relation.Binary.html#1633" class="Field Operator">⊑</a> <a id="233" href="Experiments.Infer.html#174" class="Bound">W&#39;</a>

<a id="237" class="Keyword">record</a> <a id="IsIncludedOnce" href="Experiments.Infer.html#IsIncludedOnce" class="Record">IsIncludedOnce</a> <a id="259" class="Symbol">(</a><a id="260" href="Experiments.Infer.html#260" class="Bound">W</a> <a id="262" href="Experiments.Infer.html#262" class="Bound">W&#39;</a> <a id="265" class="Symbol">:</a> <a id="267" href="Relation.Binary.html#1549" class="Field">Carrier</a><a id="274" class="Symbol">)</a> <a id="276" class="Symbol">:</a> <a id="278" class="PrimitiveType">Set</a> <a id="282" href="Experiments.Infer.html#79" class="Bound">ℓ₂</a> <a id="285" class="Keyword">where</a>
  <a id="293" class="Keyword">field</a>
    <a id="IsIncludedOnce.is-included-once" href="Experiments.Infer.html#IsIncludedOnce.is-included-once" class="Field">is-included-once</a> <a id="320" class="Symbol">:</a> <a id="322" href="Experiments.Infer.html#260" class="Bound">W</a> <a id="324" href="Relation.Binary.html#1633" class="Field Operator">⊑</a> <a id="326" href="Experiments.Infer.html#262" class="Bound">W&#39;</a>

<a id="330" class="Keyword">instance</a>
  <a id="is-included-refl" href="Experiments.Infer.html#is-included-refl" class="Function">is-included-refl</a> <a id="358" class="Symbol">:</a> <a id="360" class="Symbol">∀</a> <a id="362" class="Symbol">{</a><a id="363" href="Experiments.Infer.html#363" class="Bound">W</a><a id="364" class="Symbol">}</a> <a id="366" class="Symbol">→</a> <a id="368" href="Experiments.Infer.html#IsIncluded" class="Record">IsIncluded</a> <a id="379" href="Experiments.Infer.html#363" class="Bound">W</a> <a id="381" href="Experiments.Infer.html#363" class="Bound">W</a>
  <a id="385" href="Experiments.Infer.html#is-included-refl" class="Function">is-included-refl</a> <a id="402" class="Symbol">=</a> <a id="404" class="Keyword">record</a> <a id="411" class="Symbol">{</a> <a id="413" class="Field">is-included</a> <a id="425" class="Symbol">=</a> <a id="427" href="Relation.Binary.html#1267" class="Function">refl</a> <a id="432" class="Symbol">}</a>

  <a id="is-included-step" href="Experiments.Infer.html#is-included-step" class="Function">is-included-step</a> <a id="454" class="Symbol">:</a> <a id="456" class="Symbol">∀</a> <a id="458" class="Symbol">{</a><a id="459" href="Experiments.Infer.html#459" class="Bound">W</a> <a id="461" href="Experiments.Infer.html#461" class="Bound">W&#39;</a> <a id="464" href="Experiments.Infer.html#464" class="Bound">W&#39;&#39;</a><a id="467" class="Symbol">}</a> <a id="469" class="Symbol">⦃</a> <a id="471" href="Experiments.Infer.html#471" class="Bound">p</a> <a id="473" class="Symbol">:</a> <a id="475" href="Experiments.Infer.html#IsIncludedOnce" class="Record">IsIncludedOnce</a> <a id="490" href="Experiments.Infer.html#459" class="Bound">W</a> <a id="492" href="Experiments.Infer.html#461" class="Bound">W&#39;</a> <a id="495" class="Symbol">⦄</a> <a id="497" class="Symbol">⦃</a> <a id="499" href="Experiments.Infer.html#499" class="Bound">q</a> <a id="501" class="Symbol">:</a> <a id="503" href="Experiments.Infer.html#IsIncluded" class="Record">IsIncluded</a> <a id="514" href="Experiments.Infer.html#461" class="Bound">W&#39;</a> <a id="517" href="Experiments.Infer.html#464" class="Bound">W&#39;&#39;</a> <a id="521" class="Symbol">⦄</a> <a id="523" class="Symbol">→</a> <a id="525" href="Experiments.Infer.html#IsIncluded" class="Record">IsIncluded</a> <a id="536" href="Experiments.Infer.html#459" class="Bound">W</a> <a id="538" href="Experiments.Infer.html#464" class="Bound">W&#39;&#39;</a>
  <a id="544" href="Experiments.Infer.html#is-included-step" class="Function">is-included-step</a>
    <a id="565" class="Symbol">{{</a><a id="567" class="Argument">p</a> <a id="569" class="Symbol">=</a> <a id="571" class="Keyword">record</a> <a id="578" class="Symbol">{</a> <a id="580" class="Field">is-included-once</a> <a id="597" class="Symbol">=</a> <a id="599" href="Experiments.Infer.html#599" class="Bound">p</a> <a id="601" class="Symbol">}}}</a>
    <a id="609" class="Symbol">{{</a><a id="611" class="Keyword">record</a> <a id="618" class="Symbol">{</a> <a id="620" class="Field">is-included</a> <a id="632" class="Symbol">=</a> <a id="634" href="Experiments.Infer.html#634" class="Bound">q</a> <a id="636" class="Symbol">}}}</a> <a id="640" class="Symbol">=</a> <a id="642" class="Keyword">record</a> <a id="649" class="Symbol">{</a> <a id="651" class="Field">is-included</a> <a id="663" class="Symbol">=</a> <a id="665" href="Relation.Binary.html#1190" class="Function">trans</a> <a id="671" href="Experiments.Infer.html#599" class="Bound">p</a> <a id="673" href="Experiments.Infer.html#634" class="Bound">q</a> <a id="675" class="Symbol">}</a>

<a id="678" class="Comment">-- typeclass for world-indexed things that support weakening</a>
<a id="739" class="Keyword">record</a> <a id="Weakenable" href="Experiments.Infer.html#Weakenable" class="Record">Weakenable</a> <a id="757" class="Symbol">{</a><a id="758" href="Experiments.Infer.html#758" class="Bound">i</a><a id="759" class="Symbol">}(</a><a id="761" href="Experiments.Infer.html#761" class="Bound">I</a> <a id="763" class="Symbol">:</a> <a id="765" href="Relation.Binary.html#1549" class="Field">Carrier</a> <a id="773" class="Symbol">→</a> <a id="775" class="PrimitiveType">Set</a> <a id="779" href="Experiments.Infer.html#758" class="Bound">i</a><a id="780" class="Symbol">)</a> <a id="782" class="Symbol">:</a> <a id="784" class="PrimitiveType">Set</a> <a id="788" class="Symbol">(</a><a id="789" href="Experiments.Infer.html#758" class="Bound">i</a> <a id="791" href="Agda.Primitive.html#_%E2%8A%94_" class="Primitive Operator">⊔</a> <a id="793" href="Experiments.Infer.html#79" class="Bound">ℓ₂</a> <a id="796" href="Agda.Primitive.html#_%E2%8A%94_" class="Primitive Operator">⊔</a> <a id="798" href="Experiments.Infer.html#74" class="Bound">c</a><a id="799" class="Symbol">)</a> <a id="801" class="Keyword">where</a>
  <a id="809" class="Keyword">field</a>
    <a id="Weakenable.weaken" href="Experiments.Infer.html#Weakenable.weaken" class="Field">weaken</a> <a id="826" class="Symbol">:</a> <a id="828" class="Symbol">∀</a> <a id="830" class="Symbol">{</a><a id="831" href="Experiments.Infer.html#831" class="Bound">W</a> <a id="833" href="Experiments.Infer.html#833" class="Bound">W&#39;</a><a id="835" class="Symbol">}</a> <a id="837" class="Symbol">→</a> <a id="839" href="Experiments.Infer.html#831" class="Bound">W</a> <a id="841" href="Relation.Binary.html#1633" class="Field Operator">⊑</a> <a id="843" href="Experiments.Infer.html#833" class="Bound">W&#39;</a> <a id="846" class="Symbol">→</a> <a id="848" href="Experiments.Infer.html#761" class="Bound">I</a> <a id="850" href="Experiments.Infer.html#831" class="Bound">W</a> <a id="852" class="Symbol">→</a> <a id="854" href="Experiments.Infer.html#761" class="Bound">I</a> <a id="856" href="Experiments.Infer.html#833" class="Bound">W&#39;</a>

  <a id="Weakenable.wk" href="Experiments.Infer.html#Weakenable.wk" class="Function">wk</a>     <a id="869" class="Symbol">:</a> <a id="871" class="Symbol">∀</a> <a id="873" class="Symbol">{</a><a id="874" href="Experiments.Infer.html#874" class="Bound">W</a> <a id="876" href="Experiments.Infer.html#876" class="Bound">W&#39;</a><a id="878" class="Symbol">}</a> <a id="880" class="Symbol">→</a> <a id="882" href="Experiments.Infer.html#761" class="Bound">I</a> <a id="884" href="Experiments.Infer.html#874" class="Bound">W</a> <a id="886" class="Symbol">→</a> <a id="888" class="Symbol">⦃</a> <a id="890" href="Experiments.Infer.html#890" class="Bound">p</a> <a id="892" class="Symbol">:</a> <a id="894" href="Experiments.Infer.html#IsIncluded" class="Record">IsIncluded</a> <a id="905" href="Experiments.Infer.html#874" class="Bound">W</a> <a id="907" href="Experiments.Infer.html#876" class="Bound">W&#39;</a> <a id="910" class="Symbol">⦄</a> <a id="912" class="Symbol">→</a> <a id="914" href="Experiments.Infer.html#761" class="Bound">I</a> <a id="916" href="Experiments.Infer.html#876" class="Bound">W&#39;</a>
  <a id="921" href="Experiments.Infer.html#Weakenable.wk" class="Function">wk</a> <a id="924" href="Experiments.Infer.html#924" class="Bound">x</a> <a id="926" class="Symbol">⦃</a> <a id="928" class="Keyword">record</a> <a id="935" class="Symbol">{</a> <a id="937" class="Field">is-included</a> <a id="949" class="Symbol">=</a> <a id="951" href="Experiments.Infer.html#951" class="Bound">p</a> <a id="953" class="Symbol">}</a> <a id="955" class="Symbol">⦄</a> <a id="957" class="Symbol">=</a> <a id="959" href="Experiments.Infer.html#Weakenable.weaken" class="Field">weaken</a> <a id="966" href="Experiments.Infer.html#951" class="Bound">p</a> <a id="968" href="Experiments.Infer.html#924" class="Bound">x</a>

<a id="ISet" href="Experiments.Infer.html#ISet" class="Function">ISet</a> <a id="976" class="Symbol">=</a> <a id="978" href="Relation.Binary.html#1549" class="Field">Carrier</a> <a id="986" class="Symbol">→</a> <a id="988" class="PrimitiveType">Set</a>

<a id="993" class="Keyword">module</a> <a id="Monad" href="Experiments.Infer.html#Monad" class="Module">Monad</a>
  <a id="1008" class="Symbol">(</a><a id="1009" href="Experiments.Infer.html#1009" class="Bound">M</a>    <a id="1014" class="Symbol">:</a> <a id="1016" href="Experiments.Infer.html#ISet" class="Function">ISet</a> <a id="1021" class="Symbol">→</a> <a id="1023" href="Experiments.Infer.html#ISet" class="Function">ISet</a><a id="1027" class="Symbol">)</a>
  <a id="1031" class="Symbol">(</a><a id="1032" href="Experiments.Infer.html#1032" class="Bound">ret</a>  <a id="1037" class="Symbol">:</a> <a id="1039" class="Symbol">∀</a> <a id="1041" class="Symbol">{</a><a id="1042" href="Experiments.Infer.html#1042" class="Bound">P</a> <a id="1044" class="Symbol">:</a> <a id="1046" href="Experiments.Infer.html#ISet" class="Function">ISet</a><a id="1050" class="Symbol">}{</a><a id="1052" href="Experiments.Infer.html#1052" class="Bound">c</a><a id="1053" class="Symbol">}</a> <a id="1055" class="Symbol">→</a> <a id="1057" href="Experiments.Infer.html#1042" class="Bound">P</a> <a id="1059" href="Experiments.Infer.html#1052" class="Bound">c</a> <a id="1061" class="Symbol">→</a> <a id="1063" href="Experiments.Infer.html#1009" class="Bound">M</a> <a id="1065" href="Experiments.Infer.html#1042" class="Bound">P</a> <a id="1067" href="Experiments.Infer.html#1052" class="Bound">c</a><a id="1068" class="Symbol">)</a>
  <a id="1072" class="Symbol">(</a><a id="1073" href="Experiments.Infer.html#1073" class="Bound">bind</a> <a id="1078" class="Symbol">:</a> <a id="1080" class="Symbol">∀</a> <a id="1082" class="Symbol">{</a><a id="1083" href="Experiments.Infer.html#1083" class="Bound">P</a> <a id="1085" href="Experiments.Infer.html#1085" class="Bound">Q</a> <a id="1087" class="Symbol">:</a> <a id="1089" href="Experiments.Infer.html#ISet" class="Function">ISet</a><a id="1093" class="Symbol">}{</a><a id="1095" href="Experiments.Infer.html#1095" class="Bound">c</a><a id="1096" class="Symbol">}</a> <a id="1098" class="Symbol">→</a> <a id="1100" class="Symbol">(∀</a> <a id="1103" class="Symbol">{</a><a id="1104" href="Experiments.Infer.html#1104" class="Bound">c&#39;</a><a id="1106" class="Symbol">}</a> <a id="1108" class="Symbol">⦃</a> <a id="1110" href="Experiments.Infer.html#1110" class="Bound">sub</a> <a id="1114" class="Symbol">:</a> <a id="1116" href="Experiments.Infer.html#IsIncludedOnce" class="Record">IsIncludedOnce</a> <a id="1131" href="Experiments.Infer.html#1095" class="Bound">c</a> <a id="1133" href="Experiments.Infer.html#1104" class="Bound">c&#39;</a> <a id="1136" class="Symbol">⦄</a> <a id="1138" class="Symbol">→</a> <a id="1140" href="Experiments.Infer.html#1083" class="Bound">P</a> <a id="1142" href="Experiments.Infer.html#1104" class="Bound">c&#39;</a> <a id="1145" class="Symbol">→</a> <a id="1147" href="Experiments.Infer.html#1009" class="Bound">M</a> <a id="1149" href="Experiments.Infer.html#1085" class="Bound">Q</a> <a id="1151" href="Experiments.Infer.html#1104" class="Bound">c&#39;</a><a id="1153" class="Symbol">)</a> <a id="1155" class="Symbol">→</a> <a id="1157" href="Experiments.Infer.html#1009" class="Bound">M</a> <a id="1159" href="Experiments.Infer.html#1083" class="Bound">P</a> <a id="1161" href="Experiments.Infer.html#1095" class="Bound">c</a> <a id="1163" class="Symbol">→</a> <a id="1165" href="Experiments.Infer.html#1009" class="Bound">M</a> <a id="1167" href="Experiments.Infer.html#1085" class="Bound">Q</a> <a id="1169" href="Experiments.Infer.html#1095" class="Bound">c</a><a id="1170" class="Symbol">)</a>
  <a id="1174" class="Symbol">(</a><a id="1175" href="Experiments.Infer.html#1175" class="Bound">V</a>    <a id="1180" class="Symbol">:</a> <a id="1182" href="Experiments.Infer.html#ISet" class="Function">ISet</a><a id="1186" class="Symbol">)</a>
  <a id="1190" class="Symbol">(</a><a id="1191" href="Experiments.Infer.html#1191" class="Bound">wV</a>   <a id="1196" class="Symbol">:</a> <a id="1198" href="Experiments.Infer.html#Weakenable" class="Record">Weakenable</a> <a id="1209" href="Experiments.Infer.html#1175" class="Bound">V</a><a id="1210" class="Symbol">)</a>
  <a id="1214" class="Symbol">(</a><a id="1215" href="Experiments.Infer.html#1215" class="Bound">get</a>  <a id="1220" class="Symbol">:</a> <a id="1222" class="Symbol">∀</a> <a id="1224" class="Symbol">{</a><a id="1225" href="Experiments.Infer.html#1225" class="Bound">c</a><a id="1226" class="Symbol">}</a> <a id="1228" class="Symbol">→</a> <a id="1230" href="Experiments.Infer.html#1009" class="Bound">M</a> <a id="1232" href="Experiments.Infer.html#1175" class="Bound">V</a> <a id="1234" href="Experiments.Infer.html#1225" class="Bound">c</a><a id="1235" class="Symbol">)</a>
  <a id="1239" class="Symbol">(</a><a id="1240" href="Experiments.Infer.html#1240" class="Bound">App</a>  <a id="1245" class="Symbol">:</a> <a id="1247" class="Symbol">∀</a> <a id="1249" class="Symbol">{</a><a id="1250" href="Experiments.Infer.html#1250" class="Bound">c</a><a id="1251" class="Symbol">}</a> <a id="1253" class="Symbol">→</a> <a id="1255" href="Experiments.Infer.html#1175" class="Bound">V</a> <a id="1257" href="Experiments.Infer.html#1250" class="Bound">c</a> <a id="1259" class="Symbol">→</a> <a id="1261" href="Experiments.Infer.html#1175" class="Bound">V</a> <a id="1263" href="Experiments.Infer.html#1250" class="Bound">c</a> <a id="1265" class="Symbol">→</a> <a id="1267" href="Experiments.Infer.html#1175" class="Bound">V</a> <a id="1269" href="Experiments.Infer.html#1250" class="Bound">c</a><a id="1270" class="Symbol">)</a>
  <a id="1274" class="Keyword">where</a>

  <a id="1283" class="Keyword">instance</a>
    <a id="Monad.weakenable-val" href="Experiments.Infer.html#Monad.weakenable-val" class="Function">weakenable-val</a> <a id="1311" class="Symbol">=</a> <a id="1313" href="Experiments.Infer.html#1191" class="Bound">wV</a>

  <a id="1319" class="Keyword">open</a> <a id="1324" href="Experiments.Infer.html#Weakenable" class="Module">Weakenable</a> <a id="1335" class="Symbol">⦃...⦄</a>

  <a id="1344" class="Comment">{- uncomment to see the compiler error -}</a>
  <a id="1388" class="Comment">-- test : ∀ {c} → M V c</a>
  <a id="1414" class="Comment">-- test = bind (λ x → bind (λ y → ret (App (wk x) (wk y))) get) get</a>
</pre></body></html>